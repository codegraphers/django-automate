{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Django Automate","text":"<p>The admin-first automation framework for millions of developers.</p> <p>Django Automate provides a robust, strictly typed foundation for building LLM agents, RAG pipelines, and connector integrations, all manageable via a powerful Admin Studio.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Admin Studio: Test prompts, replay executions, and inspect correlation traces visually.</li> <li>Provider Abstraction: Switch between OpenAI, Anthropic, or local LLMs with zero code changes.</li> <li>RAG Pipeline: Built-in document ingestion, chunking, and vector store abstraction.</li> <li>Connectors: Secure integrations with Slack, Webhooks, and more, using strictly typed specs.</li> <li>Observability: Structured JSON logging, metrics, and OpenTelemetry tracing out of the box.</li> </ul>"},{"location":"#getting-started","title":"getting Started","text":"<p>Check out the Quickstart to build your first automation in 10 minutes.</p>"},{"location":"00_index/","title":"Welcome to Django Automate","text":"<p>Django Automate separates the Control Plane (defining what should happen) from the Execution Plane (ensuring it actually happens).</p>"},{"location":"00_index/#core-guarantees","title":"Core Guarantees","text":"<ul> <li>Idempotency Intent: We use <code>idempotency_keys</code> to ensure that even if an event is replayed, the side-effects happen \"practically once\". policy.</li> <li>Audit: Every action is effectively immutable and logged.</li> <li>Policy &amp; Governance: Secret redaction and budget limits are enforced at the runtime level, not just the UI level.</li> <li>Traceability: A <code>trace_id</code> flows from the inbound webhook -&gt; event -&gt; rule -&gt; workflow -&gt; connector -&gt; external system.</li> </ul>"},{"location":"00_index/#conventions","title":"Conventions","text":""},{"location":"00_index/#versioning-compatibility","title":"Versioning &amp; Compatibility","text":"<ul> <li>SemVer: We follow Semantic Versioning <code>MAJOR.MINOR.PATCH</code>.</li> <li>Python: 3.10, 3.11, 3.12+</li> <li>Django: 4.2 (LTS), 5.0+</li> <li>DRF: 3.14+</li> <li>Databases:<ul> <li>Postgres: Recommended (Required for <code>SKIP LOCKED</code> high-throughput).</li> <li>MySQL 8+: Supported (No JSON index optimizations).</li> <li>SQLite: Dev/Test only.</li> </ul> </li> </ul>"},{"location":"00_index/#glossary","title":"Glossary","text":"Term Definition Event An immutable record of a signal, webhook, or schedule tick. Contains a raw payload. RuleSpec A JSON-based logic definition (predicates) used to match Events to Workflows. WorkflowVersion An immutable snapshot of a workflow definition. Executions are pinned to a specific version. OutboxJob A transactional record representing the intent to process an Event. Guarantees reliability. ExecutionRun The state machine instance processing a WorkflowVersion for a specific Event. StepRun A single unit of work within a Run (e.g., \"Post to Slack\"). TraceId A UUID connecting the chain of events across distributed systems. SecretRef A pointer string (e.g., <code>$secret:STRIPE_KEY</code>) resolved at runtime to a secure value."},{"location":"00_index/#error-format-contract","title":"Error Format Contract","text":"<p>All API errors follow the <code>NormalizedError</code> shape:</p> <pre><code>{\n  \"code\": \"resource_not_found\",\n  \"message\": \"Workflow with ID 123 does not exist.\",\n  \"details\": { \"id\": \"123\" },\n  \"trace_id\": \"aa-bb-cc-dd\"\n}\n</code></pre>"},{"location":"00_index/#data-redaction","title":"Data Redaction","text":"<ul> <li>Safe Payloads: Logs and UI displays automatically redact values mirroring keys like <code>password</code>, <code>token</code>, <code>key</code>, <code>authorization</code>.</li> <li>Raw Payloads: Accessing the raw, unredacted payload requires specific <code>view_raw_payload</code> permission in Admin.</li> </ul>"},{"location":"00_index/#pagination","title":"Pagination","text":"<p>Cursor-based pagination is used for high-volume endpoints (Events, Runs). <code>?cursor=cD0yMDIz&amp;limit=50</code></p>"},{"location":"01_quickstart/","title":"Getting Started with Django Automate","text":"<p>Django Automate is a production-grade workflow automation platform for Django. It provides a control plane (Studio) and execution plane (Rules Engine, Outbox) to build reliable, auditable, and secure automation workflows.</p>"},{"location":"01_quickstart/#what-is-it","title":"What is it?","text":"<p>Think of it as \"Zapier inside your Django app\", but built for developers who need: *   Idempotency: Guaranteed exactly-once processing intent. *   Audit Trails: Every action, rule check, and external call is logged. *   Security: Secret redaction, policy engines, and execution sandboxing. *   Observability: OpenTelemetry-compatible tracing and structured logging.</p>"},{"location":"01_quickstart/#compatibility","title":"Compatibility","text":"<ul> <li>Python: 3.10+</li> <li>Django: 4.2+</li> <li>Databases: Postgres (Recommended), SQLite (Dev), MySQL 8+</li> </ul>"},{"location":"01_quickstart/#5-minute-quickstart","title":"5-Minute Quickstart","text":""},{"location":"01_quickstart/#1-installation","title":"1. Installation","text":"<p>Install the package:</p> <pre><code>pip install django-automate\n</code></pre> <p>Add to <code>INSTALLED_APPS</code> in your <code>settings.py</code>:</p> <pre><code>INSTALLED_APPS = [\n    # ... django apps ...\n    'automate', \n    'automate_core',\n    'automate_governance',\n    'automate_llm',\n    'automate_studio', # Optional: Admin UI\n    'automate_observability',\n    'rest_framework',\n]\n</code></pre>"},{"location":"01_quickstart/#2-minimal-configuration","title":"2. Minimal Configuration","text":"<p>Set the basic configuration in <code>settings.py</code>:</p> <pre><code>DJANGO_AUTOMATE = {\n    \"ENABLED\": True,\n    \"SECRET_KEY_PREFIX\": \"AUTOMATE_\", # For env-based secrets\n    \"EXECUTION\": {\n        \"timeout_seconds\": 60,\n        \"max_retries\": 3,\n    }\n}\n</code></pre> <p>Run migrations:</p> <pre><code>python manage.py migrate\n</code></pre>"},{"location":"01_quickstart/#3-create-your-first-workflow","title":"3. Create Your First Workflow","text":"<p>You can define workflows via code (JSON) or the Visual Studio. Let's create a simple JSON workflow that logs a message when a user is created.</p> <p>Go to <code>http://localhost:8000/studio/wizard/</code> (if running locally) or define it programmatically:</p> <pre><code>from automate_core.models import Workflow\n\nWorkflow.objects.create(\n    name=\"Welcome New User\",\n    trigger_spec={\n        \"type\": \"signal\",\n        \"config\": {\n            \"model\": \"auth.User\",\n            \"signal\": \"post_save\",\n            \"condition\": \"created == true\"\n        }\n    },\n    steps=[\n        {\n            \"id\": \"log_action\",\n            \"action\": \"core.log\",\n            \"config\": {\n                \"level\": \"INFO\",\n                \"message\": \"New user registered: {{ event.instance.username }}\"\n            }\n        }\n    ]\n)\n</code></pre>"},{"location":"01_quickstart/#4-run-the-worker","title":"4. Run the Worker","text":"<p>In development, you can run the simplified management command worker:</p> <pre><code>python manage.py automate_worker\n</code></pre> <p>Trigger the workflow by creating a new User in Django Admin. You should see the log output in your worker console.</p>"},{"location":"01_quickstart/#5-inspect-the-run","title":"5. Inspect the Run","text":"<p>Visit the Execution Explorer at <code>http://localhost:8000/studio/explorer/</code> to see the timeline of your execution, verify inputs/outputs, and check audit logs.</p>"},{"location":"02_concepts/","title":"Core Concepts","text":"<p>Understanding the mental model of Django Automate: Event \u2192 Rule \u2192 Workflow \u2192 Execution.</p>"},{"location":"02_concepts/#the-automation-pipeline","title":"The Automation Pipeline","text":"<ol> <li>Event: Something happens (Signal, Webhook, Schedule). It is immutable and contains a payload (e.g., JSON body, model instance data).</li> <li>Rule Match: The Rules Engine evaluates the event against active RuleSpecs. Complex logic (JSONLogic) determines if a workflow should trigger.</li> <li>Workflow Version: Workflows are versioned. An execution is tied to a specific snapshot of a workflow definition, ensuring consistency even if the workflow is edited mid-run.</li> <li>Execution Run: An instance of a workflow running for a specific event. Contains a globally unique <code>trace_id</code>.</li> <li>Steps: Individual units of work (Actions). Steps are executed sequentially (or parallel/fan-out in advanced configs).</li> </ol>"},{"location":"02_concepts/#key-guarantees","title":"Key Guarantees","text":""},{"location":"02_concepts/#idempotency-once-ish-execution","title":"Idempotency &amp; \"Once-ish\" Execution","text":"<p>The system uses <code>idempotency_keys</code> for every execution. If the same webhook payload arrives twice (with the same ID), the second one is practically ignored or attached to the existing run, preventing duplicate side effects (like charging a card twice).</p>"},{"location":"02_concepts/#reliability-the-outbox-pattern","title":"Reliability (The Outbox Pattern)","text":"<p>We do not execute side effects immediately in the HTTP request loop. 1.  Commit Phase: The event and intent-to-run are saved to the Outbox (DB). 2.  Async Phase: A reliable worker (Celery or Management Command) claims the outbox item via a locking mechanism (<code>SKIP LOCKED</code> on Postgres). 3.  Retry Phase: If a step fails, it is retried with exponential backoff based on the policy. Dead Letter Queues (DLQ) capture permanent failures.</p>"},{"location":"02_concepts/#security-model","title":"Security Model","text":""},{"location":"02_concepts/#secretrefs","title":"SecretRefs","text":"<p>NEVER store API keys in workflow definitions. Use <code>SecretRef</code>:</p> <pre><code>{\n    \"api_key\": {\"$secret\": \"STRIPE_LIVE_KEY\"}\n}\n</code></pre> <p>The Governance Layer resolves this at runtime using configured Backends (Env, Vault, Encrypted DB).</p>"},{"location":"02_concepts/#redaction","title":"Redaction","text":"<p>The Audit Log automatically redacts values that look like sensitive keys or PII before saving to the database, ensuring your logs don't leak secrets.</p>"},{"location":"02_concepts/#policy-engine","title":"Policy Engine","text":"<p>Administrators can define global policies: *   Budget: Max $5.00/day on LLM calls. *   Rate Limits: Max 100 webhooks/minute per tenant. *   Allowlists: Only allow HTTP calls to <code>*.stripe.com</code>.</p>"},{"location":"03_tutorials/","title":"Tutorials","text":"<p>Guided walkthroughs to build production workflows.</p>"},{"location":"03_tutorials/#1-trigger-model-signals","title":"1. Trigger: Model Signals","text":"<p>Goal: Send a Welcome Email when a <code>User</code> model is created.</p> <ol> <li>Define Trigger:     <code>json     {       \"type\": \"signal\",       \"config\": {         \"model\": \"auth.User\",         \"signal\": \"post_save\",         \"condition\": \"created == true\" // Only on create, not update       }     }</code></li> <li>Add Action: Use the <code>smtp.send</code> or <code>http.post</code> connector (e.g., to SendGrid).     <code>json     {       \"action\": \"http.post\",       \"config\": {         \"url\": \"https://api.sendgrid.com/v3/mail/send\",         \"headers\": {             \"Authorization\": \"Bearer {{$secret.SENDGRID_KEY}}\"         },         \"json\": {             \"personalizations\": [{\"to\": [{\"email\": \"{{event.instance.email}}\"}]}],             \"subject\": \"Welcome!\"         }       }     }</code></li> </ol>"},{"location":"03_tutorials/#2-trigger-inbound-webhook-stripe","title":"2. Trigger: Inbound Webhook (Stripe)","text":"<p>Goal: Provision access when a <code>checkout.session.completed</code> webhook arrives.</p> <ol> <li>Configure Ingestion:     Set up a generic webhook endpoint <code>/api/automate/webhooks/stripe/</code>.     Configure signature verification middleware in <code>settings.py</code>.</li> <li>Define Rule:     <code>json     {       \"and\": [         { \"==\": [{ \"var\": \"type\" }, \"checkout.session.completed\"] },         { \"==\": [{ \"var\": \"data.object.payment_status\" }, \"paid\"] }       ]     }</code></li> <li>Add Action: Call your internal API to provision access.</li> </ol>"},{"location":"03_tutorials/#3-human-in-the-loop-approval","title":"3. Human-in-the-loop Approval","text":"<p>Goal: Require admin approval for refunds &gt; $500.</p> <ol> <li>Step 1: Check value.     <code>json     { \"if\": [ { \"&gt;\": [{ \"var\": \"amount\" }, 500] }, \"needs_review\", \"auto_approve\" ] }</code></li> <li>Step 2 (Branch: needs_review): Send Slack notification with \"Approve\" button.</li> <li>Step 3: <code>core.wait_for_signal</code> (Pause execution).     The workflow suspends until a specific callback signal is received from the Slack interaction.</li> <li>Step 4: Process Refund.</li> </ol>"},{"location":"03_tutorials/#4-llm-chaining","title":"4. LLM Chaining","text":"<p>Goal: Summarize support ticket and suggest reply.</p> <ol> <li>Step 1: <code>llm.chat</code>.<ul> <li>Prompt: \"Summarize this ticket: {{event.payload.description}}\"</li> <li>Model: <code>gpt-4o</code></li> </ul> </li> <li>Step 2: <code>llm.chat</code>.<ul> <li>Prompt: \"Draft a polite reply based on this summary: {{step.1.output.text}}\"</li> <li>JSON Schema: Enforce output structure <code>{\"subject\": \"...\", \"body\": \"...\"}</code>.</li> </ul> </li> <li>Step 3: Save draft to Zendesk/Freshdesk via HTTP.</li> </ol>"},{"location":"04_how_to_guides/","title":"How-To Guides","text":"<p>Task-oriented guides for common operations.</p>"},{"location":"04_how_to_guides/#authoring-workflows","title":"Authoring Workflows","text":""},{"location":"04_how_to_guides/#using-the-visual-studio","title":"Using the Visual Studio","text":"<ol> <li>Navigate to <code>/studio/wizard/</code>.</li> <li>Drafting: Use the AI Copilot (\"When a high value order comes in...\") to generate a skeleton.</li> <li>Refining: Drag nodes to rearrange. Click a node to edit its JSON config properties.</li> <li>Testing: Use the Rule Tester tab to verify your logic conditions against sample JSON payloads.</li> <li>Publishing: Click \"Publish\". This creates a new active version of the workflow.</li> </ol>"},{"location":"04_how_to_guides/#using-json-code-first","title":"Using JSON (Code-First)","text":"<p>Recommended for version-controlled workflows. Define your workflow in a JSON file and load it via management command:</p> <pre><code>python manage.py automate_import --file workflows/order_flow.json\n</code></pre>"},{"location":"04_how_to_guides/#secrets-management","title":"Secrets Management","text":""},{"location":"04_how_to_guides/#rotating-secrets","title":"Rotating Secrets","text":"<ol> <li>Env Backend: Update your environment variable (e.g., <code>AUTOMATE_STRIPE_KEY_V2</code>) and update the <code>SecretRef</code> in your workflow to point to the new key.</li> <li>DB Backend: Go to Admin &gt; Governance &gt; Stored Secrets. Use the \"Rotate Secret\" action to securely update the value without changing the reference key used in workflows.</li> </ol>"},{"location":"04_how_to_guides/#masking-in-admin","title":"Masking in Admin","text":"<p>The Studio automatically masks secret values in the UI (showing <code>********</code>). Never hardcode secrets in the \"Config\" JSON fields. Always use <code>{\"$secret\": \"KEY_NAME\"}</code>.</p>"},{"location":"04_how_to_guides/#building-custom-connectors","title":"Building Custom Connectors","text":"<p>To add a proprietary internal system (e.g., \"Legacy ERP\"):</p>"},{"location":"04_how_to_guides/#1-the-adapter-definition","title":"1. The Adapter Definition","text":"<p>Create a class inheriting from <code>ConnectorAdapter</code>.</p> <pre><code># my_app/adapters.py\nfrom automate_connectors.adapters.base import ConnectorAdapter\nfrom automate_connectors.models import ActionSpec, ConnectorError\n\nclass LegacyERPAdapter(ConnectorAdapter):\n    code = \"legacy_erp\"\n    name = \"Legacy ERP System\"\n    description = \"Integration with the on-prem SOAP ERP.\"\n\n    # Define the inputs/outputs for the UI\n    actions = {\n        \"create_order\": ActionSpec(\n            inputs={\n                \"customer_id\": {\"type\": \"string\", \"required\": True},\n                \"items\": {\"type\": \"array\", \"required\": True}\n            },\n            outputs={\n                \"order_id\": {\"type\": \"string\"}\n            }\n        )\n    }\n\n    def execute(self, action: str, params: dict, context: dict):\n        if action == \"create_order\":\n            try:\n                # context['secrets'] is automatically populated based on SecretRefs\n                api_key = context['secrets'].get('API_KEY')\n\n                result = self._soap_client.create_order(\n                    key=api_key, \n                    **params\n                )\n                return {\"order_id\": result.id}\n            except Exception as e:\n                # Wrap unknowns in NormalizedError\n                raise ConnectorError(f\"ERP Failed: {str(e)}\", retryable=True)\n\n        raise NotImplementedError(f\"Action {action} unknown\")\n</code></pre>"},{"location":"04_how_to_guides/#2-registration","title":"2. Registration","text":"<p>Register specific adapters in your <code>AppConfig</code> or via <code>entry_points</code>.</p> <p>Method A: AppConfig</p> <pre><code>from django.apps import AppConfig\nfrom automate_connectors.registry import register\n\nclass MyAppConfig(AppConfig):\n    def ready(self):\n        from .adapters import LegacyERPAdapter\n        register(LegacyERPAdapter)\n</code></pre> <p>Method B: Decorator</p> <pre><code>from automate_connectors.registry import register_connector\n\n@register_connector\nclass LegacyERPAdapter...\n</code></pre>"},{"location":"04_how_to_guides/#operations","title":"Operations","text":""},{"location":"04_how_to_guides/#tuning-throughput","title":"Tuning Throughput","text":"<p>If your worker is lagging: 1.  Increase Concurrency: Run more worker processes. 2.  Batch Size: Increase <code>EXECUTION_BATCH_SIZE</code> in settings (Default: 10). 3.  DB Optimization: Ensure you are using Postgres and <code>SKIP LOCKED</code> is enabled (Automatic on supported DBs).</p>"},{"location":"04_how_to_guides/#debugging-failures","title":"Debugging Failures","text":"<ol> <li>Go to Execution Explorer.</li> <li>Find the Failed run (Red status).</li> <li>Click the failed Step.</li> <li>View the Output/Error payload. It will contain the stack trace or error message provided by the connector.</li> <li>Check the Audit Log link for the exact timestamp and context of the failure.</li> </ol>"},{"location":"05_reference/","title":"Reference","text":""},{"location":"05_reference/#1-configuration-settingspy","title":"1. Configuration (<code>settings.py</code>)","text":"<p>All configuration lives in the <code>DJANGO_AUTOMATE</code> dictionary.</p>"},{"location":"05_reference/#core-runtime","title":"Core &amp; Runtime","text":"Setting Type Default Description <code>ENABLED</code> <code>bool</code> <code>True</code> Master kill-switch for the automation system. <code>WORKER_MODE</code> <code>str</code> <code>\"thread\"</code> <code>\"thread\"</code>, <code>\"process\"</code>, or <code>\"synchronous\"</code> (dev). <code>EXECUTION.timeout_seconds</code> <code>int</code> <code>60</code> Max duration for a single step execution. <code>EXECUTION.max_retries</code> <code>int</code> <code>3</code> Default retry count for transient failures. <code>EXECUTION.batch_size</code> <code>int</code> <code>10</code> Number of items <code>automate_worker</code> claims at once."},{"location":"05_reference/#policies-governance","title":"Policies &amp; Governance","text":"Setting Type Default Description <code>POLICY.allow_ssrf</code> <code>bool</code> <code>False</code> If False, blocks HTTP calls to private IPs (e.g. <code>10.0.0.0/8</code>). <code>POLICY.connector_allowlist</code> <code>list</code> <code>[\"*\"]</code> List of allowed Connector codes. <code>POLICY.llm_budget_daily</code> <code>float</code> <code>10.00</code> Hard cap on LLM spend per day (USD)."},{"location":"05_reference/#secrets","title":"Secrets","text":"Setting Type Default Description <code>SECRETS.backend</code> <code>str</code> <code>\"env\"</code> <code>\"env\"</code>, <code>\"db\"</code>, or dotted path to custom backend. <code>SECRETS.prefix</code> <code>str</code> <code>\"AUTOMATE_\"</code> Prefix for environment variable discovery."},{"location":"05_reference/#observability","title":"Observability","text":"Setting Type Default Description <code>LOGGING_SCHEMA</code> <code>str</code> <code>\"ecs\"</code> <code>\"ecs\"</code> (Elastic) or <code>\"simple\"</code>. <code>METRICS_EXPORT</code> <code>bool</code> <code>False</code> Enable Prometheus metrics endpoint."},{"location":"05_reference/#2-python-api-reference","title":"2. Python API Reference","text":"<p>Stable surface for integrating Automate into your Python code.</p>"},{"location":"05_reference/#core-runtime_1","title":"Core Runtime","text":"<pre><code>from automate.runtime import emit_event, run_workflow\n\ndef emit_event(type: str, payload: dict, dedupe_key: str = None) -&gt; str:\n    \"\"\"\n    Ingest an event into the Outbox. \n    Returns: Event ID (UUID).\n    \"\"\"\n\ndef run_workflow(workflow_slug: str, payload: dict):\n    \"\"\"\n    Directly invoke a named workflow (Bypasses Rules Engine).\n    \"\"\"\n</code></pre>"},{"location":"05_reference/#rules-engine","title":"Rules Engine","text":"<pre><code>from automate.rules import evaluate, explain\n\ndef evaluate(rule_spec: dict, context: dict) -&gt; bool:\n    \"\"\"Returns True if context matches rules.\"\"\"\n\ndef explain(rule_spec: dict, context: dict) -&gt; dict:\n    \"\"\"Returns a tree showing exactly which conditions passed/failed.\"\"\"\n</code></pre>"},{"location":"05_reference/#secrets-redaction","title":"Secrets &amp; Redaction","text":"<pre><code>from automate.secrets import resolve, redact\n\ndef resolve(ref: str) -&gt; str:\n    \"\"\"Resolves a $secret:REF string.\"\"\"\n\ndef redact(data: Any) -&gt; Any:\n    \"\"\"Recursively redacts sensitive keys from a dictionary.\"\"\"\n</code></pre>"},{"location":"05_reference/#3-data-model-reference","title":"3. Data Model Reference","text":""},{"location":"05_reference/#event","title":"<code>Event</code>","text":"<ul> <li>Purpose: Immutable log of inputs.</li> <li>Fields: <code>id</code> (UUID), <code>type</code> (Index), <code>payload</code> (JSONB), <code>source</code> (String).</li> <li>Retention: High volume. Recommend partitioning by month.</li> </ul>"},{"location":"05_reference/#workflowversion","title":"<code>WorkflowVersion</code>","text":"<ul> <li>Purpose: Immutable snapshot of logic.</li> <li>Fields: <code>workflow_id</code> (FK), <code>trigger_spec</code>, <code>steps</code> (JSONB), <code>version_num</code>.</li> <li>Note: Executions FK to this, not the parent Workflow.</li> </ul>"},{"location":"05_reference/#outboxjob","title":"<code>OutboxJob</code>","text":"<ul> <li>Purpose: Reliability queue.</li> <li>Fields: <code>status</code> (PENDING, CLAIMED, COMPLETED), <code>lease_expires_at</code>, <code>attempts</code>.</li> <li>Indexes: <code>(status, id)</code> for claim queries.</li> </ul>"},{"location":"05_reference/#executionrun","title":"<code>ExecutionRun</code>","text":"<ul> <li>Purpose: State machine tracker.</li> <li>Fields: <code>trace_id</code> (Index), <code>status</code>, <code>outputs</code> (JSONB - Redacted).</li> </ul>"},{"location":"05_reference/#auditlogentry","title":"<code>AuditLogEntry</code>","text":"<ul> <li>Purpose: Compliance &amp; Security history.</li> <li>Fields: <code>actor</code>, <code>action</code>, <code>resource</code>, <code>details</code>.</li> <li>Security: <code>details</code> is strictly redacted before write.</li> </ul>"},{"location":"06_extending/","title":"Extending Django Automate","text":"<p>The platform is designed as a modular core. Almost every component (Connectors, Secrets, LLMs) is a plugin.</p>"},{"location":"06_extending/#1-plugin-registry","title":"1. Plugin Registry","text":"<p>We use Python <code>entry_points</code> to discover plugins.</p> <p><code>pyproject.toml</code>:</p> <pre><code>[project.entry-points.\"django_automate.connectors\"]\nmy_erp = \"my_app.adapters:MyERPAdapter\"\n\n[project.entry-points.\"django_automate.secrets.backends\"]\nvault = \"my_app.secrets:HashiCorpVaultBackend\"\n</code></pre>"},{"location":"06_extending/#2-core-contracts","title":"2. Core Contracts","text":""},{"location":"06_extending/#connectors-connectoradapter","title":"Connectors (<code>ConnectorAdapter</code>)","text":"<p>Located in <code>automate_connectors.adapters.base</code>.</p> <pre><code>class ConnectorAdapter(ABC):\n    code: str  # Unique identifier\n    name: str  # Human readable label\n\n    @abstractmethod\n    def execute(self, action: str, params: dict, context: dict) -&gt; Any:\n        \"\"\"\n        Execute the side effect.\n        Must raise ConnectorError on failure.\n        \"\"\"\n\n    def validate_config(self, config: dict):\n        \"\"\"Optional: Validate setup configuration.\"\"\"\n</code></pre>"},{"location":"06_extending/#secrets-secretsbackend","title":"Secrets (<code>SecretsBackend</code>)","text":"<p>Located in <code>automate_governance.secrets.interfaces</code>.</p> <pre><code>class SecretsBackend(ABC):\n    @abstractmethod\n    def get_secret(self, key: str) -&gt; str:\n        \"\"\"\n        Return the raw secret value.\n        Raise SecretNotFoundError if missing.\n        \"\"\"\n</code></pre>"},{"location":"06_extending/#llm-providers-llmprovider","title":"LLM Providers (<code>LLMProvider</code>)","text":"<p>Located in <code>automate_llm.providers.base</code>.</p> <pre><code>class LLMProvider(ABC):\n    @abstractmethod\n    def chat(self, messages: list, options: dict) -&gt; str:\n        \"\"\"\n        Synchronous chat completion.\n        \"\"\"\n\n    @abstractmethod\n    def count_tokens(self, text: str) -&gt; int:\n        \"\"\"Estimate token usage.\"\"\"\n</code></pre>"},{"location":"06_extending/#3-testing-your-plugins","title":"3. Testing Your Plugins","text":"<p>We ship with Contract Tests to ensure your plugin behaves correctly.</p> <p>Testing a Connector:</p> <pre><code>from automate_testing.contracts import ConnectorContractTest\nfrom my_app.adapters import MyERPAdapter\n\nclass TestMyERP(ConnectorContractTest):\n    adapter_cls = MyERPAdapter\n\n    def test_execute_success(self):\n        # Your specific test logic\n        pass\n</code></pre>"},{"location":"06_extending/#4-internals-walkthrough","title":"4. Internals Walkthrough","text":""},{"location":"06_extending/#code-path-webhook-ingestion","title":"Code Path: Webhook Ingestion","text":"<ol> <li>View: <code>WebhookView</code> verifies signature.</li> <li>Ingestor: <code>EventIngestor.ingest()</code> wraps creation in a transaction.</li> <li>Outbox: An <code>Event</code> row and an <code>OutboxJob</code> row are inserted atomically.</li> <li>Response: Returns <code>202 Accepted</code> + <code>trace_id</code>.</li> </ol>"},{"location":"06_extending/#code-path-the-worker-loop","title":"Code Path: The Worker Loop","text":"<ol> <li>Claim: <code>OutboxStore.claim_batch(limit=10)</code> runs <code>SELECT ... FOR UPDATE SKIP LOCKED</code>.</li> <li>Dispatch: Logic is handed to <code>ExecutionEngine</code>.</li> <li>Match: <code>RuleEngine</code> finds active Workflows for the Event.</li> <li>Run: <code>ExecutionRun</code> created.<ul> <li>Iterates steps.</li> <li>Resolves inputs (Jinja2).</li> <li>Calls <code>Connector.execute()</code>.</li> </ul> </li> <li>Commit: Updates <code>OutboxJob</code> status to <code>COMPLETED</code>.</li> </ol>"},{"location":"07_admin_studio/","title":"Admin Studio Guide","text":"<p>The Studio provides a visual interface for the Control Plane.</p>"},{"location":"07_admin_studio/#navigation-map","title":"Navigation Map","text":"<ol> <li>Automation Wizard (<code>/studio/wizard/</code>):<ul> <li>Purpose: Authoring workflows visually.</li> <li>Key Features: Drag-and-drop canvas, AI Copilot, Component Palette.</li> </ul> </li> <li>Rule Tester (<code>/studio/tester/</code>):<ul> <li>Purpose: \"Unit testing\" logic. Used to verify JSON rules against sample events.</li> <li>Output: An \"Explain Tree\" showing exactly which predicate matched or failed.</li> </ul> </li> <li>Execution Explorer (<code>/studio/explorer/</code>):<ul> <li>Purpose: Operational visibility.</li> <li>Features: Timeline view of steps, input/output inspection (redacted).</li> </ul> </li> <li>Governance:<ul> <li>Stored Secrets: Manage encrypted secrets (if DB backend used).</li> <li>Audit Log: Immutable history of all changes.</li> </ul> </li> </ol>"},{"location":"07_admin_studio/#permissions-matrix","title":"Permissions Matrix","text":"Permission Description <code>automate.view_studio</code> Access to the Studio dashboard. <code>automate.publish_workflow</code> Ability to create/update live workflows. <code>automate.view_raw_payload</code> SENSITIVE: Allows viewing unredacted JSON inputs in Explorer. <code>automate.manage_secrets</code> Ability to rotate or create stored secrets."},{"location":"07_admin_studio/#workflow-lifecycle","title":"Workflow Lifecycle","text":"<ol> <li>Draft: Workflows in the Wizard start as client-side drafts.</li> <li>Publish: Clicking \"Publish\" creates a persistent <code>Workflow</code> record and an active <code>WorkflowVersion</code>.</li> <li>Archive: Deleting a workflow sets <code>is_active=False</code> but keeps history.</li> </ol>"},{"location":"08_observability_security/","title":"Observability &amp; Security","text":""},{"location":"08_observability_security/#observability","title":"Observability","text":""},{"location":"08_observability_security/#structured-logging","title":"Structured Logging","text":"<p>We use a JSON log formatter compatible with ECS (Elastic Common Schema).</p> <p>Schema:</p> <pre><code>{\n  \"@timestamp\": \"2023-10-01T12:00:00Z\",\n  \"log.level\": \"INFO\",\n  \"message\": \"Step executed successfully\",\n  \"trace.id\": \"abc-123-xyz\",\n  \"transaction.id\": \"run-999\",\n  \"automate\": {\n    \"workflow\": \"welcome_email\",\n    \"step\": \"send_email\",\n    \"component\": \"connector\"\n  }\n}\n</code></pre>"},{"location":"08_observability_security/#trace-propagation","title":"Trace Propagation","text":"<ul> <li>Ingress: We look for <code>X-Trace-Id</code> headers on incoming webhooks.</li> <li>Internal: <code>trace_id</code> is passed to the <code>OutboxJob</code> and then to the <code>ExecutionRun</code>.</li> <li>Egress: Connectors inject <code>X-Trace-Id</code> into outgoing HTTP requests (if supported), allowing end-to-end tracing across services.</li> </ul>"},{"location":"08_observability_security/#audit-logs","title":"Audit Logs","text":"<p>Accessed via Admin. Every modification to a workflow, secret, or policy is recorded. *   Retention: Rows are never deleted by the application. Configure a DB retention policy if needed.</p>"},{"location":"08_observability_security/#security-deep-dive","title":"Security Deep Dive","text":""},{"location":"08_observability_security/#threat-model-ssrf","title":"Threat Model: SSRF","text":"<p>Risk: Users configuring HTTP Connectors to hit internal AWS endpoints (e.g., <code>http://169.254.169.254/latest/meta-data</code>). Mitigation: <code>POLICY.allow_ssrf</code> defaults to <code>False</code>. The HTTP connector resolves DNS and checks against private IP ranges before connecting.</p>"},{"location":"08_observability_security/#threat-model-secret-leakage","title":"Threat Model: Secret Leakage","text":"<p>Risk: A user prints a secret to the logs: <code>{{ $secret.API_KEY }}</code>. Mitigation: 1.  Redaction Engine: The <code>SecretResolver</code> registers all loaded values. 2.  Log Filter: A logging filter scans all distinct log messages for these known secret values and replaces them with <code>[REDACTED]</code>.</p>"},{"location":"08_observability_security/#webhook-verification","title":"Webhook Verification","text":"<p>Pattern: Do not blindly trust <code>POST</code> requests. 1.  Configure <code>AUTOMATE_WEBHOOK_SECRETS = {\"stripe\": \"whsec_...\"}</code>. 2.  The <code>WebhookView</code> calculates HMAC-SHA256 signature. 3.  Requests with invalid signatures are rejected 401 before ingestion.</p>"},{"location":"09_changelog/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p>"},{"location":"09_changelog/#110-2025-12-25","title":"[1.1.0] - 2025-12-25","text":""},{"location":"09_changelog/#added","title":"Added","text":"<ul> <li>DataChat MCP Integration: Chat now supports calling external MCP tools alongside SQL queries</li> <li>Comprehensive Table Registration: All 44+ project models registered in DataChatRegistry</li> <li>Customization Guide: New docs covering admin, developer, and API integration patterns</li> <li>automate_api: Full REST API v1 with authentication, pagination, and throttling</li> <li>automate_observability: Structured logging, metrics, and OpenTelemetry tracing</li> <li>automate_rag: V2 RAG subsystem with Corpus, Document, and Chunk models</li> <li>Provider Architecture: New provider registry with entrypoint discovery</li> <li>OpenAI Provider: Production-ready OpenAI chat provider implementation</li> </ul>"},{"location":"09_changelog/#fixed","title":"Fixed","text":"<ul> <li>MCP tool sync admin action now correctly unpacks 3-tuple return value</li> <li>DataChat prompt template includes MCP tool instructions</li> <li>Studio template paths corrected to <code>admin/automate/studio/</code></li> <li>Admin index.html uses <code>{% url %}</code> tags instead of hardcoded paths</li> <li><code>tests/settings.py</code> now loads <code>.env</code> via <code>python-dotenv</code></li> <li>Database changed from <code>:memory:</code> to file-based for persistence</li> </ul>"},{"location":"09_changelog/#changed","title":"Changed","text":"<ul> <li><code>automate_studio</code> moved to top of INSTALLED_APPS for template precedence</li> <li>All Studio views now require <code>staff_member_required</code></li> <li><code>automate_datachat</code> re-enabled in INSTALLED_APPS</li> </ul>"},{"location":"09_changelog/#documentation","title":"Documentation","text":"<ul> <li>Added <code>guides/customization.md</code> - comprehensive customization guide</li> <li>Updated <code>features/datachat.md</code> with registration examples</li> <li>Restored full README with architecture diagram and use cases</li> <li>Added DataChat table registration docs in apps.py docstring</li> </ul>"},{"location":"09_changelog/#100-2025-12-23","title":"[1.0.0] - 2025-12-23","text":""},{"location":"09_changelog/#features","title":"Features","text":"<ul> <li>Studio: Visual Automation Wizard, Rule Tester, Execution Explorer</li> <li>Core: Reliable Outbox worker, Signal/Webhook triggers</li> <li>Governance: SecretRef system, Audit Logging, Policy Engine</li> <li>LLM: Gateway with OpenAI/Anthropic support and Jinja2 sandboxing</li> <li>Observability: Structured logging and Trace ID propagation</li> </ul>"},{"location":"09_changelog/#compatibility","title":"Compatibility","text":"<ul> <li>Django 4.2 / 5.0 / 6.0</li> <li>Python 3.10+</li> </ul>"},{"location":"09_deployment/","title":"Operations &amp; Deployment","text":"<p>Checklist for going to production.</p>"},{"location":"09_deployment/#production-checklist","title":"Production Checklist","text":""},{"location":"09_deployment/#1-database","title":"1. Database","text":"<ul> <li>[ ] Postgres 12+: Strongly recommended for <code>SKIP LOCKED</code> support and JSONB performance.</li> <li>[ ] Connections: Ensure your connection pool (PgBouncer) handles the worker threads.</li> </ul>"},{"location":"09_deployment/#2-worker-topology","title":"2. Worker Topology","text":"<ul> <li>[ ] Process Isolation: Run workers separately from your Web/API nodes.</li> <li>[ ] Scale: Start with 1 process per CPU core. Monitor CPU and Memory.</li> <li>[ ] Queues: If using Celery, configure a dedicated high-priority queue for <code>automate</code> tasks.</li> </ul>"},{"location":"09_deployment/#3-security-hardening","title":"3. Security Hardening","text":"<ul> <li>[ ] Secrets: Ensure <code>AUTOMATE_SECRET_KEY_PREFIX</code> is set and environment variables are injected securely.</li> <li>[ ] SSRF: If using generic HTTP connectors, configure the <code>ALLOWLIST_HOSTS</code> in settings to prevent calls to internal IPs (e.g., <code>169.254.169.254</code>).</li> <li>[ ] Audit Retention: Configure a cron job to archive/delete <code>AuditLogEntry</code> rows older than X days if table size grows too large.</li> </ul>"},{"location":"09_deployment/#4-observability","title":"4. Observability","text":"<ul> <li>[ ] Logs: Configure the <code>JsonFormatter</code> to pipe structured logs to your ELK/Datadog stack.</li> <li>[ ] Trace IDs: Ensure your load balancer passes <code>X-Trace-Id</code> headers so they propagate through the workflow.</li> </ul>"},{"location":"09_deployment/#scaling-patterns","title":"Scaling Patterns","text":""},{"location":"09_deployment/#high-throughput-events","title":"High Throughput Events","text":"<p>For high volume (1000+ events/sec): 1.  Sharding: Shard your <code>Outbox</code> table (requires custom engineering support atm). 2.  Batching: Configure triggers to batch events (e.g., process 100 webhook payloads in one workflow run) to reduce overhead. 3.  Rule Indexing: Ensure <code>RuleSpec.index_terms</code> matches your high-cardinality fields (<code>event.type</code>, <code>source_id</code>).</p>"},{"location":"09_deployment/#llm-cost-control","title":"LLM Cost Control","text":"<ul> <li>Caching: Enable caching in <code>LLMProvider</code> settings to avoid re-generating the same prompt.</li> <li>Budgets: Set strict atomic budgets in <code>CostTracker</code> to prevent runaway bills.</li> </ul>"},{"location":"10_examples/","title":"Examples &amp; Templates","text":"<p>Copy-pasteable JSON templates for common workflows.</p>"},{"location":"10_examples/#1-minimal-webhook-logger","title":"1. Minimal Webhook Logger","text":"<p>Use Case: Debugging - log every incoming webhook.</p> <pre><code>{\n  \"name\": \"Debug Webhooks\",\n  \"trigger\": { \"type\": \"webhook\", \"config\": { \"path\": \"*\" } },\n  \"steps\": [\n    {\n      \"action\": \"core.log\",\n      \"config\": {\n        \"level\": \"INFO\",\n        \"message\": \"Received: {{event.payload}}\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"10_examples/#2-customer-tier-alert-slack","title":"2. Customer Tier Alert (Slack)","text":"<p>Use Case: Notify sales when a VIP customer logs in.</p> <pre><code>{\n  \"name\": \"VIP Login Alert\",\n  \"trigger\": {\n    \"type\": \"signal\",\n    \"config\": { \"model\": \"auth.Session\", \"signal\": \"create\" }\n  },\n  \"rules\": {\n    \"==\": [{ \"var\": \"user.profile.tier\" }, \"VIP\"]\n  },\n  \"steps\": [\n    {\n      \"action\": \"slack.post_message\",\n      \"config\": {\n        \"channel\": \"#sales-vip\",\n        \"text\": \"\ud83c\udf1f VIP User {{event.user.email}} just logged in!\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"10_examples/#3-daily-summary-report-cron-llm","title":"3. Daily Summary Report (Cron + LLM)","text":"<p>Use Case: summarize yesterday's errors usage.</p> <pre><code>{\n  \"name\": \"Daily Error Report\",\n  \"trigger\": { \"type\": \"schedule\", \"config\": { \"cron\": \"0 8 * * *\" } },\n  \"steps\": [\n    {\n      \"id\": \"fetch_logs\",\n      \"action\": \"db.query\",\n      \"config\": { \"sql\": \"SELECT * FROM audit_logs WHERE status='FAILED' AND created &gt; NOW() - INTERVAL '1 day'\" }\n    },\n    {\n      \"id\": \"summarize\",\n      \"action\": \"llm.chat\",\n      \"config\": {\n        \"model\": \"gpt-4\",\n        \"prompt\": \"Summarize these errors: {{steps.fetch_logs.output}}\"\n      }\n    },\n    {\n      \"action\": \"email.send\",\n      \"config\": {\n        \"to\": \"dev-team@company.com\",\n        \"subject\": \"Daily Error Summary\",\n        \"body\": \"{{steps.summarize.output.text}}\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"api/","title":"API Reference","text":""},{"location":"api/#endpoints","title":"Endpoints","text":""},{"location":"api/#manual-trigger","title":"Manual Trigger","text":"<p><code>POST /automate/manual</code></p> <p>Trigger an automation manually.</p> <p>Payload:</p> <pre><code>{\n  \"event\": \"event-slug\",\n  \"payload\": { \"foo\": \"bar\" }\n}\n</code></pre>"},{"location":"api/#zapier-triggers","title":"Zapier Triggers","text":"<p><code>GET /automate/zapier/triggers</code></p> <p>List available triggers for Zapier integration.</p>"},{"location":"api/#swagger-ui","title":"Swagger UI","text":"<p>For interactive API documentation, visit: http://127.0.0.1:8000/api/docs/</p>"},{"location":"concepts/","title":"Core Concepts","text":""},{"location":"concepts/#the-pipeline","title":"The Pipeline","text":"<p>Data flows through the system in these stages:</p> <ol> <li>Ingestion: An external system or code sends an <code>Event</code> payload.</li> <li>Outbox: The event is saved transactionally with an <code>Outbox</code> entry (<code>PENDING</code>).</li> <li>Dispatch: The <code>Dispatcher</code> process picks up pending items, resolves matching <code>Automations</code>, creates <code>Execution</code> records, and marks the Outbox item <code>PROCESSED</code>.</li> <li>Execution: The <code>Runtime</code> executes the steps defined in the <code>Workflow</code> graph.</li> </ol>"},{"location":"concepts/#key-models","title":"Key Models","text":"<ul> <li>Event: Immutable record of something happening (<code>type</code>, <code>payload</code>).</li> <li>Outbox: Queue state for an Event (<code>status</code>, <code>attempts</code>, <code>next_attempt_at</code>).</li> <li>Automation: Container for Triggers and Workflows.</li> <li>Workflow: Versioned graph of steps.</li> <li>Execution: A single run of an Automation for an Event.</li> <li>ExecutionStep: Log of a single step's input/output.</li> </ul>"},{"location":"configuration/","title":"Configuration","text":"<p>Configure behavior via <code>settings.py</code>.</p>"},{"location":"configuration/#core","title":"Core","text":"Setting Default Description <code>AUTOMATE_MAX_RETRIES</code> <code>3</code> Max attempts before marking execution DEAD. <code>AUTOMATE_ALLOW_RAW_SECRETS</code> <code>False</code> DEV ONLY. If <code>True</code>, allows secrets in input payloads."},{"location":"configuration/#webhooks-ssrf-protection","title":"Webhooks (SSRF Protection)","text":"Setting Default Description <code>AUTOMATE_WEBHOOK_ALLOWED_HOSTS</code> <code>[]</code> List of allowed hostnames/IPs. Empty = All (except local). <code>AUTOMATE_WEBHOOK_ALLOW_LOCAL</code> <code>False</code> If <code>True</code>, allows localhost/private IP connections."},{"location":"configuration/#redis-optional","title":"Redis (Optional)","text":"<p>Currently used for throttling and lock coordination.</p> <pre><code>AUTOMATE_REDIS_URL = \"redis://localhost:6379/1\"\n</code></pre>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#development-setup","title":"Development Setup","text":"<ol> <li>Clone the repo.</li> <li>Install dependencies: <code>pip install -e \".[dev]\"</code></li> <li>Run tests: <code>pytest</code></li> </ol>"},{"location":"contributing/#release-process","title":"Release Process","text":"<ol> <li>Build wheels: <code>hatch build</code></li> <li>Publish to PyPI.</li> </ol>"},{"location":"features/","title":"Features","text":""},{"location":"features/#secrets-management","title":"Secrets Management","text":"<p>Django Automate uses a pluggable <code>SecretsBackend</code>. By default, <code>EnvSecretsBackend</code> is used.</p> <ul> <li>Storage: Secrets in <code>ConnectionProfile</code> are encrypted (simulated in MVP) and should refer to env vars via <code>env://MY_VAR</code>.</li> <li>Resolution: Connectors resolve these at runtime.</li> <li>Leaking: Inputs are redacted from logs and DB if exceptions occur.</li> </ul>"},{"location":"features/#connectors","title":"Connectors","text":"<p>Built-in connectors include: - Slack: Post messages to channels. - Webhook: Send HTTP requests (with SSRF protection). - n8n: Trigger external n8n workflows (Backend integration).</p>"},{"location":"features/#operability","title":"Operability","text":"<p>Use standard Django management commands:</p> <ul> <li><code>automate_dispatch</code>: Runs the main loop.</li> <li><code>automate_replay_deadletters</code>: Moves DEAD items back to PENDING.</li> <li><code>automate_healthcheck</code>: Shows queue depth.</li> </ul>"},{"location":"governance/","title":"Governance &amp; Safety Layer","text":""},{"location":"governance/#1-secrets-management","title":"1. Secrets Management","text":"<p>The platform uses <code>SecretRef</code> to prevent plaintext secrets in code or database.</p>"},{"location":"governance/#configuring-secrets","title":"Configuring Secrets","text":"<p>In <code>settings.py</code>:</p> <pre><code>AUTOMATE = {\n    \"SECRETS\": {\n        \"DEFAULT_BACKEND\": \"env\",\n        \"BACKENDS\": {\n            \"env\": {\"CLASS\": \"automate_governance.secrets.backends.EnvBackend\"},\n            \"encrypted_db\": {\n                \"CLASS\": \"automate_governance.secrets.backends.EncryptedDBBackend\",\n                \"KMS\": {\"CLASS\": \"automate_governance.secrets.kms.DjangoSigningKMS\"}\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"governance/#usage","title":"Usage","text":"<ul> <li>Admin: Create a <code>ConnectionProfile</code>. In the <code>secrets</code> JSON field, use:   <code>json   {\"api_key\": \"secretref://env/stripe/prod/key\"}</code></li> <li>Code:   <code>python   from automate_governance.secrets.resolver import SecretResolver   resolver = SecretResolver(...)   secret = resolver.resolve_value(\"secretref://...\")</code></li> </ul>"},{"location":"governance/#2-rules-engine","title":"2. Rules Engine","text":"<p>Safe JSONLogic evaluation for Triggers and Policies.</p>"},{"location":"governance/#supported-operators","title":"Supported Operators","text":"<ul> <li><code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>in</code>, <code>contains</code></li> <li>Variables: <code>event.*</code>, <code>ctx.*</code></li> </ul>"},{"location":"governance/#example-rule","title":"Example Rule","text":"<pre><code>{\n  \"and\": [\n    { \"==\": [{ \"var\": \"event.type\" }, \"order.created\"] },\n    { \"&gt;\": [{ \"var\": \"event.payload.amount\" }, 100] }\n  ]\n}\n</code></pre>"},{"location":"governance/#3-reliability-outbox","title":"3. Reliability (Outbox)","text":"<p>Events and Tasks are processed via the DB-backed Outbox. - Workers: Run <code>python manage.py run_worker</code> (future command) or generic dispatcher. - Retries: Exponential backoff (up to 15 attempts default).</p>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10+</li> <li>Django 4.2+ (Testing against 5.0 and 6.0)</li> <li>Redis (Optional, for production backoff/throttling)</li> </ul>"},{"location":"installation/#steps","title":"Steps","text":"<ol> <li>Install Package:     <code>bash     pip install django-automate</code></li> </ol>"},{"location":"installation/#optional-extras","title":"Optional Extras","text":"<p>Install only what you need:</p> Extra Description Command <code>llm-openai</code> OpenAI provider <code>pip install django-automate[llm-openai]</code> <code>llm-anthropic</code> Anthropic provider <code>pip install django-automate[llm-anthropic]</code> <code>rag-milvus</code> Milvus vector store <code>pip install django-automate[rag-milvus]</code> <code>rag-pgvector</code> PostgreSQL pgvector <code>pip install django-automate[rag-pgvector]</code> <code>rag-qdrant</code> Qdrant vector store <code>pip install django-automate[rag-qdrant]</code> <code>observability</code> OpenTelemetry <code>pip install django-automate[observability]</code> <code>full</code> All providers <code>pip install django-automate[full]</code> <p>Combine extras: <code>pip install django-automate[llm-openai,rag-pgvector]</code></p> <ol> <li> <p>Update Settings:     Add to <code>INSTALLED_APPS</code> in <code>settings.py</code>:     <code>python     INSTALLED_APPS = [         # ...         \"automate\",         \"django_json_widget\", # Required for JSON editing in Admin         \"rest_framework\",     # Required for API         \"drf_spectacular\",    # Required for Swagger     ]</code></p> </li> <li> <p>URL Configuration:     Include URLs in <code>urls.py</code>:     ```python     from django.urls import path, include     from drf_spectacular.views import SpectacularAPIView, SpectacularSwaggerView</p> <p>urlpatterns = [     path(\"admin/\", admin.site.urls),     path(\"automate/\", include(\"automate.urls\")),</p> <pre><code># API Documentation\npath(\"api/schema/\", SpectacularAPIView.as_view(), name=\"schema\"),\npath(\"api/docs/\", SpectacularSwaggerView.as_view(url_name=\"schema\"), name=\"swagger-ui\"),\n</code></pre> <p>] ```</p> </li> <li> <p>Migrate:     <code>bash     python manage.py migrate</code></p> </li> </ol>"},{"location":"installation/#verify","title":"Verify","text":"<p>Run the dispatcher loop:</p> <pre><code>python manage.py automate_dispatch\n</code></pre>"},{"location":"llm/","title":"LLM Subsystem","text":"<p>The LLM subsystem provides a structured, safe, and efficient way to integrate Large Language Models into your workflows.</p>"},{"location":"llm/#architecture","title":"Architecture","text":"<p>The system is built on four core components:</p> <ol> <li>Backends (<code>automate.llm.providers</code>): Adapters for specific providers (OpenAI, Anthropic, Gemini).</li> <li>Configuration (<code>LLMModelConfig</code>): Defines model parameters (temperature, max_tokens) and links to a provider.</li> <li>Router (<code>LLMRouter</code>): Determines the active configuration based on precedence rules.</li> <li>Engine (<code>LLMEngine</code>): Orchestrates the generation process, including template rendering and backend dispatch.</li> </ol>"},{"location":"llm/#configuration-precedence","title":"Configuration Precedence","text":"<p>When an <code>LLM</code> node executes, the configuration is resolved in the following order:</p> <ol> <li>Workflow/Runtime Override: Explicit configuration passed to the execution (highest priority).</li> <li>Environment Override (<code>PromptRelease</code>): Configuration specific to the deployment environment (e.g., use <code>gpt-4</code> in Prod, <code>gpt-3.5</code> in Dev).</li> <li>Default Configuration (<code>PromptVersion</code>): The base configuration defined by the prompt author.</li> </ol>"},{"location":"llm/#safety-features","title":"Safety Features","text":""},{"location":"llm/#jinja2-sandboxing","title":"Jinja2 Sandboxing","text":"<p>All prompt templates are rendered using a Sandboxed Environment. This prevents malicious templates from accessing internal Python objects or executing unsafe code. We also enforce <code>StrictUndefined</code>, meaning any variable used in a template must be provided in the input context, effectively preventing silent failures.</p>"},{"location":"llm/#log-redaction","title":"Log Redaction","text":"<p>By default, raw prompts and completions are Redacted in logs to prevent accidental leakage of PII or sensitive data. To enable full logging for debugging, set <code>AUTOMATE_LLM_LOG_PROMPTS = True</code> in your Django settings.</p>"},{"location":"llm/#adding-a-new-provider","title":"Adding a New Provider","text":"<p>To add a custom provider:</p> <ol> <li>Create a subclass of <code>BaseLLMBackend</code> in <code>src/automate/llm/backend.py</code>.</li> <li>Implement the <code>complete()</code> method.</li> <li>Register it in the <code>LLMEngine</code> backend map.</li> </ol> <pre><code>class MyCustomBackend(BaseLLMBackend):\n    def complete(self, config, messages, **kwargs):\n        # Implementation\n        return {\"content\": \"...\"}\n</code></pre>"},{"location":"llm_gateway/","title":"LLM Gateway","text":""},{"location":"llm_gateway/#overview","title":"Overview","text":"<p>A vendor-agnostic gateway for LLM interactions with built-in governance, costing, and safety.</p>"},{"location":"llm_gateway/#configuration","title":"Configuration","text":"<p>Configure providers in <code>settings.py</code>:</p> <pre><code>AUTOMATE = {\n    \"LLM\": {\n        \"PROVIDERS\": {\n            \"default\": \"openai_main\",\n            \"registry\": {\n                \"openai_main\": {\n                    \"BACKEND\": \"automate_llm.provider.openai.OpenAIProvider\",\n                    \"API_KEY\": \"secretref://env/openai/api_key\"\n                }\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"llm_gateway/#features","title":"Features","text":""},{"location":"llm_gateway/#1-prompt-management","title":"1. Prompt Management","text":"<ul> <li>Store prompts in the DB (<code>PromptTemplate</code>).</li> <li>Use Jinja2 syntax with strict sandboxing (no <code>__class__</code> access).</li> <li>Versioned templates.</li> </ul>"},{"location":"llm_gateway/#2-governance","title":"2. Governance","text":"<ul> <li>Budget: Daily spending limits per tenant.</li> <li>Audit: Every request logged to <code>LLMRequest</code> table with cost, token usage, and latency.</li> <li>PII: Automatic regex scanning for Email, Phone, SSN before sending to provider.</li> </ul>"},{"location":"llm_gateway/#3-usage","title":"3. Usage","text":"<pre><code>from automate_llm.client import LLMClient\n\nresponse = client.chat(\n    template=\"summarize_email\",\n    inputs={\"email_body\": \"...\"}\n)\nprint(response.content)\n</code></pre>"},{"location":"concepts/architecture/","title":"Architecture","text":"<p>Django Automate is built on a modular \"Engine + Plugins\" architecture.</p> <pre><code>graph TD\n    API[API Gateway] --&gt; Dispatcher\n    Webhook[Webhook Ingress] --&gt; Dispatcher\n\n    Dispatcher --&gt; Queue[(Job Queue)]\n\n    Queue --&gt; Worker[Worker Pool]\n\n    Worker --&gt; Engine[Execution Engine]\n\n    Engine --&gt; Provider[Provider Registry]\n    Engine --&gt; Store[Vector Store]\n    Engine --&gt; DB[(Postgres)]\n\n    Provider --&gt; LLM[LLM APIs]\n    Provider --&gt; Tools[External Tools]\n</code></pre>"},{"location":"concepts/architecture/#core-components","title":"Core Components","text":""},{"location":"concepts/architecture/#1-job-queue-the-spine","title":"1. Job Queue (The Spine)","text":"<p>All work is asynchronous. <code>Job</code> is the canonical unit of work. Backends (Celery, Redis, SQS) are just transports.</p>"},{"location":"concepts/architecture/#2-execution-engine","title":"2. Execution Engine","text":"<p>A directed acyclic graph (DAG) executor that steps through <code>Workflow</code> definitions. It handles state persistence, retries, and error handling.</p>"},{"location":"concepts/architecture/#3-provider-registry","title":"3. Provider Registry","text":"<p>A unified interface for external capabilities. Whether it's OpenAI, a local vector store, or a Slack connector, they all implement <code>BaseProvider</code>.</p>"},{"location":"concepts/architecture/#4-admin-studio","title":"4. Admin Studio","text":"<p>The control plane. It provides visibility into queues, executions, and allows for \"Human in the Loop\" interventions.</p>"},{"location":"concepts/mental-model/","title":"Core Concepts","text":"<p>Understanding the mental model of Django Automate: Event \u2192 Rule \u2192 Workflow \u2192 Execution.</p>"},{"location":"concepts/mental-model/#the-automation-pipeline","title":"The Automation Pipeline","text":"<ol> <li>Event: Something happens (Signal, Webhook, Schedule). It is immutable and contains a payload (e.g., JSON body, model instance data).</li> <li>Rule Match: The Rules Engine evaluates the event against active RuleSpecs. Complex logic (JSONLogic) determines if a workflow should trigger.</li> <li>Workflow Version: Workflows are versioned. An execution is tied to a specific snapshot of a workflow definition, ensuring consistency even if the workflow is edited mid-run.</li> <li>Execution Run: An instance of a workflow running for a specific event. Contains a globally unique <code>trace_id</code>.</li> <li>Steps: Individual units of work (Actions). Steps are executed sequentially (or parallel/fan-out in advanced configs).</li> </ol>"},{"location":"concepts/mental-model/#key-guarantees","title":"Key Guarantees","text":""},{"location":"concepts/mental-model/#idempotency-once-ish-execution","title":"Idempotency &amp; \"Once-ish\" Execution","text":"<p>The system uses <code>idempotency_keys</code> for every execution. If the same webhook payload arrives twice (with the same ID), the second one is practically ignored or attached to the existing run, preventing duplicate side effects (like charging a card twice).</p>"},{"location":"concepts/mental-model/#reliability-the-outbox-pattern","title":"Reliability (The Outbox Pattern)","text":"<p>We do not execute side effects immediately in the HTTP request loop. 1.  Commit Phase: The event and intent-to-run are saved to the Outbox (DB). 2.  Async Phase: A reliable worker (Celery or Management Command) claims the outbox item via a locking mechanism (<code>SKIP LOCKED</code> on Postgres). 3.  Retry Phase: If a step fails, it is retried with exponential backoff based on the policy. Dead Letter Queues (DLQ) capture permanent failures.</p>"},{"location":"concepts/mental-model/#security-model","title":"Security Model","text":""},{"location":"concepts/mental-model/#secretrefs","title":"SecretRefs","text":"<p>NEVER store API keys in workflow definitions. Use <code>SecretRef</code>:</p> <pre><code>{\n    \"api_key\": {\"$secret\": \"STRIPE_LIVE_KEY\"}\n}\n</code></pre> <p>The Governance Layer resolves this at runtime using configured Backends (Env, Vault, Encrypted DB).</p>"},{"location":"concepts/mental-model/#redaction","title":"Redaction","text":"<p>The Audit Log automatically redacts values that look like sensitive keys or PII before saving to the database, ensuring your logs don't leak secrets.</p>"},{"location":"concepts/mental-model/#policy-engine","title":"Policy Engine","text":"<p>Administrators can define global policies: *   Budget: Max $5.00/day on LLM calls. *   Rate Limits: Max 100 webhooks/minute per tenant. *   Allowlists: Only allow HTTP calls to <code>*.stripe.com</code>.</p>"},{"location":"connectors/architecture/","title":"Connector Architecture","text":"<p>Django Automate uses a single, canonical connector pattern.</p>"},{"location":"connectors/architecture/#canonical-pattern-connectoradapter","title":"Canonical Pattern: ConnectorAdapter","text":"<p>All connectors inherit from <code>ConnectorAdapter</code>:</p> <pre><code>from automate_connectors.adapters.base import ConnectorAdapter\n\nclass MyAdapter(ConnectorAdapter):\n    name = \"my_adapter\"\n\n    def connect(self) -&gt; bool:\n        return True\n\n    def execute(self, action: str, payload: dict) -&gt; dict:\n        return {\"result\": \"ok\"}\n</code></pre>"},{"location":"connectors/architecture/#key-components","title":"Key Components","text":"Component Purpose <code>adapters.base.ConnectorAdapter</code> Base class for all connectors <code>registry.connector_registry</code> Connector registration <code>testing.ConnectorTestCase</code> Official test harness"},{"location":"connectors/architecture/#documentation","title":"Documentation","text":"<p>See the full guide: Building Connectors</p>"},{"location":"connectors/architecture/#legacy-providers","title":"Legacy Providers","text":"<p>\u26a0\ufe0f The <code>BaseProvider</code> pattern from the old <code>providers/</code> directory is deprecated.</p> <p>Legacy examples are in <code>examples/legacy_connectors/</code> for reference only.</p>"},{"location":"connectors/n8n/","title":"n8n Connector","text":"<p>Trigger external n8n workflows via Webhook.</p>"},{"location":"connectors/n8n/#setup","title":"Setup","text":"<ol> <li>n8n Workflow: Create a workflow in n8n starting with a Webhook node.</li> <li>Method: Set method to <code>POST</code>.</li> <li>URL: Copy the Production URL (e.g., <code>https://n8n.example.com/webhook/uuid</code>).</li> </ol>"},{"location":"connectors/n8n/#connection-profile","title":"Connection Profile","text":"<p>Currently, n8n does not strictly require auth for public webhooks, but you can add Header Auth.</p> <ul> <li>Slug: <code>n8n-main</code></li> <li>Connector: <code>n8n</code></li> <li>Secrets:   <code>json   {     \"api_key\": \"env://N8N_API_KEY\"   }</code></li> </ul>"},{"location":"connectors/n8n/#usage","title":"Usage","text":"<p>In your Workflow, specify the <code>webhook_id</code> (the last part of the URL):</p> <pre><code>{\n  \"id\": \"process-in-n8n\",\n  \"type\": \"n8n\",\n  \"config\": {\n    \"webhook_id\": \"uuid-from-n8n-url\",\n    \"payload\": {\n       \"data\": \"{{ event.payload }}\"\n    }\n  }\n}\n</code></pre>"},{"location":"connectors/slack/","title":"Slack Connector","text":"<p>Send messages to Slack channels.</p>"},{"location":"connectors/slack/#setup","title":"Setup","text":"<ol> <li>Create Slack App: Go to api.slack.com, enable \"Incoming Webhooks\" or \"Bots\".</li> <li>Scopes: Add <code>chat:write</code>, <code>channels:read</code>.</li> <li>Install: Install app to your workspace. Copy the <code>Bot User OAuth Token</code> (starts with <code>xoxb-</code>).</li> </ol>"},{"location":"connectors/slack/#connection-profile","title":"Connection Profile","text":"<p>Create a <code>ConnectionProfile</code> in Django Admin.</p> <ul> <li>Slug: <code>slack-prod</code></li> <li>Connector: <code>Slack</code></li> <li>Secrets:   <code>json   {     \"token\": \"env://SLACK_BOT_TOKEN\"   }</code> (Ensure <code>SLACK_BOT_TOKEN</code> is in your environment variables)</li> </ul>"},{"location":"connectors/slack/#usage","title":"Usage","text":"<p>In your Workflow Graph:</p> <pre><code>{\n  \"id\": \"notify\",\n  \"type\": \"slack\",\n  \"config\": {\n    \"channel\": \"#general\",\n    \"text\": \"Hello form Automate! Event: {{ event.payload.id }}\"\n  }\n}\n</code></pre>"},{"location":"connectors/zapier/","title":"Zapier Integration","text":"<p>The Zapier integration works via REST Hooks. Zapier subscribes to our <code>zapier/subscribe</code> endpoint, and we push events to them.</p>"},{"location":"connectors/zapier/#setup","title":"Setup","text":"<p>Since this is a private API integration, you would typically build a private Zapier App using the Zapier Developer Platform.</p>"},{"location":"connectors/zapier/#endpoints","title":"Endpoints","text":"<p>Your Zapier App will need to configure:</p> <ul> <li>Subscribe URL: <code>POST /automate/zapier/subscribe</code></li> <li>Unsubscribe URL: <code>DELETE /automate/zapier/unsubscribe</code></li> <li>List Triggers: <code>GET /automate/zapier/triggers</code></li> </ul>"},{"location":"connectors/zapier/#usage","title":"Usage","text":"<p>Once your Zapier App is connected, users can create Zaps that trigger when specific Django Automate events occur (e.g. <code>workflow_completed</code>, <code>manual_trigger</code>).</p>"},{"location":"contributing/docs-style-guide/","title":"Documentation Style Guide","text":"<p>This guide defines how to write documentation for Django Automate.</p>"},{"location":"contributing/docs-style-guide/#goals","title":"Goals","text":"<ul> <li>Fast Path: Users must succeed in 10 minutes.</li> <li>Predictable: Every page shares the same structure.</li> <li>Safe: No secret leakage in examples or logs.</li> <li>Parity: Admin Studio features must map to API equivalents.</li> </ul>"},{"location":"contributing/docs-style-guide/#page-template","title":"Page Template","text":"<p>Every non-reference page must follow this skeleton:</p> <ol> <li>What you\u2019ll build / do</li> <li>Prerequisites</li> <li>Steps</li> <li>Expected output</li> <li>Common errors / Troubleshooting</li> <li>Next steps</li> </ol>"},{"location":"contributing/docs-style-guide/#terminology","title":"Terminology","text":"<ul> <li>Event: Immutable ingestion record.</li> <li>Trigger: Source of events.</li> <li>RuleSpec: Logic conditions.</li> <li>Workflow / Version: Definition snapshots.</li> <li>ExecutionRun: Instance of a workflow.</li> <li>OutboxJob: Transactional queue item.</li> <li>SecretRef: Configuration pointer (<code>$secret:KEY</code>).</li> </ul>"},{"location":"contributing/docs-style-guide/#code-snippets","title":"Code Snippets","text":"<ul> <li>Use language tags: <code>python</code>, <code>json</code>, <code>bash</code>.</li> <li>Use stable placeholders:<ul> <li><code>SECRETREF://prod/slack/api_key</code></li> <li><code>sk_live_***</code></li> <li><code>whsec_***</code></li> </ul> </li> </ul>"},{"location":"contributing/docs-style-guide/#security-redaction","title":"Security &amp; Redaction","text":"<ul> <li>Redact: Keys named <code>api_key</code>, <code>token</code>, <code>secret</code>.</li> <li>Screenshots: Never show raw permissions or secret values.</li> </ul>"},{"location":"contributing/docs-style-guide/#admonitions","title":"Admonitions","text":"<ul> <li>Note: Context.</li> <li>Tip: Best practice.</li> <li>Warning: Security/Risk.</li> <li>DB Capability: SQLite vs Postgres differences.</li> </ul>"},{"location":"contributing/docs-style-guide/#qa-checklist","title":"QA Checklist","text":"<ul> <li>[ ] No secrets visible.</li> <li>[ ] Language tags present.</li> <li>[ ] 2+ Internal links.</li> <li>[ ] DB capability notes included.</li> </ul>"},{"location":"deployment/checklist/","title":"Deployment Checklist","text":""},{"location":"deployment/checklist/#database","title":"Database","text":"<ul> <li>[ ] Postgres: Verify version 12+.</li> <li>[ ] Connections: Ensure <code>max_connections</code> can handle <code>WEB_CONCURRENCY + WORKER_CONCURRENCY</code>.</li> </ul>"},{"location":"deployment/checklist/#workers","title":"Workers","text":"<ul> <li>[ ] Process Manager: Use Supervisor or Docker to keep <code>python manage.py automate_worker</code> running.</li> <li>[ ] Scale: Start with 1 worker per CPU core.</li> </ul>"},{"location":"deployment/checklist/#security","title":"Security","text":"<ul> <li>[ ] Secrets: Set <code>AUTOMATE_SECRET_KEY_PREFIX</code>.</li> <li>[ ] HTTPS: Ensure all webhook callbacks use HTTPS.</li> <li>[ ] Allowed Hosts: Configure <code>POLICY.connector_allowlist</code> if you want to restrict which external APIs can be called.</li> </ul>"},{"location":"deployment/checklist/#maintenance","title":"Maintenance","text":"<ul> <li>[ ] Audit Logs: Configure a cleanup policy for <code>automate_audit_log</code> table if high volume.</li> </ul>"},{"location":"deployment/pypi_setup/","title":"PyPI Trusted Publishing Setup","text":"<p>This repository uses GitHub Actions OIDC (Trusted Publishing) to publish releases to TestPyPI and PyPI without long-lived password tokens.</p>"},{"location":"deployment/pypi_setup/#1-create-github-environments","title":"1. Create GitHub Environments","text":"<p>In this repository's Settings -&gt; Environments, create two environments:</p> <ol> <li><code>testpypi</code><ul> <li>No protection rules (automatic deployment).</li> </ul> </li> <li><code>pypi</code><ul> <li>Required reviewers: Add yourself or the maintainer team. This acts as the \"Promotion Gate\" for production releases.</li> </ul> </li> </ol>"},{"location":"deployment/pypi_setup/#2-configure-pypi-trusted-publishing","title":"2. Configure PyPI (Trusted Publishing)","text":"<p>You must configure the trust relationship on PyPI so it accepts tokens from this GitHub repo's workflows.</p>"},{"location":"deployment/pypi_setup/#a-testpypi-setup","title":"A. TestPyPI Setup","text":"<ol> <li>Log in to TestPyPI.</li> <li>Go to your Project Settings (or create the project if it doesn't exist).</li> <li>Publishing -&gt; Trusted Publishers -&gt; Add.</li> <li>Owner: <code>{your-github-org}</code></li> <li>Repository: <code>django-automate</code></li> <li>Workflow name: <code>release.yml</code></li> <li>Environment: <code>testpypi</code></li> </ol>"},{"location":"deployment/pypi_setup/#b-pypi-production-setup","title":"B. PyPI Production Setup","text":"<ol> <li>Log in to PyPI.</li> <li>Go to Project Settings.</li> <li>Publishing -&gt; Trusted Publishers -&gt; Add.</li> <li>Owner: <code>{your-github-org}</code></li> <li>Repository: <code>django-automate</code></li> <li>Workflow name: <code>release.yml</code></li> <li>Environment: <code>pypi</code></li> </ol>"},{"location":"deployment/pypi_setup/#3-how-to-release","title":"3. How to Release","text":"<ol> <li>Draft your changes.</li> <li>Tag a version:     <code>bash     git tag v0.1.0     git push origin v0.1.0</code></li> <li>The Release workflow will:<ul> <li>Build artifacts.</li> <li>Deploy to TestPyPI.</li> <li>Pause and wait for approval on the PyPI environment (check \"Deployments\" sidebar).</li> <li>Once approved, publish to PyPI and create a GitHub Release.</li> </ul> </li> </ol>"},{"location":"extending/plugin-system/","title":"Plugin System","text":"<p>We use Python <code>entry_points</code> to discover plugins.</p>"},{"location":"extending/plugin-system/#configuration","title":"Configuration","text":"<p>In your <code>pyproject.toml</code> (if packaging your own plugins):</p> <pre><code>[project.entry-points.\"django_automate.connectors\"]\nmy_erp = \"my_app.adapters:MyERPAdapter\"\n\n[project.entry-points.\"django_automate.secrets.backends\"]\nvault = \"my_app.secrets:HashiCorpVaultBackend\"\n</code></pre>"},{"location":"extending/plugin-system/#registry-loading","title":"Registry Loading","text":"<p>On startup (<code>AppConfig.ready</code>), the registry scans these entry points and loads the classes.</p>"},{"location":"extending/plugin-system/#available-extension-points","title":"Available Extension Points","text":"<ul> <li><code>django_automate.connectors</code></li> <li><code>django_automate.secrets.backends</code></li> <li><code>django_automate.llm.providers</code></li> <li><code>django_automate.llm.renderers</code></li> </ul>"},{"location":"extending/contracts/connector-adapter/","title":"Connector Adapter Contract","text":"<p>To build a connector, inherit from <code>automate_connectors.adapters.base.ConnectorAdapter</code>.</p>"},{"location":"extending/contracts/connector-adapter/#class-attributes","title":"Class Attributes","text":"<ul> <li><code>code</code> (str): Unique snake_case identifier (e.g., <code>slack</code>).</li> <li><code>name</code> (str): Human-readable name.</li> <li><code>actions</code> (dict): Map of <code>action_slug</code> -&gt; <code>ActionSpec</code>.</li> </ul>"},{"location":"extending/contracts/connector-adapter/#methods","title":"Methods","text":""},{"location":"extending/contracts/connector-adapter/#executeself-action-params-context","title":"<code>execute(self, action, params, context)</code>","text":"<p>Arguments: *   <code>action</code> (str): The specific operation (e.g., <code>post_message</code>). *   <code>params</code> (dict): The resolved input parameters (Jinja2 templates already rendered). *   <code>context</code> (dict): Contains <code>secrets</code> (dict of resolved secrets) and <code>trace_id</code>.</p> <p>Returns: *   <code>dict</code> or <code>None</code>. The output payload.</p> <p>Raises: *   <code>ConnectorError</code>: For managed failures (retried). *   <code>Exception</code>: Unmanaged failures (also retried).</p>"},{"location":"extending/contracts/connector-adapter/#testing","title":"Testing","text":"<p>Use <code>automate_testing.contracts.ConnectorContractTest</code> to verify your implementation follows the spec.</p>"},{"location":"features/datachat/","title":"Data Chat (NL2SQL)","text":"<p>An AI-powered natural language interface for querying your Django database directly from the admin.</p>"},{"location":"features/datachat/#overview","title":"Overview","text":"<p>Data Chat allows staff users to ask questions in plain English and receive SQL-backed answers. The system:</p> <ol> <li>Converts natural language to SQL using an LLM</li> <li>Validates queries against a security policy (read-only, allowed tables)</li> <li>Executes the query and returns results</li> <li>Summarizes results in natural language</li> </ol>"},{"location":"features/datachat/#quick-setup","title":"Quick Setup","text":""},{"location":"features/datachat/#1-add-to-installed_apps","title":"1. Add to INSTALLED_APPS","text":"<pre><code># settings.py\nINSTALLED_APPS = [\n    ...,\n    \"automate_datachat\",\n]\n</code></pre>"},{"location":"features/datachat/#2-register-models","title":"2. Register Models","text":"<p>In your app's <code>apps.py</code>:</p> <pre><code>from django.apps import AppConfig\n\nclass MyAppConfig(AppConfig):\n    name = 'myapp'\n\n    def ready(self):\n        from automate_datachat.registry import DataChatRegistry\n        from .models import Product, Order, Customer\n\n        DataChatRegistry.register(\n            Product,\n            include_fields=[\"id\", \"name\", \"price\", \"category\", \"created_at\"],\n            tags=[\"inventory\"]\n        )\n\n        DataChatRegistry.register(\n            Order,\n            include_fields=[\"id\", \"customer_id\", \"total\", \"status\", \"created_at\"],\n            tags=[\"sales\"]\n        )\n</code></pre>"},{"location":"features/datachat/#3-run-migrations","title":"3. Run Migrations","text":"<pre><code>python manage.py migrate automate_datachat\n</code></pre>"},{"location":"features/datachat/#admin-widget","title":"Admin Widget","text":"<p>The chat widget appears automatically in Django Admin for staff users (bottom-right corner).</p>"},{"location":"features/datachat/#features","title":"Features","text":"<ul> <li>Conversational: Maintains context across questions</li> <li>SQL Display: Shows generated SQL for transparency</li> <li>History: Persists messages across sessions</li> </ul>"},{"location":"features/datachat/#prompt-management","title":"Prompt Management","text":"<p>Prompts are stored in the database and editable via Admin.</p>"},{"location":"features/datachat/#default-prompts","title":"Default Prompts","text":"<ul> <li><code>datachat_sql_generator</code> - Converts natural language to SQL</li> <li><code>datachat_summarizer</code> - Summarizes query results</li> </ul>"},{"location":"features/datachat/#template-variables","title":"Template Variables","text":"<p>Prompts use Jinja2 templating:</p> Variable Description <code>{{ schema }}</code> Database schema (tables, columns) <code>{{ history }}</code> Conversation history <code>{{ question }}</code> User's current question <code>{{ results }}</code> Query results (for summarizer)"},{"location":"features/datachat/#llm-logging","title":"LLM Logging","text":"<p>All LLM interactions are logged to <code>LLMRequest</code>:</p> Field Description <code>input_payload</code> Full messages sent to LLM <code>output_content</code> Raw LLM response <code>input_tokens</code> Tokens consumed <code>latency_ms</code> Response time <code>cost_usd</code> Cost (if provider returns it) <p>View logs in Admin \u2192 Automate LLM \u2192 LLM Requests.</p>"},{"location":"features/datachat/#security","title":"Security","text":""},{"location":"features/datachat/#read-only-queries","title":"Read-Only Queries","text":"<p>Only <code>SELECT</code> statements are allowed. <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code> are blocked.</p>"},{"location":"features/datachat/#table-whitelisting","title":"Table Whitelisting","text":"<p>Only registered models are exposed. Unregistered tables cannot be queried.</p>"},{"location":"features/datachat/#sql-validation","title":"SQL Validation","text":"<p>All generated SQL is validated before execution using <code>SQLPolicy</code>.</p>"},{"location":"features/datachat/#api-endpoints","title":"API Endpoints","text":"Endpoint Method Description <code>/datachat/api/chat/</code> POST Send a question <code>/datachat/api/history/</code> GET Get message history"},{"location":"features/datachat/#configuration","title":"Configuration","text":"<pre><code># settings.py\nDATACHAT_CONFIG = {\n    \"max_results\": 1000,  # Max rows returned\n    \"default_provider\": \"openai\",  # LLM provider to use\n}\n</code></pre>"},{"location":"features/embeddable-widget/","title":"Embeddable Chat Widget","text":"<p>Embed the Data Chat widget on external websites with full security controls.</p>"},{"location":"features/embeddable-widget/#overview","title":"Overview","text":"<p>The embeddable widget allows you to add AI-powered data chat to any website. Features include:</p> <ul> <li>Domain Whitelisting: Only allowed domains can embed</li> <li>API Key Authentication: Secure per-embed keys</li> <li>Rate Limiting: Prevent abuse</li> <li>Theme Customization: Match your brand</li> </ul>"},{"location":"features/embeddable-widget/#creating-an-embed","title":"Creating an Embed","text":""},{"location":"features/embeddable-widget/#via-admin-ui","title":"Via Admin UI","text":"<ol> <li>Go to Admin \u2192 Automate Datachat \u2192 Chat Embeds</li> <li>Click \"Add Chat Embed\"</li> <li>Configure:</li> <li>Name: Internal identifier</li> <li>Allowed Domains: JSON array of domains</li> <li>Rate Limiting: Requests per minute</li> <li>Theme: Colors and title</li> <li>Welcome Message: Initial greeting</li> </ol>"},{"location":"features/embeddable-widget/#programmatically","title":"Programmatically","text":"<pre><code>from automate_datachat.models import ChatEmbed\n\nembed = ChatEmbed.objects.create(\n    name=\"Marketing Site Widget\",\n    allowed_domains=[\"example.com\", \"*.example.com\"],\n    rate_limit_per_minute=10,\n    theme={\n        \"primaryColor\": \"#4F46E5\",\n        \"title\": \"Ask Our Data\"\n    },\n    welcome_message=\"Hi! Ask me anything about our products.\"\n)\n\nprint(embed.api_key)  # Auto-generated: dce_xxxxx...\n</code></pre>"},{"location":"features/embeddable-widget/#embed-code","title":"Embed Code","text":"<p>After creating an embed, copy the generated code:</p> <pre><code>&lt;script \n  src=\"https://yoursite.com/datachat/embed/v1/&lt;embed-id&gt;/widget.js\" \n  data-key=\"dce_YOUR_API_KEY\"&gt;\n&lt;/script&gt;\n</code></pre> <p>The widget will appear as a floating chat button in the bottom-right corner.</p>"},{"location":"features/embeddable-widget/#security-features","title":"Security Features","text":""},{"location":"features/embeddable-widget/#domain-whitelisting","title":"Domain Whitelisting","text":"<p>Specify which domains can embed the widget:</p> <pre><code>[\"example.com\", \"app.example.com\", \"*.staging.example.com\"]\n</code></pre> <p>Wildcards are supported: - <code>*.example.com</code> - All subdomains - <code>example.com</code> - Exact match only</p>"},{"location":"features/embeddable-widget/#api-key-authentication","title":"API Key Authentication","text":"<p>Each embed has a unique API key (auto-generated):</p> <pre><code>dce_a1b2c3d4e5f6g7h8i9j0...\n</code></pre> <p>The widget passes this in the <code>X-Embed-Key</code> header.</p>"},{"location":"features/embeddable-widget/#rate-limiting","title":"Rate Limiting","text":"<p>Prevent abuse with per-session limits:</p> Setting Description <code>rate_limit_per_minute</code> Max requests per minute per session <code>max_queries_per_session</code> Total queries allowed per session"},{"location":"features/embeddable-widget/#table-restrictions","title":"Table Restrictions","text":"<p>Limit which tables can be queried:</p> <pre><code>[\"products\", \"categories\"]\n</code></pre> <p>Empty array = all tables allowed.</p>"},{"location":"features/embeddable-widget/#theme-customization","title":"Theme Customization","text":"<p>Customize the widget appearance:</p> <pre><code>{\n    \"primaryColor\": \"#2563EB\",\n    \"title\": \"Data Assistant\"\n}\n</code></pre> Property Description Default <code>primaryColor</code> Button and header color <code>#2563EB</code> <code>title</code> Widget header title \"Data Assistant\""},{"location":"features/embeddable-widget/#api-endpoints","title":"API Endpoints","text":"<p>The embed widget uses these endpoints:</p> Endpoint Method Description <code>/datachat/embed/v1/&lt;id&gt;/widget.js</code> GET Widget JavaScript <code>/datachat/embed/v1/&lt;id&gt;/chat</code> POST Send message <code>/datachat/embed/v1/&lt;id&gt;/config</code> GET Get embed config"},{"location":"features/embeddable-widget/#chat-api","title":"Chat API","text":"<p>Request:</p> <pre><code>curl -X POST https://yoursite.com/datachat/embed/v1/&lt;id&gt;/chat \\\n  -H \"Content-Type: application/json\" \\\n  -H \"X-Embed-Key: dce_xxxxx\" \\\n  -d '{\"question\": \"How many products are there?\"}'\n</code></pre> <p>Response:</p> <pre><code>{\n    \"answer\": \"There are 42 products in the database.\",\n    \"sql\": \"SELECT COUNT(*) FROM products\",\n    \"error\": null\n}\n</code></pre>"},{"location":"features/embeddable-widget/#error-responses","title":"Error Responses","text":"Status Error Description 401 \"Invalid API key\" Wrong or missing key 403 \"Domain not allowed\" Origin not whitelisted 404 \"Embed not found\" Invalid embed ID 429 \"Rate limit exceeded\" Too many requests"},{"location":"features/embeddable-widget/#integration-examples","title":"Integration Examples","text":""},{"location":"features/embeddable-widget/#react","title":"React","text":"<pre><code>import { useEffect } from 'react';\n\nfunction ChatWidget() {\n    useEffect(() =&gt; {\n        const script = document.createElement('script');\n        script.src = 'https://yoursite.com/datachat/embed/v1/&lt;id&gt;/widget.js';\n        script.setAttribute('data-key', 'dce_xxxxx');\n        document.body.appendChild(script);\n\n        return () =&gt; script.remove();\n    }, []);\n\n    return null;\n}\n</code></pre>"},{"location":"features/embeddable-widget/#vue","title":"Vue","text":"<pre><code>&lt;script setup&gt;\nimport { onMounted, onUnmounted } from 'vue';\n\nonMounted(() =&gt; {\n    const script = document.createElement('script');\n    script.src = 'https://yoursite.com/datachat/embed/v1/&lt;id&gt;/widget.js';\n    script.setAttribute('data-key', 'dce_xxxxx');\n    document.body.appendChild(script);\n});\n&lt;/script&gt;\n</code></pre>"},{"location":"features/embeddable-widget/#static-html","title":"Static HTML","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n    &lt;h1&gt;My Website&lt;/h1&gt;\n\n    &lt;script \n        src=\"https://yoursite.com/datachat/embed/v1/&lt;id&gt;/widget.js\" \n        data-key=\"dce_xxxxx\"&gt;\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"features/mcp-integration/","title":"MCP Server Integration","text":"<p>Connect external MCP (Model Context Protocol) servers to expose tools in the chat assistant.</p>"},{"location":"features/mcp-integration/#overview","title":"Overview","text":"<p>MCP is an open protocol for connecting AI assistants to external tools. Django Automate can:</p> <ol> <li>Register external MCP servers</li> <li>Discover available tools automatically</li> <li>Execute tools when requested by the chat assistant</li> </ol>"},{"location":"features/mcp-integration/#registering-an-mcp-server","title":"Registering an MCP Server","text":""},{"location":"features/mcp-integration/#via-admin-ui","title":"Via Admin UI","text":"<ol> <li>Go to Admin \u2192 Django Automate \u2192 MCP Servers</li> <li>Click \"Add MCP Server\"</li> <li>Fill in:</li> <li>Name: Display name</li> <li>Slug: Unique identifier (e.g., <code>shopify-mcp</code>)</li> <li>Endpoint URL: Base URL of the MCP server</li> <li>Auth Type: None, Bearer Token, or API Key</li> <li>Auth Secret Ref: Secret value or <code>env:VAR_NAME</code></li> </ol>"},{"location":"features/mcp-integration/#programmatically","title":"Programmatically","text":"<pre><code>from automate.models import MCPServer\n\nMCPServer.objects.create(\n    name=\"Shopify MCP\",\n    slug=\"shopify-mcp\",\n    endpoint_url=\"http://localhost:3000\",\n    auth_type=\"bearer\",\n    auth_secret_ref=\"env:SHOPIFY_MCP_TOKEN\",\n)\n</code></pre>"},{"location":"features/mcp-integration/#authentication-options","title":"Authentication Options","text":"Type Description Example <code>none</code> No authentication Public servers <code>bearer</code> Bearer token in Authorization header <code>Authorization: Bearer &lt;token&gt;</code> <code>api_key</code> Custom header <code>X-API-Key: &lt;key&gt;</code>"},{"location":"features/mcp-integration/#secret-references","title":"Secret References","text":"<p>Use <code>env:VAR_NAME</code> to reference environment variables:</p> <pre><code>auth_secret_ref=\"env:SHOPIFY_MCP_TOKEN\"\n</code></pre> <p>Or use a raw token (not recommended for production):</p> <pre><code>auth_secret_ref=\"sk_live_xxxx\"\n</code></pre>"},{"location":"features/mcp-integration/#syncing-tools","title":"Syncing Tools","text":""},{"location":"features/mcp-integration/#management-command","title":"Management Command","text":"<pre><code># Sync all enabled servers\npython manage.py sync_mcp_tools\n\n# Sync specific server\npython manage.py sync_mcp_tools --server=shopify-mcp\n\n# Include disabled servers\npython manage.py sync_mcp_tools --all\n</code></pre>"},{"location":"features/mcp-integration/#admin-action","title":"Admin Action","text":"<ol> <li>Go to Admin \u2192 MCP Servers</li> <li>Select servers</li> <li>Choose \"Sync tools from selected servers\"</li> </ol>"},{"location":"features/mcp-integration/#tool-management","title":"Tool Management","text":"<p>Discovered tools appear in Admin \u2192 MCP Tools.</p>"},{"location":"features/mcp-integration/#enablingdisabling-tools","title":"Enabling/Disabling Tools","text":"<p>Each tool can be individually enabled or disabled:</p> <pre><code>from automate.models import MCPTool\n\ntool = MCPTool.objects.get(server__slug=\"shopify-mcp\", name=\"get_products\")\ntool.enabled = False\ntool.save()\n</code></pre>"},{"location":"features/mcp-integration/#tool-schema","title":"Tool Schema","text":"<p>Tools are stored with their JSON Schema for input validation:</p> <pre><code>{\n    \"name\": \"get_products\",\n    \"description\": \"Fetch products from Shopify\",\n    \"input_schema\": {\n        \"type\": \"object\",\n        \"properties\": {\n            \"limit\": {\"type\": \"integer\", \"default\": 10}\n        }\n    }\n}\n</code></pre>"},{"location":"features/mcp-integration/#mcp-client-api","title":"MCP Client API","text":""},{"location":"features/mcp-integration/#direct-usage","title":"Direct Usage","text":"<pre><code>from automate.models import MCPServer\nfrom automate_llm.mcp_client import MCPClient, MCPClientError\n\nserver = MCPServer.objects.get(slug=\"shopify-mcp\")\nclient = MCPClient(server)\n\n# Discover tools\ntry:\n    tools = client.discover_tools()\n    print(f\"Found {len(tools)} tools\")\nexcept MCPClientError as e:\n    print(f\"Discovery failed: {e}\")\n\n# Execute a tool\ntry:\n    result = client.execute_tool(\"get_products\", {\"limit\": 5})\n    print(result)\nexcept MCPClientError as e:\n    print(f\"Execution failed: {e}\")\n</code></pre>"},{"location":"features/mcp-integration/#mcp-server-requirements","title":"MCP Server Requirements","text":"<p>Your MCP server must expose these endpoints:</p>"},{"location":"features/mcp-integration/#get-tools","title":"GET /tools","text":"<p>Returns available tools:</p> <pre><code>{\n    \"tools\": [\n        {\n            \"name\": \"get_products\",\n            \"description\": \"Fetch products\",\n            \"inputSchema\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"limit\": {\"type\": \"integer\"}\n                }\n            }\n        }\n    ]\n}\n</code></pre>"},{"location":"features/mcp-integration/#post-execute","title":"POST /execute","text":"<p>Executes a tool:</p> <p>Request:</p> <pre><code>{\n    \"tool\": \"get_products\",\n    \"arguments\": {\"limit\": 10}\n}\n</code></pre> <p>Response:</p> <pre><code>{\n    \"result\": [\n        {\"id\": 1, \"name\": \"Product A\"},\n        {\"id\": 2, \"name\": \"Product B\"}\n    ]\n}\n</code></pre>"},{"location":"features/mcp-integration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/mcp-integration/#common-errors","title":"Common Errors","text":"Error Solution <code>Connection error</code> Check server is running, endpoint URL is correct <code>HTTP 401</code> Verify auth credentials <code>HTTP 404</code> Server doesn't implement <code>/tools</code> or <code>/execute</code>"},{"location":"features/mcp-integration/#checking-sync-status","title":"Checking Sync Status","text":"<p>View <code>last_synced</code> and <code>last_error</code> in Admin \u2192 MCP Servers.</p>"},{"location":"features/rag/","title":"RAG Subsystem (Retrieval-Augmented Generation)","text":"<p>The RAG subsystem provides a unified interface for managing knowledge sources and creating high-performance retrieval APIs. It creates an abstraction layer over various retrieval backends, allowing you to switch between external services and local vector stores without changing your application code.</p>"},{"location":"features/rag/#architecture","title":"\ud83c\udfd7 Architecture","text":"<p>The system is built on a Provider Pattern:</p> <ol> <li>Knowledge Sources: Define where data lives (e.g., External Service, Milvus, Postgres).</li> <li>RAG Endpoints: Define how to query it. Each endpoint has a unique slug and access control policy.</li> <li>Retrieval Providers: Handle the execution logic (HTTP proxy, Vector Search, etc.).</li> </ol>"},{"location":"features/rag/#quickstart","title":"\ud83d\ude80 Quickstart","text":""},{"location":"features/rag/#1-external-gateway-proxy","title":"1. External Gateway (Proxy)","text":"<p>Use this mode to securely proxy queries to an existing RAG microservice.</p> <ol> <li> <p>Create Knowledge Source:</p> <ul> <li>Type: <code>External RAG Service</code></li> <li>Config: <code>{\"base_url\": \"https://my-rag-service.com\"}</code></li> <li>Credentials: <code>env://MY_SERVICE_API_KEY</code></li> </ul> </li> <li> <p>Create RAG Endpoint:</p> <ul> <li>Slug: <code>my-service-proxy</code></li> <li>Source: Link to the source created above.</li> </ul> </li> <li> <p>Query:     <code>bash     POST /api/rag/my-service-proxy/query     { \"query\": \"hello\", \"top_k\": 3 }</code></p> </li> </ol>"},{"location":"features/rag/#2-local-indexing-native","title":"2. Local Indexing (Native)","text":"<p>Use this mode to run RAG entirely within Django using Milvus or PGVector.</p>"},{"location":"features/rag/#step-a-configure-embedding-model","title":"Step A: Configure Embedding Model","text":"<p>Go to Admin &gt; RAG &gt; Embedding Models: *   Name: <code>OpenAI Ada 002</code> *   Key: <code>openai-ada-002</code> *   Provider: <code>OpenAI</code> *   Config: <code>{\"model_name\": \"text-embedding-ada-002\"}</code> *   Credentials: <code>env://OPENAI_API_KEY</code></p>"},{"location":"features/rag/#step-b-create-knowledge-source","title":"Step B: Create Knowledge Source","text":"<p>Go to Admin &gt; RAG &gt; Knowledge Sources: *   Type: <code>Local Index (Milvus/PGVector)</code> *   Config (Milvus):     <code>json     {         \"vector_store\": \"milvus\",         \"milvus_uri\": \"http://localhost:19530\",         \"collection_name\": \"my_docs\",         \"embedding_model\": \"openai-ada-002\"     }</code> OR Config (PGVector):     <code>json     {         \"vector_store\": \"pgvector\",         \"table_name\": \"my_vector_table\",         \"embedding_model\": \"openai-ada-002\"     }</code></p>"},{"location":"features/rag/#step-c-query","title":"Step C: Query","text":"<p>Create an endpoint pointing to this source and query it normally. The system automatically: 1.  Embeds the query using the configured model. 2.  Searches the vector store. 3.  Returns normalized results.</p>"},{"location":"features/rag/#security","title":"\ud83d\udee1 Security","text":""},{"location":"features/rag/#ssrf-protection","title":"SSRF Protection","text":"<p>All external requests (Webhooks, RAG Proxy) go through a hardened HTTP client that: *   Blocks Private IPs: Prevents access to <code>localhost</code>, <code>127.0.0.1</code>, <code>169.254.x.x</code>, etc. *   Disables Redirects: Prevents redirect-based SSRF attacks. *   Enforces Timeouts: Defaults to 30s. *   Limits Response Size: Prevents DoS via large payloads.</p>"},{"location":"features/rag/#secret-management","title":"Secret Management","text":"<p>Never store raw secrets in configuration. Use SecretRef: *   <code>env://VAR_NAME</code>: Read from environment variable. *   <code>db://secret_name</code>: Read from <code>SecretStore</code> model.</p>"},{"location":"features/rag/#access-control-rbac","title":"Access Control (RBAC)","text":"<p>RAG Endpoints support granular access policies:</p> <pre><code>{\n    \"require_authenticated\": true,\n    \"allowed_groups\": [\"rag_users\", \"staff\"],\n    \"allowed_users\": [\"admin@example.com\"],\n    \"denied_users\": [\"abuser@example.com\"]\n}\n</code></pre>"},{"location":"features/rag/#observability","title":"\ud83d\udcca Observability","text":""},{"location":"features/rag/#query-logs","title":"Query Logs","text":"<p>Every query is logged to <code>RAGQueryLog</code> with: *   Trace ID: Unique correlation ID for the request. *   Latency: End-to-end execution time. *   Results Metadata: Source IDs and scores (content is not logged by default for privacy). *   Policy Decisions: Why a request was allowed or denied.</p>"},{"location":"features/rag/#test-query-ui","title":"Test Query UI","text":"<p>Admin staff can test connections directly from the dashboard: 1.  Go to RAG Endpoints. 2.  Click an endpoint. 3.  Use the \"Test Query\" tab to run live searches and view raw JSON responses.</p>"},{"location":"guides/connectors/","title":"Building Connectors","text":"<p>This guide shows how to build connectors for Django Automate.</p>"},{"location":"guides/connectors/#quick-start","title":"Quick Start","text":"<p>Connectors extend the <code>ConnectorAdapter</code> base class:</p> <pre><code>from automate_connectors.adapters.base import ConnectorAdapter\n\nclass MyServiceAdapter(ConnectorAdapter):\n    \"\"\"Adapter for MyService integration.\"\"\"\n\n    name = \"my_service\"\n    version = \"1.0.0\"\n\n    def connect(self) -&gt; bool:\n        \"\"\"Test connectivity to the service.\"\"\"\n        # Return True if service is reachable\n        return True\n\n    def execute(self, action: str, payload: dict) -&gt; dict:\n        \"\"\"Execute an action on the service.\"\"\"\n        if action == \"send_message\":\n            return self._send_message(payload)\n        raise ValueError(f\"Unknown action: {action}\")\n\n    def _send_message(self, payload: dict) -&gt; dict:\n        # Implementation here\n        return {\"status\": \"sent\"}\n</code></pre>"},{"location":"guides/connectors/#registration","title":"Registration","text":"<p>Register your adapter in the connector registry:</p> <pre><code>from automate_connectors.registry import connector_registry\n\nconnector_registry.register(\"my_service\", MyServiceAdapter)\n</code></pre> <p>Or use entry points in <code>pyproject.toml</code>:</p> <pre><code>[project.entry-points.\"automate.connectors\"]\nmy_service = \"my_package.adapters:MyServiceAdapter\"\n</code></pre>"},{"location":"guides/connectors/#testing","title":"Testing","text":"<p>Use the official test harness:</p> <pre><code>from automate_connectors.testing import ConnectorTestCase\n\nclass TestMyServiceAdapter(ConnectorTestCase):\n    adapter_class = MyServiceAdapter\n\n    def test_connect(self):\n        adapter = self.get_adapter()\n        assert adapter.connect() is True\n\n    def test_send_message(self):\n        adapter = self.get_adapter()\n        result = adapter.execute(\"send_message\", {\"text\": \"Hello\"})\n        assert result[\"status\"] == \"sent\"\n</code></pre>"},{"location":"guides/connectors/#built-in-adapters","title":"Built-in Adapters","text":"<p>Django Automate includes these adapters:</p> Adapter Module Description Slack <code>automate_connectors.adapters.slack</code> Slack messaging Logging <code>automate_connectors.adapters.logging</code> Debug logging"},{"location":"guides/connectors/#adapter-lifecycle","title":"Adapter Lifecycle","text":"<pre><code>flowchart LR\n    A[Register] --&gt; B[Instantiate]\n    B --&gt; C[connect()]\n    C --&gt; D{Connected?}\n    D --&gt;|Yes| E[execute()]\n    D --&gt;|No| F[Retry/Error]\n    E --&gt; G[Return Result]\n</code></pre>"},{"location":"guides/connectors/#best-practices","title":"Best Practices","text":"<ol> <li>Single Responsibility: One adapter per external service</li> <li>Idempotent Actions: <code>execute()</code> should be safe to retry</li> <li>Structured Errors: Raise <code>ConnectorError</code> subclasses</li> <li>Health Checks: Implement <code>connect()</code> for monitoring</li> <li>Secrets: Use <code>ConnectionProfile</code> for credentials</li> </ol>"},{"location":"guides/customization/","title":"Customization Guide","text":"<p>This guide covers how to customize and extend Django Automate components.</p>"},{"location":"guides/customization/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Configuration via Settings</li> <li>Extending Base Classes</li> <li>Custom ViewSets</li> <li>Custom Serializers</li> <li>Custom Permissions</li> <li>Service Layer Customization</li> <li>Custom Providers</li> </ol>"},{"location":"guides/customization/#configuration-via-settings","title":"Configuration via Settings","text":"<p>All Django Automate components are configurable via Django settings.</p>"},{"location":"guides/customization/#api-settings","title":"API Settings","text":"<pre><code># settings.py\n\nAUTOMATE_API = {\n    # Pagination\n    'PAGINATION_PAGE_SIZE': 50,\n\n    # Rate Limiting\n    'RATE_LIMIT_PER_MINUTE': 120,\n\n    # CORS\n    'CORS_ALLOWED_ORIGINS': ['https://example.com'],\n    'CORS_ALLOWED_METHODS': ['GET', 'POST', 'PUT', 'DELETE'],\n    'CORS_ALLOWED_HEADERS': ['Content-Type', 'Authorization', 'X-API-Key'],\n\n    # Authentication\n    'API_KEY_HEADER': 'X-API-Key',\n    'BEARER_TOKEN_HEADER': 'Authorization',\n\n    # Schema Inspection\n    'SCHEMA_EXCLUDED_APPS': ['admin', 'contenttypes', 'sessions'],\n\n    # Throttling\n    'THROTTLE_RATES': {\n        'tenant': '120/min',\n        'token': '60/min',\n    },\n}\n</code></pre>"},{"location":"guides/customization/#datachat-settings","title":"DataChat Settings","text":"<pre><code>AUTOMATE_DATACHAT = {\n    'HISTORY_PAGE_SIZE': 20,\n    'EMBED_RATE_LIMIT': 60,\n    'EMBED_MAX_MESSAGE_LENGTH': 1000,\n}\n</code></pre>"},{"location":"guides/customization/#rag-settings","title":"RAG Settings","text":"<pre><code>AUTOMATE_RAG = {\n    'DEFAULT_TOP_K': 5,\n    'MAX_TOP_K': 100,\n    'QUERY_TIMEOUT_SECONDS': 30,\n}\n</code></pre>"},{"location":"guides/customization/#llm-settings","title":"LLM Settings","text":"<pre><code>AUTOMATE_LLM = {\n    'DEFAULT_PROVIDER': 'openai',\n    'DEFAULT_MODEL': 'gpt-4',\n    'MAX_RETRIES': 3,\n    'TIMEOUT_SECONDS': 60,\n}\n</code></pre>"},{"location":"guides/customization/#extending-base-classes","title":"Extending Base Classes","text":""},{"location":"guides/customization/#baseviewset","title":"BaseViewSet","text":"<p>All ViewSets inherit from configurable base classes.</p> <pre><code>from automate_api.v1.base import BaseViewSet\n\nclass MyCustomViewSet(BaseViewSet):\n    \"\"\"\n    Custom ViewSet with inherited:\n    - Authentication\n    - Permission checking\n    - Rate limiting\n    - Tenant filtering\n    - Pagination\n    \"\"\"\n    pass\n</code></pre>"},{"location":"guides/customization/#available-base-classes","title":"Available Base Classes","text":"Class Purpose Features <code>BaseAPIView</code> Single-endpoint views Auth, permissions, throttling <code>BaseViewSet</code> ViewSet operations + pagination, tenant filter <code>BaseModelViewSet</code> CRUD operations + queryset, serializer <code>BaseReadOnlyViewSet</code> Read-only resources List and retrieve only"},{"location":"guides/customization/#mixins","title":"Mixins","text":"<pre><code>from automate_api.v1.base import CORSMixin, TenantFilterMixin, RateLimitMixin\n\nclass MyAPIView(CORSMixin, BaseAPIView):\n    \"\"\"View with CORS support.\"\"\"\n    cors_allowed_origins = ['https://mysite.com']\n\nclass MyViewSet(TenantFilterMixin, BaseViewSet):\n    \"\"\"ViewSet with automatic tenant filtering.\"\"\"\n    tenant_field = 'organization_id'  # Custom field name\n\nclass RateLimitedView(RateLimitMixin, BaseAPIView):\n    \"\"\"View with custom rate limiting.\"\"\"\n    rate_limit_per_minute = 30\n</code></pre>"},{"location":"guides/customization/#custom-viewsets","title":"Custom ViewSets","text":""},{"location":"guides/customization/#overriding-chatviewset","title":"Overriding ChatViewSet","text":"<pre><code>from automate_datachat.viewsets import ChatViewSet\nfrom myapp.orchestrators import MyOrchestrator\n\nclass MyChatViewSet(ChatViewSet):\n    \"\"\"Custom chat with different orchestrator.\"\"\"\n\n    # Override orchestrator\n    orchestrator_class = MyOrchestrator\n\n    # Override history page size\n    history_page_size = 25\n\n    def get_orchestrator_class(self):\n        \"\"\"Dynamic orchestrator selection.\"\"\"\n        if self.request.user.is_superuser:\n            return SuperOrchestrator\n        return self.orchestrator_class\n</code></pre>"},{"location":"guides/customization/#overriding-workflowviewset","title":"Overriding WorkflowViewSet","text":"<pre><code>from automate.api.viewsets import WorkflowViewSet\nfrom myapp.services import MyWorkflowService\n\nclass MyWorkflowViewSet(WorkflowViewSet):\n    \"\"\"Custom workflow handling.\"\"\"\n\n    service_class = MyWorkflowService\n\n    def create(self, request):\n        \"\"\"Add custom logic before creation.\"\"\"\n        # Pre-processing\n        self.validate_quota(request.user)\n\n        # Call parent\n        return super().create(request)\n</code></pre>"},{"location":"guides/customization/#overriding-ragqueryviewset","title":"Overriding RAGQueryViewSet","text":"<pre><code>from rag.api.viewsets import RAGQueryViewSet\n\nclass MyRAGViewSet(RAGQueryViewSet):\n    \"\"\"Custom RAG with enhanced logging.\"\"\"\n\n    default_top_k = 10\n\n    def build_query_context(self, request, endpoint, trace_id):\n        \"\"\"Add custom context fields.\"\"\"\n        ctx = super().build_query_context(request, endpoint, trace_id)\n        ctx.custom_field = request.headers.get('X-Custom')\n        return ctx\n\n    def log_query(self, **kwargs):\n        \"\"\"Enhanced logging.\"\"\"\n        super().log_query(**kwargs)\n        send_to_analytics(kwargs)\n</code></pre>"},{"location":"guides/customization/#custom-serializers","title":"Custom Serializers","text":""},{"location":"guides/customization/#extending-serializers","title":"Extending Serializers","text":"<pre><code>from automate_datachat.serializers import ChatRequestSerializer\n\nclass ExtendedChatRequestSerializer(ChatRequestSerializer):\n    \"\"\"Chat request with additional fields.\"\"\"\n\n    session_id = serializers.UUIDField(required=False)\n    metadata = serializers.DictField(required=False)\n\n    def validate_question(self, value):\n        \"\"\"Custom validation.\"\"\"\n        if len(value) &lt; 5:\n            raise serializers.ValidationError(\"Question too short\")\n        return value\n</code></pre>"},{"location":"guides/customization/#using-custom-serializers","title":"Using Custom Serializers","text":"<pre><code>class MyChatViewSet(ChatViewSet):\n    serializer_class = ExtendedChatRequestSerializer\n</code></pre>"},{"location":"guides/customization/#custom-permissions","title":"Custom Permissions","text":""},{"location":"guides/customization/#creating-permissions","title":"Creating Permissions","text":"<pre><code>from rest_framework import permissions\n\nclass IsProjectMember(permissions.BasePermission):\n    \"\"\"Check if user is member of the project.\"\"\"\n\n    message = \"Must be a project member.\"\n\n    def has_permission(self, request, view):\n        project_id = request.headers.get('X-Project-ID')\n        return request.user.projects.filter(id=project_id).exists()\n\nclass HasPremiumPlan(permissions.BasePermission):\n    \"\"\"Check if user has premium plan.\"\"\"\n\n    def has_permission(self, request, view):\n        return request.user.subscription.is_premium\n</code></pre>"},{"location":"guides/customization/#using-custom-permissions","title":"Using Custom Permissions","text":"<pre><code>class MyViewSet(BaseViewSet):\n    permission_classes = [IsProjectMember, HasPremiumPlan]\n</code></pre>"},{"location":"guides/customization/#composing-permissions","title":"Composing Permissions","text":"<pre><code>from rest_framework.permissions import AND, OR\n\nclass MyViewSet(BaseViewSet):\n    permission_classes = [\n        (IsProjectMember &amp; HasPremiumPlan) | IsSuperUser\n    ]\n</code></pre>"},{"location":"guides/customization/#service-layer-customization","title":"Service Layer Customization","text":""},{"location":"guides/customization/#custom-workflow-service","title":"Custom Workflow Service","text":"<pre><code>from automate.services import WorkflowService\n\nclass MyWorkflowService(WorkflowService):\n    \"\"\"Custom workflow logic.\"\"\"\n\n    trigger_type_map = {\n        **WorkflowService.trigger_type_map,\n        'custom_event': 'custom',\n    }\n\n    def create_automation(self, name, slug):\n        \"\"\"Add custom fields to automation.\"\"\"\n        automation = super().create_automation(name, slug)\n        automation.custom_field = 'value'\n        automation.save()\n        return automation\n\n    def create_trigger(self, automation, trigger_config):\n        \"\"\"Custom trigger setup.\"\"\"\n        super().create_trigger(automation, trigger_config)\n\n        if trigger_config.get('event_type') == 'custom_event':\n            self.setup_custom_trigger(automation, trigger_config)\n</code></pre>"},{"location":"guides/customization/#custom-providers","title":"Custom Providers","text":""},{"location":"guides/customization/#llm-provider","title":"LLM Provider","text":"<pre><code>from automate_llm.providers import BaseLLMProvider\n\nclass MyLLMProvider(BaseLLMProvider):\n    \"\"\"Custom LLM provider.\"\"\"\n\n    name = 'my_llm'\n\n    def generate(self, prompt, **kwargs):\n        \"\"\"Generate completion.\"\"\"\n        return my_api.complete(prompt)\n\n    def validate_config(self, config):\n        \"\"\"Validate provider config.\"\"\"\n        if 'api_key' not in config:\n            raise ValueError(\"API key required\")\n</code></pre>"},{"location":"guides/customization/#registering-providers","title":"Registering Providers","text":"<pre><code># In your app's apps.py\nclass MyAppConfig(AppConfig):\n    def ready(self):\n        from automate_llm.providers import register_provider\n        from .providers import MyLLMProvider\n\n        register_provider('my_llm', MyLLMProvider)\n</code></pre>"},{"location":"guides/customization/#using-entry-points","title":"Using Entry Points","text":"<pre><code># pyproject.toml\n[project.entry-points.\"automate.llm_providers\"]\nmy_llm = \"myapp.providers:MyLLMProvider\"\n</code></pre>"},{"location":"guides/customization/#url-configuration","title":"URL Configuration","text":""},{"location":"guides/customization/#registering-custom-viewsets","title":"Registering Custom ViewSets","text":"<pre><code># urls.py\nfrom django.urls import include, path\nfrom rest_framework.routers import DefaultRouter\n\nfrom myapp.viewsets import MyChatViewSet, MyWorkflowViewSet\n\nrouter = DefaultRouter()\nrouter.register('chat', MyChatViewSet, basename='custom-chat')\nrouter.register('workflows', MyWorkflowViewSet, basename='custom-workflows')\n\nurlpatterns = [\n    path('api/v1/', include(router.urls)),\n]\n</code></pre>"},{"location":"guides/customization/#examples","title":"Examples","text":""},{"location":"guides/customization/#complete-custom-implementation","title":"Complete Custom Implementation","text":"<pre><code># myapp/viewsets.py\nfrom automate_api.v1.base import BaseViewSet, CORSMixin\nfrom automate_datachat.viewsets import ChatViewSet\n\nclass EnterpriseDataChatViewSet(CORSMixin, ChatViewSet):\n    \"\"\"Enterprise DataChat with custom features.\"\"\"\n\n    # Configuration\n    cors_allowed_origins = ['https://internal.company.com']\n    history_page_size = 50\n\n    # Custom orchestrator\n    from myapp.orchestrators import EnterpriseOrchestrator\n    orchestrator_class = EnterpriseOrchestrator\n\n    def check_permissions(self, request):\n        \"\"\"Add IP whitelist check.\"\"\"\n        super().check_permissions(request)\n\n        allowed_ips = ['10.0.0.0/8']\n        client_ip = request.META.get('REMOTE_ADDR')\n\n        if not is_in_cidr(client_ip, allowed_ips):\n            self.permission_denied(request, message=\"IP not allowed\")\n</code></pre>"},{"location":"guides/customization/#settings-driven-configuration","title":"Settings-Driven Configuration","text":"<pre><code># settings.py\nAUTOMATE_API = {\n    'CORS_ALLOWED_ORIGINS': os.environ.get('CORS_ORIGINS', '*').split(','),\n    'RATE_LIMIT_PER_MINUTE': int(os.environ.get('RATE_LIMIT', 60)),\n}\n\nAUTOMATE_DATACHAT = {\n    'HISTORY_PAGE_SIZE': int(os.environ.get('CHAT_HISTORY_SIZE', 15)),\n}\n</code></pre> <p>All ViewSets will automatically use these settings without code changes.</p>"},{"location":"guides/first_automation/","title":"Your First Automation","text":"<p>Let's build a simple automation that logs a message when you trigger it manually.</p>"},{"location":"guides/first_automation/#1-create-automation","title":"1. Create Automation","text":"<ol> <li>Go to Admin &gt; Automations.</li> <li>Click Add Automation.</li> <li>Name: <code>Hello World</code></li> <li>Slug: <code>hello-world</code></li> <li>Enabled: Checked.</li> <li>Click Save.</li> </ol>"},{"location":"guides/first_automation/#2-add-trigger","title":"2. Add Trigger","text":"<ol> <li>On the Automation page, scroll to Trigger Specs.</li> <li>Click Add another Trigger Spec.</li> <li>Type: <code>Manual</code></li> <li>Config: <code>{}</code> (Empty JSON)</li> <li>Enabled: Checked.</li> <li>Click Save.</li> </ol>"},{"location":"guides/first_automation/#3-define-workflow","title":"3. Define Workflow","text":"<ol> <li>Go to Admin &gt; Workflows.</li> <li>Click Add Workflow.</li> <li>Automation: Select <code>Hello World</code>.</li> <li>Version: <code>1</code></li> <li>Is Live: Checked.</li> <li>Graph: Paste the following JSON:    <code>json    {      \"nodes\": [        {          \"id\": \"step1\",          \"type\": \"logging\",          \"config\": {            \"msg\": \"Hello from Django Automate! Payload: {{ event.payload }}\"          },          \"next\": []        }      ],      \"edges\": []    }</code></li> <li>Click Save.</li> </ol>"},{"location":"guides/first_automation/#4-test-it","title":"4. Test It","text":"<ol> <li>Use the Manual Trigger API (via Swagger or curl):    <code>bash    curl -X POST http://localhost:8000/automate/manual \\      -H \"Content-Type: application/json\" \\      -d '{\"event\": \"hello-world\", \"payload\": {\"name\": \"User\"}}'</code></li> <li>Check Admin &gt; Executions. You should see a successful execution!</li> </ol>"},{"location":"guides/graph_schema/","title":"Graph Schema","text":"<p>Workflow graphs are defined in JSON.</p>"},{"location":"guides/graph_schema/#structure","title":"Structure","text":"<pre><code>{\n  \"nodes\": [\n    {\n      \"id\": \"STEP_ID\",\n      \"type\": \"CONNECTOR_SLUG\",\n      \"config\": { ... },\n      \"next\": [\"NEXT_STEP_ID\"]\n    }\n  ],\n  \"edges\": [] // Currently unused in MVP (Implicit via 'next')\n}\n</code></pre>"},{"location":"guides/graph_schema/#node-types","title":"Node Types","text":"<ul> <li><code>logging</code>: Logs a message.<ul> <li><code>config</code>: <code>{\"msg\": \"template string\"}</code></li> </ul> </li> <li><code>slack</code>: Posts to Slack.<ul> <li><code>config</code>: <code>{\"channel\": \"#name\", \"text\": \"template string\"}</code></li> </ul> </li> <li><code>n8n</code>: Triggers n8n webhook.<ul> <li><code>config</code>: <code>{\"webhook_id\": \"uuid\", \"payload\": {}}</code></li> </ul> </li> <li><code>webhook</code>: Generic HTTP Request.<ul> <li><code>config</code>: <code>{\"url\": \"...\", \"method\": \"POST\", \"headers\": {}, \"json\": {}}</code></li> </ul> </li> </ul>"},{"location":"guides/graph_schema/#templating","title":"Templating","text":"<p>All config values support Jinja2 templating. - <code>{{ event.payload }}</code>: The raw event data. - <code>{{ event.source }}</code>: Event source.</p>"},{"location":"how-to/connectors/write-custom-connector/","title":"Writing a Custom Connector","text":"<p>To integrate with a proprietary internal system, you can write a custom Connector Adapter.</p>"},{"location":"how-to/connectors/write-custom-connector/#1-the-adapter-definition","title":"1. The Adapter Definition","text":"<p>Create a class inheriting from <code>ConnectorAdapter</code>.</p> <pre><code># my_app/adapters.py\nfrom automate_connectors.adapters.base import ConnectorAdapter, ActionSpec\nfrom automate_connectors.models import ConnectorError\n\nclass LegacyERPAdapter(ConnectorAdapter):\n    code = \"legacy_erp\"\n    name = \"Legacy ERP System\"\n    description = \"Integration with the on-prem SOAP ERP.\"\n\n    # Define the inputs/outputs for the UI\n    actions = {\n        \"create_order\": ActionSpec(\n            inputs={\n                \"customer_id\": {\"type\": \"string\", \"required\": True},\n                \"items\": {\"type\": \"array\", \"required\": True}\n            },\n            outputs={\n                \"order_id\": {\"type\": \"string\"}\n            }\n        )\n    }\n\n    def execute(self, action: str, params: dict, context: dict):\n        if action == \"create_order\":\n            try:\n                # context['secrets'] is automatically populated\n                api_key = context['secrets'].get('API_KEY')\n\n                result = self._soap_client.create_order(key=api_key, **params)\n                return {\"order_id\": result.id}\n            except Exception as e:\n                # Wrap unknowns in NormalizedError\n                raise ConnectorError(f\"ERP Failed: {str(e)}\", retryable=True)\n\n        raise NotImplementedError(f\"Action {action} unknown\")\n</code></pre>"},{"location":"how-to/connectors/write-custom-connector/#2-registration","title":"2. Registration","text":"<p>Register specific adapters in your <code>AppConfig</code> or via <code>entry_points</code>.</p> <pre><code>from automate_connectors.registry import register_connector\n\n@register_connector\nclass LegacyERPAdapter...\n</code></pre>"},{"location":"how-to/llm/provider-profiles/","title":"LLM Providers &amp; Profiles","text":"<p>Manage how you connect to AI models.</p>"},{"location":"how-to/llm/provider-profiles/#provider-adapters","title":"Provider Adapters","text":"<p>We support: *   <code>openai</code> *   <code>anthropic</code> *   <code>gemini</code> (Google)</p>"},{"location":"how-to/llm/provider-profiles/#connection-profiles","title":"Connection Profiles","text":"<p>A Connection Profile stores the configuration (model name, temperature) and secrets (API Key) separately. 1.  Go to Admin &gt; Governance &gt; Connection Profiles. 2.  Create new profile \"Production GPT-4\". 3.  Config: <code>{\"model\": \"gpt-4-turbo\", \"temperature\": 0.0}</code>. 4.  Secrets: <code>{\"api_key\": \"sk-...\"}</code> (Redacted).</p>"},{"location":"how-to/llm/provider-profiles/#using-profiles","title":"Using Profiles","text":"<p>In your workflow or prompt configuration, reference the profile by name: <code>\"profile\": \"production-gpt-4\"</code></p> <p>This allows you to switch models globally without editing 100 different workflows.</p>"},{"location":"how-to/rules/jsonlogic-subset/","title":"Writing Rules (JsonLogic)","text":"<p>We use a subset of JsonLogic to match events to workflows.</p>"},{"location":"how-to/rules/jsonlogic-subset/#supported-operators","title":"Supported Operators","text":""},{"location":"how-to/rules/jsonlogic-subset/#comparison","title":"Comparison","text":"<ul> <li><code>==</code>, <code>!=</code>: Equality</li> <li><code>&gt;</code>, <code>&gt;=</code>: Numeric comparison</li> <li><code>&lt;</code>, <code>&lt;=</code>: Numeric comparison</li> </ul>"},{"location":"how-to/rules/jsonlogic-subset/#logic","title":"Logic","text":"<ul> <li><code>and</code>: All must be true</li> <li><code>or</code>: At least one true</li> <li><code>!</code>: Not</li> </ul>"},{"location":"how-to/rules/jsonlogic-subset/#data-access","title":"Data Access","text":"<p>Use <code>var</code> to access event data. *   <code>{\"var\": \"type\"}</code> -&gt; <code>event.type</code> *   <code>{\"var\": \"data.user.id\"}</code> -&gt; <code>event.payload['data']['user']['id']</code></p>"},{"location":"how-to/rules/jsonlogic-subset/#examples","title":"Examples","text":"<p>Match specific event type AND high value:</p> <pre><code>{\n  \"and\": [\n    { \"==\": [{ \"var\": \"type\" }, \"order.created\"] },\n    { \"&gt;\": [{ \"var\": \"data.amount\" }, 1000] }\n  ]\n}\n</code></pre> <p>Match one of a list:</p> <pre><code>{\n  \"in\": [{ \"var\": \"data.status\" }, [\"failed\", \"error\"]]\n}\n</code></pre>"},{"location":"how-to/secrets/backends/","title":"Secrets Backends","text":"<p>Automate supports pluggable backends for secret resolution.</p>"},{"location":"how-to/secrets/backends/#1-envbackend-default","title":"1. EnvBackend (Default)","text":"<p>Reads from process environment variables. *   Pros: Fast, standard 12-factor app pattern. *   Cons: Requires restart to change (usually).</p> <pre><code>\"SECRETS\": {\n    \"backend\": \"automate_governance.secrets.backends.EnvBackend\",\n    \"prefix\": \"AUTOMATE_\"\n}\n</code></pre>"},{"location":"how-to/secrets/backends/#2-encrypteddbbackend","title":"2. EncryptedDBBackend","text":"<p>Stores secrets in the Postgres database, encrypted at rest using Fernet (symmetric encryption). *   Pros: Rotation via Admin UI, no restarts. *   Cons: Database access = Secret access (if encryption key is also on server).</p>"},{"location":"how-to/secrets/backends/#3-hashicorp-vault-enterprise","title":"3. HashiCorp Vault (Enterprise)","text":"<p>Connects to a remote Vault instance. *   Pros: Centralized audit, dynamic leases. *   Cons: Infrastructure complexity.</p>"},{"location":"how-to/secrets/rotation/","title":"Rotating Secrets","text":"<p>Regularly rotating API keys is security best practice. Automate makes this zero-downtime.</p>"},{"location":"how-to/secrets/rotation/#1-zero-downtime-rotation-env-backend","title":"1. Zero-Downtime Rotation (Env Backend)","text":"<ol> <li>Generate new key in the external provider (e.g. Stripe).</li> <li>Add new Env Var: <code>export AUTOMATE_STRIPE_KEY_V2=\"sk_live_new...\"</code>.</li> <li>Update Workflow: Change the <code>SecretRef</code> in your workflow definition:     <code>json     { \"$secret\": \"STRIPE_KEY_V2\" }</code></li> <li>Deploy/Publish: The next run will uses V2.</li> <li>Revoke Old Key: Once all V1 workflows have finished.</li> </ol>"},{"location":"how-to/secrets/rotation/#2-stored-secrets-db-backend","title":"2. Stored Secrets (DB Backend)","text":"<p>If using <code>EncryptedDBBackend</code>: 1.  Go to Admin &gt; Governance &gt; Stored Secrets. 2.  Find <code>STRIPE_KEY</code>. 3.  Click Rotate Secret. 4.  Paste the new value. 5.  Save.     *   The <code>SecretRef</code> name (<code>STRIPE_KEY</code>) stays the same.     *   All workflows use the new value immediately.     *   No workflow edit required.</p>"},{"location":"how-to/secrets/secretref/","title":"Using SecretRefs","text":"<p>NEVER hardcode secrets (API keys, tokens, passwords) in your workflow definitions. Use <code>SecretRef</code> pointers.</p>"},{"location":"how-to/secrets/secretref/#how-it-works","title":"How it works","text":"<p>A <code>SecretRef</code> is a string pointer in the format <code>{\"$secret\": \"KEY_NAME\"}</code>. At runtime, the execution engine intercepts this pattern and resolves it using the configured Secrets Backend before passing it to the Connector.</p>"},{"location":"how-to/secrets/secretref/#step-by-step","title":"Step-by-Step","text":""},{"location":"how-to/secrets/secretref/#1-configure-the-backend","title":"1. Configure the Backend","text":"<p>In <code>settings.py</code>, choose your backend. The default is <code>EnvBackend</code>, which reads from environment variables.</p> <pre><code>DJANGO_AUTOMATE = {\n    \"SECRETS\": {\n        \"backend\": \"automate_governance.secrets.backends.EnvBackend\",\n        \"prefix\": \"AUTOMATE_\", \n    }\n}\n</code></pre>"},{"location":"how-to/secrets/secretref/#2-set-the-environment-variable","title":"2. Set the Environment Variable","text":"<p>Export your secret with the matching prefix.</p> <pre><code>export AUTOMATE_STRIPE_LIVE_KEY=\"sk_live_12345abcdef\"\n</code></pre>"},{"location":"how-to/secrets/secretref/#3-use-in-workflow","title":"3. Use in Workflow","text":"<p>In your JSON definition or the Studio Wizard:</p> <pre><code>\"headers\": {\n    \"Authorization\": \"Bearer {{$secret.STRIPE_LIVE_KEY}}\"\n}\n</code></pre> <p>[!NOTE] Security: The resolved value \"sk_live_...\" is never saved to the database. It exists in memory only during the split-second execution of the step.</p>"},{"location":"how-to/secrets/secretref/#next-steps","title":"Next Steps","text":"<ul> <li>Rotate Secrets</li> <li>Use Encrypted DB Backend</li> </ul>"},{"location":"quickstart/first-automation/","title":"Your First Automation","text":"<p>In this guide, we will build a simple \"Webhook -&gt; LLM -&gt; Log\" automation.</p>"},{"location":"quickstart/first-automation/#prerequisites","title":"Prerequisites","text":"<p>Ensure you have a running stack:</p> <pre><code>make dev\n</code></pre>"},{"location":"quickstart/first-automation/#step-1-create-automation","title":"Step 1: Create Automation","text":"<ol> <li>Open Admin Studio: http://localhost:8000/admin/</li> <li>Navigate to Automations &gt; Add Automation.</li> <li>Name: <code>Welcome Bot</code>, Slug: <code>welcome-bot</code>.</li> <li>Tenant ID: <code>default</code>.</li> </ol>"},{"location":"quickstart/first-automation/#step-2-add-trigger","title":"Step 2: Add Trigger","text":"<ol> <li>Navigate to Triggers &gt; Add Trigger.</li> <li>Automation: <code>Welcome Bot</code>.</li> <li>Type: <code>Webhook</code>.</li> <li>Event Type: <code>user.signup</code>.</li> <li>Save.</li> </ol>"},{"location":"quickstart/first-automation/#step-3-define-workflow","title":"Step 3: Define Workflow","text":"<ol> <li>Navigate to Workflows &gt; Add Workflow.</li> <li>Automation: <code>Welcome Bot</code>.</li> <li>Version: <code>1</code>.</li> <li>Graph (JSON):    <code>json    {      \"steps\": [        {          \"id\": \"stats\",          \"action\": \"llm.chat\",          \"params\": {            \"prompt\": \"Say hello to {{ event.payload.name }}\",            \"model\": \"gpt-4\"          }        }      ]    }</code></li> <li>Check <code>Is Live</code> and Save.</li> </ol>"},{"location":"quickstart/first-automation/#step-4-test","title":"Step 4: Test","text":"<p>Send a webhook:</p> <pre><code>curl -X POST http://localhost:8000/api/v1/webhooks/default/user.signup \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Alice\"}'\n</code></pre> <p>Check the Dashboard or Executions tab in Admin Studio to see the result!</p>"},{"location":"quickstart/install/","title":"Installation &amp; Configuration","text":""},{"location":"quickstart/install/#1-what-youll-build","title":"1. What you'll build","text":"<p>A properly configured Django project ready for automation, with the database schema and admin interface enabled.</p>"},{"location":"quickstart/install/#2-prerequisites","title":"2. Prerequisites","text":"<ul> <li>Python 3.10+</li> <li>Django 4.2+ project</li> <li>(Recommended) Postgres database</li> </ul>"},{"location":"quickstart/install/#3-steps","title":"3. Steps","text":""},{"location":"quickstart/install/#install-the-package","title":"Install the Package","text":"<pre><code>pip install django-automate\n</code></pre>"},{"location":"quickstart/install/#configure-settings","title":"Configure Settings","text":"<p>Add the apps to your <code>INSTALLED_APPS</code> in <code>settings.py</code>:</p> <pre><code>INSTALLED_APPS = [\n    # ... django apps ...\n    'automate', \n    'automate_core',\n    'automate_governance',\n    'automate_llm',\n    'automate_studio',\n    'automate_observability',\n    'rest_framework',\n]\n</code></pre> <p>Add the minimal configuration:</p> <pre><code>DJANGO_AUTOMATE = {\n    \"ENABLED\": True,\n    \"SECRET_KEY_PREFIX\": \"AUTOMATE_\", \n    \"EXECUTION\": {\n        \"timeout_seconds\": 60,\n        \"max_retries\": 3,\n    }\n}\n</code></pre>"},{"location":"quickstart/install/#url-routing","title":"URL Routing","text":"<p>Add the studio and API routes to <code>urls.py</code>:</p> <pre><code>from django.urls import path, include\n\nurlpatterns = [\n    # ...\n    path('studio/', include('automate_studio.urls')),\n    path('api/automate/', include('automate_core.urls')),\n]\n</code></pre>"},{"location":"quickstart/install/#run-migrations","title":"Run Migrations","text":"<pre><code>python manage.py migrate\n</code></pre>"},{"location":"quickstart/install/#4-expected-output","title":"4. Expected Output","text":"<p>Run the server:</p> <pre><code>python manage.py runserver\n</code></pre> <p>Visit <code>http://localhost:8000/studio/wizard/</code>. You should see the Automation Studio.</p>"},{"location":"quickstart/install/#5-next-steps","title":"5. Next Steps","text":"<ul> <li>Create your first automation</li> </ul>"},{"location":"reference/admin/","title":"Admin Reference","text":"<p>Complete reference for all Django Automate admin classes.</p>"},{"location":"reference/admin/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Base Classes</li> <li>Mixins</li> <li>Admin Classes by Module</li> <li>Customization Guide</li> </ol>"},{"location":"reference/admin/#base-classes","title":"Base Classes","text":"<p>Import: <code>from automate_core.base import BaseModelAdmin, TenantScopedAdmin</code></p>"},{"location":"reference/admin/#basemodeladmin","title":"BaseModelAdmin","text":"<p>Base admin with sensible defaults and common utilities.</p> <pre><code>from automate_core.base import BaseModelAdmin\n\n@admin.register(MyModel)\nclass MyModelAdmin(BaseModelAdmin):\n    list_display = ['name', 'status']\n    search_fields = ['name']\n</code></pre> Attribute Default Description <code>list_per_page</code> 25 Records per page <code>date_hierarchy</code> <code>'created_at'</code> Date navigation <code>save_on_top</code> True Show save buttons at top <code>show_timestamps</code> True Show created_at/updated_at <code>timestamp_readonly</code> True Make timestamps read-only <p>Utility Methods: - <code>link_to_object(obj, label)</code>: Generate link to related object - <code>colored_status(status, colors)</code>: Render colored status - <code>truncated_field(value, max_length)</code>: Truncate long values</p>"},{"location":"reference/admin/#tenantscopedadmin","title":"TenantScopedAdmin","text":"<p>Admin with automatic tenant filtering.</p> <pre><code>from automate_core.base import TenantScopedAdmin\n\n@admin.register(MyTenantModel)\nclass MyTenantModelAdmin(TenantScopedAdmin):\n    tenant_field = 'organization_id'\n    show_tenant_column = True\n</code></pre> Attribute Default Description <code>tenant_field</code> <code>'tenant_id'</code> Field to filter by <code>show_tenant_column</code> False Show tenant in list <p>Override Points: - <code>get_tenant_for_request(request)</code>: Custom tenant resolution</p>"},{"location":"reference/admin/#auditablemodeladmin","title":"AuditableModelAdmin","text":"<p>Admin for auditable models with audit fields.</p> <pre><code>from automate_core.base import AuditableModelAdmin\n\n@admin.register(MyAuditableModel)\nclass MyAuditableModelAdmin(AuditableModelAdmin):\n    show_audit_fields = True\n</code></pre> Attribute Default Description <code>audit_fields</code> <code>['created_by', ...]</code> Fields to show <code>show_audit_fields</code> True Display in list"},{"location":"reference/admin/#importexportbaseadmin","title":"ImportExportBaseAdmin","text":"<p>Admin with CSV/JSON import/export.</p> <pre><code>from automate_core.base import ImportExportBaseAdmin\n\n@admin.register(MyModel)\nclass MyModelAdmin(ImportExportBaseAdmin):\n    export_formats = ['csv', 'json']\n</code></pre> Attribute Default Description <code>import_formats</code> <code>['csv']</code> Allowed import formats <code>export_formats</code> <code>['csv', 'json']</code> Export format actions"},{"location":"reference/admin/#softdeleteadmin","title":"SoftDeleteAdmin","text":"<p>Admin for soft-deletable models.</p> <pre><code>from automate_core.base import SoftDeleteAdmin\n\n@admin.register(MySoftDeleteModel)\nclass MySoftDeleteModelAdmin(SoftDeleteAdmin):\n    show_deleted_toggle = True\n</code></pre> Attribute Default Description <code>show_deleted_toggle</code> True Show deleted toggle <code>show_deleted_by_default</code> False Include deleted by default <p>Actions: <code>restore_selected</code> - Restore soft-deleted records</p>"},{"location":"reference/admin/#inlinebaseadmin-stackedinlinebaseadmin","title":"InlineBaseAdmin / StackedInlineBaseAdmin","text":"<p>Base inline admin classes.</p> <pre><code>from automate_core.base import InlineBaseAdmin\n\nclass ItemInline(InlineBaseAdmin):\n    model = Item\n    fields = ['name', 'quantity']\n</code></pre> Attribute Default Description <code>extra</code> 0 Extra blank forms <code>max_num</code> 10 Maximum forms <code>show_change_link</code> True Link to full form <code>can_delete</code> True Allow deletion"},{"location":"reference/admin/#mixins","title":"Mixins","text":""},{"location":"reference/admin/#exportmixin","title":"ExportMixin","text":"<p>Add export actions to any admin.</p> <pre><code>from automate_core.base import ExportMixin, BaseModelAdmin\n\nclass MyAdmin(ExportMixin, BaseModelAdmin):\n    export_formats = ['csv', 'json']\n    export_fields = ['name', 'email', 'created_at']\n</code></pre> Attribute Default Description <code>export_formats</code> <code>['csv', 'json']</code> Available formats <code>export_fields</code> None Fields to export (all if None) <code>export_exclude</code> <code>[]</code> Fields to exclude"},{"location":"reference/admin/#bulkactionsmixin","title":"BulkActionsMixin","text":"<p>Add bulk update/delete actions.</p> <pre><code>from automate_core.base import BulkActionsMixin, BaseModelAdmin\n\nclass MyAdmin(BulkActionsMixin, BaseModelAdmin):\n    bulk_update_fields = ['status', 'category']\n</code></pre> <p>Actions: - <code>bulk_update_status</code>: Update status field - <code>bulk_enable</code>: Enable selected - <code>bulk_disable</code>: Disable selected</p>"},{"location":"reference/admin/#auditmixin","title":"AuditMixin","text":"<p>Log admin actions to audit trail.</p> <pre><code>from automate_core.base import AuditMixin, BaseModelAdmin\n\nclass MyAdmin(AuditMixin, BaseModelAdmin):\n    audit_log_changes = True\n    audit_log_model = AuditLog  # Your audit model\n</code></pre>"},{"location":"reference/admin/#searchmixin","title":"SearchMixin","text":"<p>Enhanced search with field-specific lookups.</p> <pre><code>from automate_core.base import SearchMixin, BaseModelAdmin\n\nclass MyAdmin(SearchMixin, BaseModelAdmin):\n    advanced_search_fields = {\n        'name': 'icontains',\n        'email': 'iexact',\n    }\n</code></pre>"},{"location":"reference/admin/#filtermixin","title":"FilterMixin","text":"<p>Dynamic filter generation.</p> <pre><code>from automate_core.base import FilterMixin, BaseModelAdmin\n\nclass MyAdmin(FilterMixin, BaseModelAdmin):\n    auto_filters = True  # Auto-add choice/boolean filters\n    date_filters = ['created_at', 'updated_at']\n</code></pre>"},{"location":"reference/admin/#permissionmixin","title":"PermissionMixin","text":"<p>Object-level permission checks.</p> <pre><code>class MyAdmin(PermissionMixin, BaseModelAdmin):\n    def has_change_permission(self, request, obj=None):\n        if obj and obj.owner != request.user:\n            return False\n        return super().has_change_permission(request, obj)\n</code></pre>"},{"location":"reference/admin/#admin-classes-by-module","title":"Admin Classes by Module","text":""},{"location":"reference/admin/#automateadminpy-17-classes","title":"automate/admin.py (17 classes)","text":"Admin Class Model Base Key Features <code>AutomationAdmin</code> Automation TenantScopedAdmin Workflow inlines, enable/disable action <code>TriggerSpecAdmin</code> TriggerSpec BaseModelAdmin Trigger config display <code>WorkflowAdmin</code> Workflow BaseModelAdmin Graph preview, version history <code>ExecutionAdmin</code> Execution AuditableModelAdmin Status filtering, step inlines <code>ExecutionStepAdmin</code> ExecutionStep BaseModelAdmin Input/output display <code>EventAdmin</code> Event BaseModelAdmin Payload preview, type filter <code>PromptAdmin</code> Prompt BaseModelAdmin Version inlines <code>PromptVersionAdmin</code> PromptVersion AuditableModelAdmin Template preview <code>PromptReleaseAdmin</code> PromptRelease BaseModelAdmin Deploy action <code>LLMProviderAdmin</code> LLMProvider BaseModelAdmin Test connection action <code>LLMModelConfigAdmin</code> LLMModelConfig BaseModelAdmin Provider filter <code>BudgetPolicyAdmin</code> BudgetPolicy TenantScopedAdmin Limit display <code>TemplateAdmin</code> Template BaseModelAdmin Content preview <code>ConnectionProfileAdmin</code> ConnectionProfile TenantScopedAdmin Credentials masked <code>OutboxAdmin</code> Outbox BaseModelAdmin Retry action, status filter <code>MCPServerAdmin</code> MCPServer BaseModelAdmin Health check, sync tools <code>MCPToolAdmin</code> MCPTool BaseModelAdmin Schema display"},{"location":"reference/admin/#automate_datachatadminpy-3-classes","title":"automate_datachat/admin.py (3 classes)","text":"Admin Class Model Base Key Features <code>DataChatSessionAdmin</code> DataChatSession TenantScopedAdmin User filter, message count <code>DataChatMessageAdmin</code> DataChatMessage BaseModelAdmin Content preview, SQL display <code>ChatEmbedAdmin</code> ChatEmbed TenantScopedAdmin API key regenerate, domain list"},{"location":"reference/admin/#automate_modaladminpy-5-classes","title":"automate_modal/admin.py (5 classes)","text":"Admin Class Model Base Key Features <code>ModalProviderConfigAdmin</code> ModalProviderConfig ImportExportBaseAdmin Config validation <code>ModalEndpointAdmin</code> ModalEndpoint ImportExportBaseAdmin Test console link <code>ModalJobAdmin</code> ModalJob ImportExportBaseAdmin Status filter, cost display <code>ModalArtifactAdmin</code> ModalArtifact ImportExportBaseAdmin Download link <code>ModalAuditEventAdmin</code> ModalAuditEvent ImportExportBaseAdmin Date hierarchy"},{"location":"reference/admin/#ragadminpy-4-classes","title":"rag/admin.py (4 classes)","text":"Admin Class Model Base Key Features <code>RAGEndpointAdmin</code> RAGEndpoint TenantScopedAdmin Test query page <code>KnowledgeSourceAdmin</code> KnowledgeSource TenantScopedAdmin Sync action, doc count <code>EmbeddingModelAdmin</code> EmbeddingModel BaseModelAdmin Dimension display <code>RAGQueryLogAdmin</code> RAGQueryLog BaseModelAdmin Query display, latency"},{"location":"reference/admin/#automate_interopadminpy-3-classes","title":"automate_interop/admin.py (3 classes)","text":"Admin Class Model Base Key Features <code>InteropMappingAdmin</code> InteropMapping BaseModelAdmin Platform filter <code>TemplateCollectionAdmin</code> TemplateCollection BaseModelAdmin Template count <code>TemplateWorkflowAdmin</code> TemplateWorkflow BaseModelAdmin Collection filter"},{"location":"reference/admin/#other-modules-4-classes","title":"Other Modules (4 classes)","text":"Admin Class Module Model Base <code>LLMRequestAdmin</code> automate_llm LLMRequest AuditableModelAdmin <code>AuditLogEntryAdmin</code> automate_observability AuditLogEntry BaseModelAdmin <code>ConnectionProfileAdmin</code> automate_governance ConnectionProfile TenantScopedAdmin <code>StoredSecretAdmin</code> automate_governance StoredSecret BaseModelAdmin"},{"location":"reference/admin/#customization-guide","title":"Customization Guide","text":""},{"location":"reference/admin/#override-existing-admin","title":"Override Existing Admin","text":"<pre><code># In your app's admin.py\nfrom django.contrib import admin\nfrom automate.admin import AutomationAdmin\nfrom automate_core.workflows.models import Automation\n\n# Unregister default\nadmin.site.unregister(Automation)\n\n# Register custom\n@admin.register(Automation)\nclass CustomAutomationAdmin(AutomationAdmin):\n    list_display = ['name', 'enabled', 'department', 'created_at']\n    list_filter = ['enabled', 'department']\n\n    def department(self, obj):\n        return obj.metadata.get('department', '-')\n</code></pre>"},{"location":"reference/admin/#custom-actions","title":"Custom Actions","text":"<pre><code>@admin.register(MyModel)\nclass MyModelAdmin(BaseModelAdmin):\n    actions = ['make_active', 'send_notification']\n\n    @admin.action(description=\"Mark as active\")\n    def make_active(self, request, queryset):\n        updated = queryset.update(status='active')\n        self.message_user(request, f\"Updated {updated} records\")\n\n    @admin.action(description=\"Send notification\")\n    def send_notification(self, request, queryset):\n        for obj in queryset:\n            send_email(obj.user.email, \"Notification\", obj.name)\n        self.message_user(request, f\"Sent {queryset.count()} notifications\")\n</code></pre>"},{"location":"reference/admin/#custom-fieldsets","title":"Custom Fieldsets","text":"<pre><code>@admin.register(MyModel)\nclass MyModelAdmin(BaseModelAdmin):\n    fieldsets = [\n        (None, {\n            'fields': ['name', 'description']\n        }),\n        ('Configuration', {\n            'fields': ['config', 'options'],\n            'classes': ['collapse']\n        }),\n        ('Audit', {\n            'fields': ['created_at', 'updated_at', 'created_by'],\n            'classes': ['collapse']\n        }),\n    ]\n</code></pre>"},{"location":"reference/admin/#custom-change-form-template","title":"Custom Change Form Template","text":"<pre><code>@admin.register(MyModel)\nclass MyModelAdmin(BaseModelAdmin):\n    change_form_template = 'admin/myapp/mymodel/change_form.html'\n</code></pre> <pre><code>&lt;!-- templates/admin/myapp/mymodel/change_form.html --&gt;\n{% extends \"admin/change_form.html\" %}\n\n{% block after_field_sets %}\n&lt;div class=\"custom-section\"&gt;\n    &lt;h2&gt;Custom Section&lt;/h2&gt;\n    &lt;p&gt;Additional content here&lt;/p&gt;\n&lt;/div&gt;\n{% endblock %}\n</code></pre>"},{"location":"reference/admin/#custom-list-display-methods","title":"Custom List Display Methods","text":"<pre><code>@admin.register(MyModel)\nclass MyModelAdmin(BaseModelAdmin):\n    list_display = ['name', 'status_badge', 'item_count', 'owner_link']\n\n    @admin.display(description=\"Status\")\n    def status_badge(self, obj):\n        return self.colored_status(obj.status)\n\n    @admin.display(description=\"Items\")\n    def item_count(self, obj):\n        return obj.items.count()\n\n    @admin.display(description=\"Owner\")\n    def owner_link(self, obj):\n        return self.link_to_object(obj.owner)\n</code></pre>"},{"location":"reference/api-base-classes/","title":"API Base Classes Reference","text":"<p>Complete reference for Django Automate's base classes and mixins.</p>"},{"location":"reference/api-base-classes/#base-classes","title":"Base Classes","text":""},{"location":"reference/api-base-classes/#baseapiview","title":"BaseAPIView","text":"<p>Base class for all API views.</p> <pre><code>from automate_api.v1.base import BaseAPIView\n\nclass MyView(BaseAPIView):\n    def get(self, request):\n        return Response({'status': 'ok'})\n</code></pre> <p>Attributes:</p> Attribute Type Default Description <code>authentication_classes</code> list <code>[BearerTokenAuthentication]</code> Auth backends <code>permission_classes</code> list <code>[IsAuthenticatedAndTenantScoped]</code> Permission checks <code>throttle_classes</code> list <code>[TenantRateThrottle, TokenRateThrottle]</code> Rate limiting"},{"location":"reference/api-base-classes/#baseviewset","title":"BaseViewSet","text":"<p>Base class for ViewSet operations.</p> <pre><code>from automate_api.v1.base import BaseViewSet\n\nclass MyViewSet(BaseViewSet):\n    def list(self, request):\n        return Response([])\n</code></pre> <p>Inherits: <code>ConfigurableMixin</code>, <code>TenantFilterMixin</code></p> <p>Additional Attributes:</p> Attribute Type Default Description <code>pagination_class</code> class <code>CursorPagination</code> Pagination handler"},{"location":"reference/api-base-classes/#basemodelviewset","title":"BaseModelViewSet","text":"<p>Base class for model CRUD operations.</p> <pre><code>from automate_api.v1.base import BaseModelViewSet\n\nclass MyModelViewSet(BaseModelViewSet):\n    queryset = MyModel.objects.all()\n    serializer_class = MySerializer\n</code></pre>"},{"location":"reference/api-base-classes/#basereadonlyviewset","title":"BaseReadOnlyViewSet","text":"<p>Base class for read-only resources.</p> <pre><code>from automate_api.v1.base import BaseReadOnlyViewSet\n\nclass AuditLogViewSet(BaseReadOnlyViewSet):\n    queryset = AuditLog.objects.all()\n    serializer_class = AuditLogSerializer\n</code></pre>"},{"location":"reference/api-base-classes/#mixins","title":"Mixins","text":""},{"location":"reference/api-base-classes/#configurablemixin","title":"ConfigurableMixin","text":"<p>Provides Django settings integration.</p> <pre><code>from automate_api.v1.base import ConfigurableMixin\n\nclass MyView(ConfigurableMixin, APIView):\n    @classmethod\n    def get_setting(cls, key, default=None):\n        # Returns from AUTOMATE_API settings\n        return super().get_setting(key, default)\n</code></pre> <p>Methods:</p> Method Signature Description <code>get_setting</code> <code>(key, default=None)</code> Get setting from Django config"},{"location":"reference/api-base-classes/#corsmixin","title":"CORSMixin","text":"<p>Adds CORS header support.</p> <pre><code>from automate_api.v1.base import CORSMixin\n\nclass MyView(CORSMixin, APIView):\n    cors_allowed_origins = ['https://example.com']\n</code></pre> <p>Attributes:</p> Attribute Type Default Description <code>cors_allowed_origins</code> list <code>['*']</code> Allowed origins <code>cors_allowed_methods</code> list <code>['GET', 'POST', ...]</code> Allowed methods <code>cors_allowed_headers</code> list <code>[...]</code> Allowed headers <code>cors_max_age</code> int <code>86400</code> Preflight cache time <p>Methods:</p> Method Description <code>add_cors_headers(response)</code> Add CORS headers to response <code>get_cors_allowed_origins()</code> Get origins (checks settings) <code>options(request)</code> Handle preflight requests"},{"location":"reference/api-base-classes/#tenantfiltermixin","title":"TenantFilterMixin","text":"<p>Automatic tenant filtering for querysets.</p> <pre><code>from automate_api.v1.base import TenantFilterMixin\n\nclass MyViewSet(TenantFilterMixin, ModelViewSet):\n    tenant_field = 'organization_id'\n</code></pre> <p>Attributes:</p> Attribute Type Default Description <code>tenant_field</code> str <code>'tenant_id'</code> Field for filtering"},{"location":"reference/api-base-classes/#ratelimitmixin","title":"RateLimitMixin","text":"<p>Custom rate limiting per request.</p> <pre><code>from automate_api.v1.base import RateLimitMixin\n\nclass MyView(RateLimitMixin, APIView):\n    rate_limit_per_minute = 30\n\n    def post(self, request):\n        if not self.check_rate_limit(request.user.id):\n            return Response({'error': 'Rate limited'}, status=429)\n</code></pre> <p>Attributes:</p> Attribute Type Default Description <code>rate_limit_key_prefix</code> str <code>'api_rate'</code> Cache key prefix <code>rate_limit_per_minute</code> int <code>60</code> Requests/minute"},{"location":"reference/api-base-classes/#staffonlymixin","title":"StaffOnlyMixin","text":"<p>Restrict to staff users.</p> <pre><code>from automate_api.v1.base import StaffOnlyMixin\n\nclass AdminViewSet(StaffOnlyMixin, BaseViewSet):\n    pass\n</code></pre>"},{"location":"reference/api-base-classes/#publicapimixin","title":"PublicAPIMixin","text":"<p>Remove authentication for public endpoints.</p> <pre><code>from automate_api.v1.base import PublicAPIMixin\n\nclass HealthView(PublicAPIMixin, BaseAPIView):\n    def get(self, request):\n        return Response({'healthy': True})\n</code></pre>"},{"location":"reference/api-base-classes/#configuration","title":"Configuration","text":"<p>All mixins read from Django settings:</p> <pre><code># settings.py\nAUTOMATE_API = {\n    'CORS_ALLOWED_ORIGINS': ['https://example.com'],\n    'RATE_LIMIT_PER_MINUTE': 120,\n}\n</code></pre> <p>Mixins check settings first, fall back to class attributes:</p> <pre><code>def get_cors_allowed_origins(self):\n    return get_api_setting('CORS_ALLOWED_ORIGINS', self.cors_allowed_origins)\n</code></pre>"},{"location":"reference/api-compatibility/","title":"API Compatibility Policy","text":"<p>This document defines the API stability guarantees for Django Automate.</p>"},{"location":"reference/api-compatibility/#version-strategy","title":"Version Strategy","text":"<p>Django Automate uses URI versioning:</p> <pre><code>/api/v1/...  \u2190 Current stable version\n/api/v2/...  \u2190 Future major version (breaking changes)\n</code></pre>"},{"location":"reference/api-compatibility/#stability-guarantees-v1","title":"Stability Guarantees (v1)","text":"<p>Within a major version, we guarantee:</p> Change Type Allowed? Add new endpoints \u2705 Yes Add new optional fields \u2705 Yes Add new optional query params \u2705 Yes Remove endpoints \u274c No Remove fields \u274c No Change field types \u274c No Change URL paths \u274c No"},{"location":"reference/api-compatibility/#deprecation-process","title":"Deprecation Process","text":"<ol> <li>Announce: Deprecated features marked in OpenAPI schema</li> <li>Warn: Response headers include <code>Deprecation</code> header</li> <li>Migrate: Minimum 3 months before removal</li> <li>Remove: Only in next major version (v2)</li> </ol> <p>Example deprecation header:</p> <pre><code>Deprecation: true\nSunset: Sat, 01 Jan 2026 00:00:00 GMT\nLink: &lt;/api/v1/new-endpoint&gt;; rel=\"successor-version\"\n</code></pre>"},{"location":"reference/api-compatibility/#breaking-changes","title":"Breaking Changes","text":"<p>Breaking changes only occur in major version bumps:</p> <ul> <li>v1 \u2192 v2: Breaking changes allowed</li> <li>v1.1 \u2192 v1.2: No breaking changes</li> </ul>"},{"location":"reference/api-compatibility/#changelog","title":"Changelog","text":"<p>API changes documented in:</p> <ul> <li><code>CHANGELOG.md</code> (repository root)</li> <li>OpenAPI schema <code>info.version</code> field</li> <li>Release notes on GitHub</li> </ul>"},{"location":"reference/api/","title":"API Reference","text":"<p>Django Automate exposes a versioned REST API at <code>/api/v1/</code>.</p>"},{"location":"reference/api/#endpoints","title":"Endpoints","text":"Endpoint Description <code>/api/v1/workflows/</code> Workflow management <code>/api/v1/executions/</code> Execution tracking <code>/api/v1/jobs/</code> Job queue operations <code>/api/v1/events/</code> Event ingestion <code>/api/v1/triggers/</code> Trigger configuration <code>/api/v1/connectors/</code> Connector management"},{"location":"reference/api/#authentication","title":"Authentication","text":"<p>The API supports multiple authentication schemes:</p> <pre><code># Token authentication\nAuthorization: Token &lt;your-token&gt;\n\n# JWT authentication\nAuthorization: Bearer &lt;jwt-token&gt;\n\n# Session (for admin users)\nCookie: sessionid=&lt;session-id&gt;\n</code></pre> <p>Configure in <code>settings.py</code>:</p> <pre><code>REST_FRAMEWORK = {\n    'DEFAULT_AUTHENTICATION_CLASSES': [\n        'rest_framework.authentication.TokenAuthentication',\n        'rest_framework.authentication.SessionAuthentication',\n    ],\n}\n</code></pre>"},{"location":"reference/api/#correlation-id","title":"Correlation ID","text":"<p>All requests support correlation ID propagation for distributed tracing:</p> <pre><code>X-Correlation-ID: &lt;uuid&gt;\n</code></pre> <p>If not provided, a new UUID is generated and returned in the response.</p>"},{"location":"reference/api/#openapi-schema","title":"OpenAPI Schema","text":"<p>Interactive documentation available at:</p> <ul> <li>Swagger UI: <code>/api/docs/</code></li> <li>OpenAPI Schema: <code>/api/schema/</code></li> </ul> <pre><code># Download schema\ncurl https://your-server/api/schema/ -o openapi.yaml\n</code></pre>"},{"location":"reference/api/#rate-limiting","title":"Rate Limiting","text":"<p>Default rate limits (configurable via settings):</p> Scope Limit Anonymous 100/hour Authenticated 1000/hour Burst 10/second"},{"location":"reference/api/#error-format","title":"Error Format","text":"<p>All errors follow a consistent format:</p> <pre><code>{\n  \"error\": {\n    \"code\": \"validation_error\",\n    \"message\": \"Invalid input\",\n    \"details\": {\n      \"field\": [\"This field is required.\"]\n    }\n  },\n  \"correlation_id\": \"abc123\"\n}\n</code></pre>"},{"location":"reference/connectors/","title":"Connectors Reference","text":"<p>All connectors extend <code>ConnectorAdapter</code> from <code>automate_connectors.adapters.base</code>.</p>"},{"location":"reference/connectors/#connectoradapter-base-class","title":"ConnectorAdapter Base Class","text":"<pre><code>from automate_connectors.adapters.base import ConnectorAdapter\n\nclass MyAdapter(ConnectorAdapter):\n    code = \"my_adapter\"\n    name = \"My Adapter\"\n\n    def validate_config(self, config: dict) -&gt; ValidationResult:\n        \"\"\"Validate adapter configuration.\"\"\"\n        return ValidationResult(ok=True, errors=[])\n\n    def execute(self, action: str, input_args: dict, ctx: dict) -&gt; ConnectorResult:\n        \"\"\"Execute an action.\"\"\"\n        ...\n</code></pre>"},{"location":"reference/connectors/#key-methods","title":"Key Methods","text":"Method Description <code>validate_config()</code> Validate configuration before use <code>execute()</code> Execute an action with input arguments <code>normalize_error()</code> Convert exceptions to ConnectorError"},{"location":"reference/connectors/#slackadapter","title":"SlackAdapter","text":"<p>Send messages to Slack channels.</p> <pre><code>from automate_connectors.adapters.slack import SlackAdapter\n\nadapter = SlackAdapter()\nresult = adapter.execute(\n    \"send_message\",\n    {\"channel\": \"#general\", \"message\": \"Hello!\"},\n    {\"profile\": {\"encrypted_secrets\": {\"token\": \"xoxb-...\"}}}\n)\n</code></pre>"},{"location":"reference/connectors/#actions","title":"Actions","text":"Action Input Description <code>send_message</code> <code>channel</code>, <code>message</code>, <code>blocks</code> Post message to channel"},{"location":"reference/connectors/#loggingadapter","title":"LoggingAdapter","text":"<p>Debug adapter that logs all actions.</p> <pre><code>from automate_connectors.adapters.logging import LoggingAdapter\n\nadapter = LoggingAdapter()\nresult = adapter.execute(\"debug\", {\"data\": \"test\"}, {})\n</code></pre>"},{"location":"reference/connectors/#building-custom-adapters","title":"Building Custom Adapters","text":"<p>See Building Connectors for the full guide.</p>"},{"location":"reference/extension-points/","title":"Extension Points","text":"<p>This framework is designed to be extended. Below are the stable interfaces for plugins.</p>"},{"location":"reference/extension-points/#provider-registry","title":"Provider Registry","text":"<ul> <li>Name: <code>ProviderRegistry</code></li> <li>Stability: Stable</li> <li>Purpose: Discovers and loads external capabilities (LLMs, Tools).</li> <li>Interface: <code>automate_core.providers.base.BaseProvider</code></li> </ul>"},{"location":"reference/extension-points/#how-to-register","title":"How to Register","text":"<p>Add your provider class path to <code>AUTOMATE_PROVIDERS</code> in settings, or use the <code>django_automate.providers</code> entrypoint in <code>pyproject.toml</code>.</p>"},{"location":"reference/extension-points/#compatibility","title":"Compatibility","text":"<ul> <li>Django 4.2+</li> <li>Python 3.10+</li> </ul>"},{"location":"reference/extension-points/#secrets-backend","title":"Secrets Backend","text":"<ul> <li>Name: <code>SecretsBackend</code></li> <li>Stability: Stable</li> <li>Purpose: Resolves sensitive credentials at runtime.</li> <li>Interface: <code>automate.secrets_backend.SecretsBackend</code></li> </ul>"},{"location":"reference/extension-points/#implementation","title":"Implementation","text":"<p>Override <code>resolve(self, key: str) -&gt; str</code>.</p>"},{"location":"reference/extension-points/#connector","title":"Connector","text":"<ul> <li>Name: <code>Connector</code></li> <li>Stability: Beta</li> <li>Purpose: Defines Actions and Triggers for external services.</li> <li>Interface: <code>automate_connectors.base.Connector</code></li> </ul>"},{"location":"reference/models/","title":"Models Reference","text":"<p>Complete reference for all Django Automate models, organized by module.</p>"},{"location":"reference/models/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Base Classes</li> <li>automate Module</li> <li>automate_core Module</li> <li>automate_datachat Module</li> <li>automate_llm Module</li> <li>automate_modal Module</li> <li>rag Module</li> <li>Other Modules</li> </ol>"},{"location":"reference/models/#base-classes","title":"Base Classes","text":"<p>All models should inherit from these abstract base classes for consistency.</p> <p>Import: <code>from automate_core.base import TimeStampedModel, TenantScopedModel</code></p>"},{"location":"reference/models/#timestampedmodel","title":"TimeStampedModel","text":"<p>Automatic <code>created_at</code> and <code>updated_at</code> timestamps.</p> <pre><code>from automate_core.base import TimeStampedModel\n\nclass MyModel(TimeStampedModel):\n    name = models.CharField(max_length=200)\n</code></pre> Field Type Description <code>created_at</code> DateTimeField Auto-set on creation <code>updated_at</code> DateTimeField Auto-set on save"},{"location":"reference/models/#uuidmodel","title":"UUIDModel","text":"<p>UUID primary key for globally unique identifiers.</p> <pre><code>from automate_core.base import UUIDModel\n\nclass MyModel(UUIDModel):\n    name = models.CharField(max_length=200)\n</code></pre> Field Type Description <code>id</code> UUIDField UUID4 primary key"},{"location":"reference/models/#tenantscopedmodel","title":"TenantScopedModel","text":"<p>Multi-tenant isolation with automatic filtering.</p> <pre><code>from automate_core.base import TenantScopedModel\n\nclass MyModel(TenantScopedModel):\n    name = models.CharField(max_length=200)\n\n# Query for specific tenant\nMyModel.objects.for_tenant('tenant-123')\n</code></pre> Field Type Description <code>tenant_id</code> CharField Tenant identifier Attribute Default Description <code>tenant_field</code> <code>'tenant_id'</code> Name of tenant field (override) <p>Manager: <code>TenantManager</code> with <code>for_tenant(tenant_id)</code> method</p>"},{"location":"reference/models/#auditablemodel","title":"AuditableModel","text":"<p>Track who created/modified records.</p> <pre><code>from automate_core.base import AuditableModel\n\nclass MyModel(AuditableModel):\n    name = models.CharField(max_length=200)\n</code></pre> Field Type Description <code>created_by</code> CharField Username of creator <code>modified_by</code> CharField Username of last modifier <p>Override: <code>get_current_user()</code> to customize user resolution</p>"},{"location":"reference/models/#softdeletemodel","title":"SoftDeleteModel","text":"<p>Soft deletion instead of permanent delete.</p> <pre><code>from automate_core.base import SoftDeleteModel\n\nclass MyModel(SoftDeleteModel):\n    name = models.CharField(max_length=200)\n\nobj.delete()    # Soft delete\nobj.restore()   # Restore\nobj.hard_delete()  # Permanent delete\n</code></pre> Field Type Description <code>is_deleted</code> BooleanField Whether deleted <code>deleted_at</code> DateTimeField When deleted <code>deleted_by</code> CharField Who deleted <p>Manager: <code>SoftDeleteManager</code> (excludes deleted by default)</p>"},{"location":"reference/models/#sluggedmodel","title":"SluggedModel","text":"<p>Auto-generated URL-friendly slugs.</p> <pre><code>from automate_core.base import SluggedModel\n\nclass MyModel(SluggedModel):\n    name = models.CharField(max_length=200)\n    # slug auto-generated from name\n</code></pre> Field Type Description <code>slug</code> SlugField URL-friendly identifier Attribute Default Description <code>slug_source_field</code> <code>'name'</code> Field to generate slug from"},{"location":"reference/models/#statusmodel","title":"StatusModel","text":"<p>State machine with status transitions.</p> <pre><code>from automate_core.base import StatusModel\n\nclass Job(StatusModel):\n    STATUS_CHOICES = [\n        ('pending', 'Pending'),\n        ('running', 'Running'),\n        ('completed', 'Completed'),\n    ]\n    INITIAL_STATUS = 'pending'\n</code></pre> Field Type Description <code>status</code> CharField Current status <code>status_changed_at</code> DateTimeField When status changed <p>Manager: <code>StatusManager</code> with <code>by_status(status)</code> and <code>active()</code> methods</p>"},{"location":"reference/models/#metadatamodel","title":"MetadataModel","text":"<p>Flexible JSON metadata storage.</p> <pre><code>from automate_core.base import MetadataModel\n\nclass MyModel(MetadataModel):\n    name = models.CharField(max_length=200)\n\nobj.set_meta('key', 'value')\nobj.set_meta('nested.key', 'value')\nvalue = obj.get_meta('key', default='fallback')\n</code></pre> Field Type Description <code>metadata</code> JSONField Flexible JSON storage"},{"location":"reference/models/#orderedmodel","title":"OrderedModel","text":"<p>Position-based ordering.</p> <pre><code>from automate_core.base import OrderedModel\n\nclass Step(OrderedModel):\n    name = models.CharField(max_length=200)\n\nstep.move_up()\nstep.move_down()\nstep.move_to(5)\n</code></pre> Field Type Description <code>position</code> PositiveIntegerField Position for ordering <p>Manager: <code>OrderedManager</code> (auto-orders by position)</p>"},{"location":"reference/models/#automate-module","title":"automate Module","text":""},{"location":"reference/models/#llmprovider","title":"LLMProvider","text":"<p>LLM provider configuration.</p> <p>Location: <code>automate/models.py</code></p> Field Type Description <code>name</code> CharField Provider name <code>provider_type</code> CharField Type (openai, anthropic, etc.) <code>config</code> JSONField Provider configuration <code>is_default</code> BooleanField Default provider flag <p>Override Points: - <code>get_client()</code>: Return provider client instance - <code>validate_config()</code>: Validate provider configuration</p>"},{"location":"reference/models/#llmmodelconfig","title":"LLMModelConfig","text":"<p>Model-specific configuration.</p> Field Type Description <code>provider</code> ForeignKey Parent provider <code>model_id</code> CharField Model identifier <code>max_tokens</code> IntegerField Token limit <code>temperature</code> FloatField Sampling temperature <code>params</code> JSONField Additional parameters"},{"location":"reference/models/#prompt","title":"Prompt","text":"<p>Prompt template definition.</p> Field Type Description <code>name</code> CharField Prompt name <code>slug</code> SlugField URL identifier <code>description</code> TextField Description <code>category</code> CharField Category tag <p>Related: <code>versions</code> - PromptVersion queryset</p>"},{"location":"reference/models/#promptversion","title":"PromptVersion","text":"<p>Version of a prompt template.</p> Field Type Description <code>prompt</code> ForeignKey Parent prompt <code>version</code> IntegerField Version number <code>system_template</code> TextField System prompt template <code>user_template</code> TextField User prompt template <code>variables</code> JSONField Required variables <p>Override Points: - <code>render(variables)</code>: Render templates with variables</p>"},{"location":"reference/models/#connectionprofile","title":"ConnectionProfile","text":"<p>External service connection credentials.</p> Field Type Description <code>name</code> CharField Connection name <code>provider</code> CharField Provider type <code>credentials</code> JSONField Encrypted credentials <code>config</code> JSONField Connection config <p>Override Points: - <code>get_client()</code>: Return service client - <code>test_connection()</code>: Test connectivity</p>"},{"location":"reference/models/#mcpserver","title":"MCPServer","text":"<p>MCP (Model Context Protocol) server.</p> Field Type Description <code>name</code> CharField Server name <code>url</code> URLField Server URL <code>auth_config</code> JSONField Authentication <code>status</code> CharField Connection status <p>Related: <code>tools</code> - MCPTool queryset</p> <p>Override Points: - <code>sync_tools()</code>: Sync available tools - <code>health_check()</code>: Check server health</p>"},{"location":"reference/models/#mcptool","title":"MCPTool","text":"<p>Tool available from MCP server.</p> Field Type Description <code>server</code> ForeignKey Parent server <code>name</code> CharField Tool name <code>schema</code> JSONField Input schema <code>description</code> TextField Tool description <p>Override Points: - <code>execute(input)</code>: Execute tool with input</p>"},{"location":"reference/models/#automate_core-module","title":"automate_core Module","text":""},{"location":"reference/models/#automation","title":"Automation","text":"<p>Top-level automation definition.</p> <p>Location: <code>automate_core/workflows/models.py</code></p> Field Type Description <code>name</code> CharField Automation name <code>slug</code> SlugField URL identifier <code>enabled</code> BooleanField Active flag <code>config</code> JSONField Configuration <p>Related: <code>triggers</code>, <code>workflows</code></p>"},{"location":"reference/models/#workflow","title":"Workflow","text":"<p>Workflow graph definition.</p> Field Type Description <code>automation</code> ForeignKey Parent automation <code>version</code> IntegerField Version number <code>graph</code> JSONField Workflow graph <code>is_live</code> BooleanField Active version flag <p>Override Points: - <code>compile()</code>: Compile graph to executable - <code>validate()</code>: Validate graph structure</p>"},{"location":"reference/models/#trigger-triggerspec","title":"Trigger (TriggerSpec)","text":"<p>Event trigger configuration.</p> Field Type Description <code>automation</code> ForeignKey Parent automation <code>type</code> CharField Trigger type <code>config</code> JSONField Trigger configuration <code>filters</code> JSONField Event filters <p>Override Points: - <code>matches(event)</code>: Check if event matches - <code>extract_payload(event)</code>: Extract payload from event</p>"},{"location":"reference/models/#event","title":"Event","text":"<p>Captured event record.</p> <p>Location: <code>automate_core/events/models.py</code></p> Field Type Description <code>type</code> CharField Event type <code>payload</code> JSONField Event data <code>source</code> CharField Event source <code>trace_id</code> UUIDField Trace identifier"},{"location":"reference/models/#execution","title":"Execution","text":"<p>Workflow execution instance.</p> <p>Location: <code>automate_core/executions/models.py</code></p> Field Type Description <code>workflow</code> ForeignKey Executed workflow <code>event</code> ForeignKey Triggering event <code>status</code> CharField Execution status <code>started_at</code> DateTimeField Start time <code>ended_at</code> DateTimeField End time <code>context</code> JSONField Execution context <p>Related: <code>steps</code> - StepRun queryset</p>"},{"location":"reference/models/#steprun","title":"StepRun","text":"<p>Individual step execution.</p> Field Type Description <code>execution</code> ForeignKey Parent execution <code>step_id</code> CharField Step identifier <code>status</code> CharField Step status <code>input</code> JSONField Step input <code>output</code> JSONField Step output <code>error</code> TextField Error message <code>duration_ms</code> IntegerField Execution time"},{"location":"reference/models/#job","title":"Job","text":"<p>Async job record.</p> <p>Location: <code>automate_core/jobs/models.py</code></p> Field Type Description <code>type</code> CharField Job type <code>status</code> CharField Job status <code>params</code> JSONField Job parameters <code>result</code> JSONField Job result <code>priority</code> IntegerField Queue priority <code>scheduled_at</code> DateTimeField Scheduled time <p>Override Points: - <code>execute()</code>: Run job logic - <code>cancel()</code>: Cancel job - <code>get_progress()</code>: Get progress info</p>"},{"location":"reference/models/#automate_datachat-module","title":"automate_datachat Module","text":""},{"location":"reference/models/#datachatsession","title":"DataChatSession","text":"<p>Chat session for data queries.</p> <p>Location: <code>automate_datachat/models.py</code></p> Field Type Description <code>user</code> CharField Username <code>context</code> JSONField Session context <code>expires_at</code> DateTimeField Expiration time <p>Related: <code>messages</code> - DataChatMessage queryset</p>"},{"location":"reference/models/#datachatmessage","title":"DataChatMessage","text":"<p>Individual chat message.</p> Field Type Description <code>session</code> ForeignKey Parent session <code>role</code> CharField Message role (user/assistant) <code>content</code> TextField Message text <code>sql</code> TextField Generated SQL <code>data</code> JSONField Query results <code>chart</code> JSONField Chart configuration"},{"location":"reference/models/#chatembed","title":"ChatEmbed","text":"<p>Embeddable widget configuration.</p> Field Type Description <code>id</code> UUIDField Embed identifier <code>name</code> CharField Widget name <code>api_key</code> CharField API key for auth <code>allowed_domains</code> ArrayField Allowed origins <code>theme</code> JSONField Widget styling <code>rate_limit</code> IntegerField Requests per minute <p>Override Points: - <code>validate_origin(origin)</code>: Validate request origin - <code>check_rate_limit(key)</code>: Check rate limit</p>"},{"location":"reference/models/#automate_llm-module","title":"automate_llm Module","text":""},{"location":"reference/models/#llmusage","title":"LLMUsage","text":"<p>LLM usage tracking.</p> <p>Location: <code>automate_llm/models.py</code></p> Field Type Description <code>tenant_id</code> CharField Tenant identifier <code>model</code> CharField Model used <code>tokens_in</code> IntegerField Input tokens <code>tokens_out</code> IntegerField Output tokens <code>cost</code> DecimalField Estimated cost"},{"location":"reference/models/#llmrequest","title":"LLMRequest","text":"<p>LLM request audit log.</p> <p>Location: <code>automate_llm/governance/models.py</code></p> Field Type Description <code>prompt_slug</code> CharField Prompt used <code>model</code> CharField Model used <code>latency_ms</code> IntegerField Response time <code>success</code> BooleanField Success flag <code>error</code> TextField Error message"},{"location":"reference/models/#automate_modal-module","title":"automate_modal Module","text":""},{"location":"reference/models/#modalendpoint","title":"ModalEndpoint","text":"<p>Modal function endpoint.</p> <p>Location: <code>automate_modal/models.py</code></p> Field Type Description <code>name</code> CharField Endpoint name <code>slug</code> SlugField URL identifier <code>function_name</code> CharField Modal function <code>gpu</code> CharField GPU type <code>timeout</code> IntegerField Timeout seconds <p>Override Points: - <code>invoke(input)</code>: Invoke function - <code>get_logs()</code>: Get execution logs</p>"},{"location":"reference/models/#modaljob","title":"ModalJob","text":"<p>Modal function execution.</p> Field Type Description <code>endpoint</code> ForeignKey Parent endpoint <code>status</code> CharField Job status <code>input</code> JSONField Job input <code>output</code> JSONField Job output <code>cost</code> DecimalField Execution cost <p>Related: <code>artifacts</code> - ModalArtifact queryset</p>"},{"location":"reference/models/#rag-module","title":"rag Module","text":""},{"location":"reference/models/#ragendpoint","title":"RAGEndpoint","text":"<p>RAG retrieval endpoint.</p> <p>Location: <code>rag/models.py</code></p> Field Type Description <code>name</code> CharField Endpoint name <code>slug</code> SlugField URL identifier <code>source</code> ForeignKey Knowledge source <code>retrieval_config</code> JSONField Retrieval settings <code>access_policy</code> JSONField Access control <p>Override Points: - <code>query(text, top_k)</code>: Execute retrieval - <code>health_check()</code>: Check endpoint health</p>"},{"location":"reference/models/#knowledgesource","title":"KnowledgeSource","text":"<p>RAG knowledge source.</p> Field Type Description <code>name</code> CharField Source name <code>type</code> CharField Source type <code>config</code> JSONField Source configuration <code>credentials_ref</code> CharField Credentials reference <code>sync_status</code> CharField Sync status <p>Override Points: - <code>sync()</code>: Sync from source - <code>get_documents()</code>: Get document list</p>"},{"location":"reference/models/#embeddingmodel","title":"EmbeddingModel","text":"<p>Embedding model configuration.</p> Field Type Description <code>name</code> CharField Model name <code>provider</code> CharField Provider (openai, etc.) <code>model_id</code> CharField Model identifier <code>dimensions</code> IntegerField Vector dimensions <p>Override Points: - <code>embed(text)</code>: Embed single text - <code>batch_embed(texts)</code>: Embed batch</p>"},{"location":"reference/models/#other-modules","title":"Other Modules","text":""},{"location":"reference/models/#automate_governance","title":"automate_governance","text":"Model Purpose Key Fields <code>AuditLog</code> Audit trail <code>actor</code>, <code>action</code>, <code>target</code>, <code>changes</code> <code>RuleSpec</code> Business rule <code>expression</code>, <code>action</code> <code>ConnectionProfile</code> Credentials <code>provider</code>, <code>credentials</code> <code>StoredSecret</code> Encrypted secret <code>key</code>, <code>encrypted_value</code> <code>ThrottleBucket</code> Rate limit state <code>key</code>, <code>count</code>, <code>window</code>"},{"location":"reference/models/#automate_interop","title":"automate_interop","text":"Model Purpose Key Fields <code>InteropMapping</code> Platform mapping <code>source_platform</code>, <code>target</code>, <code>transform</code> <code>TemplateCollection</code> Template group <code>name</code>, <code>description</code> <code>TemplateWorkflow</code> Workflow template <code>collection</code>, <code>graph</code>, <code>variables</code>"},{"location":"reference/models/#automate_observability","title":"automate_observability","text":"Model Purpose Key Fields <code>AuditLogEntry</code> Log entry <code>level</code>, <code>message</code>, <code>context</code>, <code>trace_id</code>"},{"location":"reference/models/#automate_connectors","title":"automate_connectors","text":"Model Purpose Key Fields <code>ConnectorInstance</code> External connector <code>connector_type</code>, <code>config</code>, <code>credentials</code>"},{"location":"reference/models/#customization-guide","title":"Customization Guide","text":""},{"location":"reference/models/#extending-a-model","title":"Extending a Model","text":"<pre><code>from automate_core.base import TimeStampedModel, TenantScopedModel\n\nclass MyCustomModel(TenantScopedModel, TimeStampedModel):\n    \"\"\"Custom model with tenant isolation and timestamps.\"\"\"\n\n    name = models.CharField(max_length=200)\n\n    class Meta:\n        # Override default ordering\n        ordering = ['name']\n\n    @classmethod\n    def get_current_tenant(cls):\n        # Custom tenant resolution\n        from myapp.middleware import get_current_tenant\n        return get_current_tenant()\n</code></pre>"},{"location":"reference/models/#adding-custom-fields","title":"Adding Custom Fields","text":"<pre><code>from automate.models import Automation\n\nclass ExtendedAutomation(Automation):\n    \"\"\"Automation with additional fields.\"\"\"\n\n    department = models.CharField(max_length=100)\n    cost_center = models.CharField(max_length=50)\n\n    class Meta:\n        proxy = True  # Use proxy for same table\n        # Or remove proxy for separate table\n</code></pre>"},{"location":"reference/models/#custom-manager","title":"Custom Manager","text":"<pre><code>from automate_core.base import TimeStampedModel\n\nclass ActiveManager(models.Manager):\n    def get_queryset(self):\n        return super().get_queryset().filter(is_active=True)\n\nclass MyModel(TimeStampedModel):\n    is_active = models.BooleanField(default=True)\n\n    objects = models.Manager()\n    active = ActiveManager()\n</code></pre>"},{"location":"reference/modules/","title":"Modules Overview","text":"<p>Django Automate is organized into Core modules (always needed) and Suite modules (add what you need).</p>"},{"location":"reference/modules/#core-modules","title":"Core Modules","text":"<p>These modules form the foundation of every Django Automate installation.</p> Module Description <code>automate</code> Main app, admin integration, settings <code>automate_core</code> Execution engine, workflows, jobs, outbox <code>automate_api</code> REST API v1 endpoints <pre><code>INSTALLED_APPS = [\n    # Core - Always Required\n    \"automate\",\n    \"automate_core\",\n    \"automate_api\",\n]\n</code></pre>"},{"location":"reference/modules/#suite-modules","title":"Suite Modules","text":"<p>Add these modules based on your needs.</p>"},{"location":"reference/modules/#llm-ai","title":"LLM &amp; AI","text":"Module Description Extra <code>automate_llm</code> LLM provider abstraction <code>[llm-openai]</code> <code>automate_datachat</code> NL2SQL chat interface - <code>rag</code> RAG endpoints, embeddings <code>[rag-milvus]</code>"},{"location":"reference/modules/#integrations","title":"Integrations","text":"Module Description Extra <code>automate_connectors</code> External service adapters <code>[connectors-slack]</code> <code>automate_interop</code> n8n, Zapier webhooks -"},{"location":"reference/modules/#operations","title":"Operations","text":"Module Description Extra <code>automate_studio</code> Visual workflow builder - <code>automate_governance</code> Audit logs, policies - <code>automate_observability</code> OpenTelemetry tracing <code>[observability]</code> <code>automate_modal</code> Multi-modal processing -"},{"location":"reference/modules/#full-suite-install","title":"Full Suite Install","text":"<pre><code>INSTALLED_APPS = [\n    # Core\n    \"automate\",\n    \"automate_core\",\n    \"automate_api\",\n\n    # Suite - LLM\n    \"automate_llm\",\n    \"automate_datachat\",\n    \"rag\",\n\n    # Suite - Integrations\n    \"automate_connectors\",\n    \"automate_interop\",\n\n    # Suite - Operations\n    \"automate_studio\",\n    \"automate_governance\",\n    \"automate_observability\",\n    \"automate_modal\",\n]\n</code></pre>"},{"location":"reference/modules/#decision-guide","title":"Decision Guide","text":"Need Recommended Modules Just workflows Core only LLM chatbot Core + <code>automate_llm</code> RAG pipeline Core + <code>rag</code> + <code>automate_llm</code> Slack integration Core + <code>automate_connectors[connectors-slack]</code> Full AI agent Full suite"},{"location":"reference/rag-architecture/","title":"RAG Subsystem Architecture","text":"<p>This document clarifies the two RAG packages in Django Automate.</p>"},{"location":"reference/rag-architecture/#package-overview","title":"Package Overview","text":"Package Purpose Status <code>rag/</code> Canonical runtime - retrieval providers, embeddings, vector stores, SSRF-safe client \u2705 Shipped in v1 <code>automate_rag/</code> V2 RAG models - Corpus, Document, Chunk for document management \u26a0\ufe0f Not shipped (internal dev)"},{"location":"reference/rag-architecture/#rag-canonical-rag-runtime","title":"rag/ (Canonical RAG Runtime)","text":"<p>The full-featured RAG subsystem providing:</p> <ul> <li>Providers: Retrieval strategies (local, external)</li> <li>Embeddings: OpenAI and extensible embedding backends  </li> <li>Vector Stores: Milvus, PGVector adapters</li> <li>Security: SSRF-safe HTTP client for external fetches</li> <li>Models: EmbeddingModel, KnowledgeSource, RAGEndpoint, RAGQueryLog</li> <li>API: REST endpoints for RAG queries</li> </ul> <pre><code># Example usage\nfrom rag.models import RAGEndpoint\nfrom rag.providers.registry import get_retrieval_provider\nfrom rag.security.ssrf_client import ssrf_safe_request\n</code></pre>"},{"location":"reference/rag-architecture/#automate_rag-document-models","title":"automate_rag/ (Document Models)","text":"<p>Simpler package focused on document management:</p> <ul> <li>Models: Corpus, Document, Chunk</li> <li>Service: Basic RAG service layer</li> <li>Stores: Document storage abstractions</li> </ul> <pre><code># Example usage\nfrom automate_rag.models import Corpus, Document, Chunk\n</code></pre>"},{"location":"reference/rag-architecture/#when-to-use-which","title":"When to Use Which","text":"Use Case Package Implementing RAG queries/retrieval <code>rag/</code> Adding new embedding providers <code>rag/embeddings/</code> Adding new vector stores <code>rag/vector_stores/</code> Building document ingestion pipelines <code>automate_rag/</code> Managing corpus/chunks <code>automate_rag/</code>"},{"location":"reference/rag-architecture/#integration-with-datachat","title":"Integration with DataChat","text":"<p>DataChat (<code>automate_datachat/</code>) uses both packages: - <code>rag.models</code> for RAG endpoints and query logging - <code>automate_rag.models</code> for document corpus management</p>"},{"location":"reference/serializers/","title":"Serializers Reference","text":"<p>Complete reference for all Django Automate serializers.</p>"},{"location":"reference/serializers/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Base Classes</li> <li>Mixins</li> <li>Serializers by Module</li> <li>Customization Guide</li> </ol>"},{"location":"reference/serializers/#base-classes","title":"Base Classes","text":"<p>Import: <code>from automate_core.base import BaseSerializer, BaseModelSerializer</code></p>"},{"location":"reference/serializers/#baseserializer","title":"BaseSerializer","text":"<p>Base serializer with context awareness and validation.</p> <pre><code>from automate_core.base import BaseSerializer\nfrom rest_framework import serializers\n\nclass MySerializer(BaseSerializer):\n    name = serializers.CharField(max_length=200)\n    email = serializers.EmailField()\n\n    def validate_name(self, value):\n        if value.lower() == 'admin':\n            raise serializers.ValidationError(\"Reserved name\")\n        return value\n</code></pre> <p>Features: - <code>self.request</code> - Access request object - <code>self.current_user</code> - Access current user - <code>self.tenant_id</code> - Access tenant context - <code>self.view</code> - Access parent view</p>"},{"location":"reference/serializers/#basemodelserializer","title":"BaseModelSerializer","text":"<p>Model serializer with enhanced features.</p> <pre><code>from automate_core.base import BaseModelSerializer\n\nclass MyModelSerializer(BaseModelSerializer):\n    class Meta:\n        model = MyModel\n        fields = '__all__'\n        exclude_fields = ['internal_notes']\n        readonly_fields = ['created_at']\n</code></pre> Attribute Default Description <code>exclude_fields</code> <code>[]</code> Always exclude these fields <code>readonly_fields</code> <code>[]</code> Always read-only fields <code>auto_include_timestamps</code> True Include timestamp fields"},{"location":"reference/serializers/#tenantscopedserializer","title":"TenantScopedSerializer","text":"<p>Auto-inject tenant on creation.</p> <pre><code>from automate_core.base import TenantScopedSerializer\n\nclass MyTenantSerializer(TenantScopedSerializer):\n    class Meta:\n        model = MyTenantModel\n        fields = '__all__'\n</code></pre> Attribute Default Description <code>tenant_field</code> <code>'tenant_id'</code> Tenant field name <code>auto_set_tenant</code> True Auto-set from context"},{"location":"reference/serializers/#auditableserializer","title":"AuditableSerializer","text":"<p>Auto-set audit fields (created_by, modified_by).</p> <pre><code>from automate_core.base import AuditableSerializer\n\nclass MyAuditableSerializer(AuditableSerializer):\n    class Meta:\n        model = MyAuditableModel\n        fields = '__all__'\n</code></pre>"},{"location":"reference/serializers/#nestedwritableserializer","title":"NestedWritableSerializer","text":"<p>Handle nested create/update automatically.</p> <pre><code>from automate_core.base import NestedWritableSerializer\n\nclass OrderSerializer(NestedWritableSerializer):\n    items = OrderItemSerializer(many=True)\n\n    nested_fields = {\n        'items': {'serializer': OrderItemSerializer, 'many': True}\n    }\n\n    class Meta:\n        model = Order\n        fields = '__all__'\n</code></pre>"},{"location":"reference/serializers/#readonlyserializer","title":"ReadOnlySerializer","text":"<p>All fields automatically read-only.</p> <pre><code>from automate_core.base import ReadOnlySerializer\n\nclass StatsSerializer(ReadOnlySerializer):\n    total_count = serializers.IntegerField()\n    avg_duration = serializers.FloatField()\n</code></pre>"},{"location":"reference/serializers/#mixins","title":"Mixins","text":""},{"location":"reference/serializers/#validationmixin","title":"ValidationMixin","text":"<p>Enhanced validation with custom error messages.</p> <pre><code>from automate_core.base import ValidationMixin\n\nclass MySerializer(ValidationMixin, serializers.Serializer):\n    error_messages = {\n        'name': {'required': 'Name is mandatory'},\n    }\n    strict_validation = True  # Fail on unknown fields\n</code></pre>"},{"location":"reference/serializers/#contextmixin","title":"ContextMixin","text":"<p>Easy access to request context.</p> <pre><code>class MySerializer(ContextMixin, serializers.Serializer):\n    def validate_owner(self, value):\n        if value != self.current_user.id:\n            raise ValidationError(\"Not your resource\")\n        return value\n</code></pre> <p>Properties: - <code>self.request</code> - Request object - <code>self.current_user</code> - User object - <code>self.tenant_id</code> - Tenant identifier - <code>self.view</code> - Parent view</p>"},{"location":"reference/serializers/#dynamicfieldsmixin","title":"DynamicFieldsMixin","text":"<p>Request-based field selection.</p> <pre><code>class MySerializer(DynamicFieldsMixin, serializers.ModelSerializer):\n    class Meta:\n        model = MyModel\n        fields = '__all__'\n\n# Usage: GET /api/items/?fields=id,name,email\n</code></pre>"},{"location":"reference/serializers/#expandablemixin","title":"ExpandableMixin","text":"<p>Expand nested relations on request.</p> <pre><code>class OrderSerializer(ExpandableMixin, serializers.ModelSerializer):\n    expandable_fields = {\n        'customer': CustomerSerializer,\n        'items': OrderItemSerializer,\n    }\n\n    class Meta:\n        model = Order\n        fields = '__all__'\n\n# Usage: GET /api/orders/1/?expand=customer,items\n</code></pre>"},{"location":"reference/serializers/#paginationmixin","title":"PaginationMixin","text":"<p>Add pagination fields to response.</p> <pre><code>class MyListSerializer(PaginationMixin, serializers.Serializer):\n    items = MyItemSerializer(many=True)\n    # Automatically includes: page, page_size, total_count, has_next, has_previous\n</code></pre>"},{"location":"reference/serializers/#cachemixin","title":"CacheMixin","text":"<p>Response caching support.</p> <pre><code>class MySerializer(CacheMixin, serializers.ModelSerializer):\n    cache_timeout = 300  # 5 minutes\n    cache_key_prefix = 'mymodel'\n</code></pre>"},{"location":"reference/serializers/#serializers-by-module","title":"Serializers by Module","text":""},{"location":"reference/serializers/#automate_datachat-8-serializers","title":"automate_datachat (8 serializers)","text":"Serializer Type Key Fields Validation <code>ChatRequestSerializer</code> Request <code>question</code>, <code>context</code> Min 1, max 2000 chars <code>ChatResponseSerializer</code> Response <code>answer</code>, <code>sql</code>, <code>data</code>, <code>chart</code>, <code>error</code> - <code>HistoryMessageSerializer</code> Nested <code>id</code>, <code>role</code>, <code>content</code>, <code>sql</code>, <code>data</code>, <code>created_at</code> - <code>HistoryResponseSerializer</code> Response <code>messages</code>, <code>has_more</code>, <code>total</code>, <code>page</code> - <code>EmbedChatRequestSerializer</code> Request <code>question</code> Max 1000 chars <code>EmbedChatResponseSerializer</code> Response <code>answer</code>, <code>sql</code>, <code>error</code> - <code>EmbedConfigSerializer</code> Response <code>theme</code>, <code>welcome_message</code>, <code>require_auth</code> -"},{"location":"reference/serializers/#automateapiserializersworkflowspy-8-serializers","title":"automate/api/serializers/workflows.py (8 serializers)","text":"Serializer Type Key Fields Validation <code>WorkflowNodeSerializer</code> Nested <code>id</code>, <code>type</code>, <code>config</code>, <code>position</code> Type in choices <code>WorkflowEdgeSerializer</code> Nested <code>source</code>, <code>target</code>, <code>condition</code> - <code>WorkflowGraphSerializer</code> Nested <code>nodes</code>, <code>edges</code> Graph structure valid <code>WorkflowCreateRequestSerializer</code> Request <code>name</code>, <code>graph</code> Name max 200 <code>WorkflowCreateResponseSerializer</code> Response <code>id</code>, <code>slug</code>, <code>workflow_version</code>, <code>message</code> - <code>WorkflowDetailSerializer</code> Response <code>id</code>, <code>name</code>, <code>slug</code>, <code>graph</code> - <code>WorkflowUpdateRequestSerializer</code> Request <code>name</code>, <code>graph</code> - <code>WorkflowUpdateResponseSerializer</code> Response <code>id</code>, <code>message</code> -"},{"location":"reference/serializers/#automateapiserializerszapierpy-4-serializers","title":"automate/api/serializers/zapier.py (4 serializers)","text":"Serializer Type Key Fields Validation <code>TriggerSerializer</code> Response <code>key</code>, <code>label</code> - <code>SubscribeRequestSerializer</code> Request <code>target_url</code>, <code>event</code> Valid URL <code>SubscribeResponseSerializer</code> Response <code>id</code>, <code>status</code> - <code>UnsubscribeResponseSerializer</code> Response <code>status</code> -"},{"location":"reference/serializers/#automate_apiv1serializers-10-serializers","title":"automate_api/v1/serializers/ (10 serializers)","text":"Serializer Type Model/Key Fields Description <code>ProviderSerializer</code> ModelSerializer LLMProvider Full provider config <code>EndpointSerializer</code> ModelSerializer Endpoint Endpoint definition <code>EndpointRunRequest</code> Request <code>input</code>, <code>async</code> Run request <code>EndpointRunResponse</code> Response <code>id</code>, <code>status</code>, <code>output</code> Run result <code>JobSerializer</code> ModelSerializer Job Job details <code>CancelResponse</code> Response <code>cancelled</code>, <code>message</code> Cancel result <code>ExecutionSerializer</code> ModelSerializer Execution Execution details <code>ArtifactSerializer</code> ModelSerializer Artifact Artifact metadata <code>IngestEventSerializer</code> Request <code>type</code>, <code>payload</code>, <code>source</code> Event ingest <code>IngestEventResponse</code> Response <code>id</code>, <code>status</code> Ingest result"},{"location":"reference/serializers/#ragapiserializerspy-4-serializers","title":"rag/api/serializers.py (4 serializers)","text":"Serializer Type Key Fields Validation <code>RAGQueryRequestSerializer</code> Request <code>query</code>, <code>top_k</code>, <code>filters</code> Query 1-2000, top_k 1-100 <code>RAGResultSerializer</code> Nested <code>text</code>, <code>score</code>, <code>source_id</code>, <code>metadata</code> - <code>RAGQueryResponseSerializer</code> Response <code>results</code>, <code>trace_id</code>, <code>latency_ms</code> - <code>RAGHealthResponseSerializer</code> Response <code>healthy</code>, <code>message</code>, <code>status</code> -"},{"location":"reference/serializers/#automateapiviewsets-4-serializers","title":"automate/api/viewsets/ (4 serializers)","text":"Serializer Type Key Fields Description <code>PromptTestRequestSerializer</code> Request <code>prompt_slug</code>, <code>version</code>, <code>variables</code> Test prompt <code>PromptTestResponseSerializer</code> Response <code>system_prompt</code>, <code>user_prompt</code>, <code>status</code> Test result <code>PromptMetricsSerializer</code> Response <code>daily_stats</code>, <code>recent_failures</code> Metrics <code>ManualTriggerSerializer</code> Request <code>automation_slug</code>, <code>payload</code> Manual trigger"},{"location":"reference/serializers/#automate_llmapiserializerspy-1-serializer","title":"automate_llm/api/serializers.py (1 serializer)","text":"Serializer Type Key Fields Description <code>LlmRunCreateSerializer</code> Request <code>prompt_slug</code>, <code>variables</code>, <code>model</code> LLM run request"},{"location":"reference/serializers/#automate_modalapiserializerspy-4-serializers","title":"automate_modal/api/serializers.py (4 serializers)","text":"Serializer Type Key Fields Description <code>ModalRunRequestSerializer</code> Request <code>endpoint_slug</code>, <code>input</code>, <code>async</code> Modal run <code>ModalArtifactSerializer</code> Response <code>id</code>, <code>type</code>, <code>path</code>, <code>size</code>, <code>url</code> Artifact info <code>ModalResultSerializer</code> Response <code>output</code>, <code>artifacts</code>, <code>cost</code>, <code>duration</code> Run result <code>ModalJobSerializer</code> Response <code>id</code>, <code>status</code>, <code>endpoint</code>, <code>created_at</code> Job info"},{"location":"reference/serializers/#customization-guide","title":"Customization Guide","text":""},{"location":"reference/serializers/#extending-a-serializer","title":"Extending a Serializer","text":"<pre><code>from automate_datachat.serializers import ChatRequestSerializer\n\nclass ExtendedChatRequestSerializer(ChatRequestSerializer):\n    session_id = serializers.UUIDField(required=False)\n\n    def validate_question(self, value):\n        # Additional validation\n        if 'DROP TABLE' in value.upper():\n            raise serializers.ValidationError(\"Invalid query\")\n        return super().validate_question(value)\n</code></pre>"},{"location":"reference/serializers/#adding-custom-fields","title":"Adding Custom Fields","text":"<pre><code>from automate_api.v1.serializers.jobs import JobSerializer\n\nclass ExtendedJobSerializer(JobSerializer):\n    owner_name = serializers.SerializerMethodField()\n\n    class Meta(JobSerializer.Meta):\n        fields = JobSerializer.Meta.fields + ['owner_name']\n\n    def get_owner_name(self, obj):\n        return obj.created_by.get_full_name() if obj.created_by else None\n</code></pre>"},{"location":"reference/serializers/#custom-validation","title":"Custom Validation","text":"<pre><code>from automate_core.base import BaseSerializer\n\nclass MySerializer(BaseSerializer):\n    start_date = serializers.DateField()\n    end_date = serializers.DateField()\n\n    def validate(self, attrs):\n        attrs = super().validate(attrs)\n\n        if attrs['end_date'] &lt; attrs['start_date']:\n            raise serializers.ValidationError({\n                'end_date': 'End date must be after start date'\n            })\n\n        return attrs\n</code></pre>"},{"location":"reference/serializers/#dynamic-field-selection","title":"Dynamic Field Selection","text":"<pre><code>class FlexibleSerializer(DynamicFieldsMixin, BaseModelSerializer):\n    class Meta:\n        model = MyModel\n        fields = '__all__'\n\n# In view:\nserializer = FlexibleSerializer(\n    queryset,\n    many=True,\n    fields=['id', 'name']  # Only these fields\n)\n</code></pre>"},{"location":"reference/serializers/#nested-createupdate","title":"Nested Create/Update","text":"<pre><code>from automate_core.base import NestedWritableSerializer\n\nclass ParentSerializer(NestedWritableSerializer):\n    children = ChildSerializer(many=True)\n\n    nested_fields = {\n        'children': {\n            'serializer': ChildSerializer,\n            'many': True\n        }\n    }\n\n    class Meta:\n        model = Parent\n        fields = '__all__'\n\n# POST /api/parents/\n# {\n#     \"name\": \"Parent\",\n#     \"children\": [\n#         {\"name\": \"Child 1\"},\n#         {\"name\": \"Child 2\"}\n#     ]\n# }\n</code></pre>"},{"location":"reference/serializers/#using-in-viewsets","title":"Using in ViewSets","text":"<pre><code>from rest_framework import viewsets\nfrom automate_core.base import BaseModelSerializer\n\nclass MyModelSerializer(BaseModelSerializer):\n    class Meta:\n        model = MyModel\n        fields = '__all__'\n\nclass MyViewSet(viewsets.ModelViewSet):\n    queryset = MyModel.objects.all()\n    serializer_class = MyModelSerializer\n\n    def get_serializer_context(self):\n        context = super().get_serializer_context()\n        context['tenant_id'] = self.request.user.tenant_id\n        return context\n</code></pre>"},{"location":"reference/settings/","title":"Settings Reference","text":"<p>All configuration is contained in the <code>DJANGO_AUTOMATE</code> dictionary in <code>settings.py</code>.</p>"},{"location":"reference/settings/#core-settings","title":"Core Settings","text":"Path Type Default Description <code>ENABLED</code> <code>bool</code> <code>True</code> Global master switch. If False, triggers are ignored. <code>WORKER_MODE</code> <code>str</code> <code>\"thread\"</code> <code>\"thread\"</code>, <code>\"process\"</code>, or <code>\"custom\"</code>. Controls built-in worker behavior."},{"location":"reference/settings/#outbox-execution","title":"Outbox &amp; Execution","text":"Path Type Default Description <code>EXECUTION.timeout_seconds</code> <code>int</code> <code>60</code> Hard timeout for a single step execution span. <code>EXECUTION.max_retries</code> <code>int</code> <code>3</code> Default retries for transient exceptions. <code>EXECUTION.batch_size</code> <code>int</code> <code>10</code> SQL limit for <code>claim_batch</code>. <code>OUTBOX.lease_seconds</code> <code>int</code> <code>60</code> How long a worker owns a job before it expires (for crash recovery). <p>[!NOTE] DB Capability: On Postgres, <code>batch_size</code> uses <code>SKIP LOCKED</code> for high concurrency. On SQLite, it locks the table, reducing throughput.</p>"},{"location":"reference/settings/#governance-policy","title":"Governance &amp; Policy","text":"Path Type Default Description <code>POLICY.allow_ssrf</code> <code>bool</code> <code>False</code> Safety gate for HTTP connectors. Blocks private IPs. <code>POLICY.connector_allowlist</code> <code>list[str]</code> <code>[\"*\"]</code> Allowed connector codes. e.g. <code>[\"http.post\", \"slack.*\"]</code>. <code>POLICY.llm_budget_daily</code> <code>float</code> <code>10.0</code> Daily USD cap for LLM usage."},{"location":"reference/settings/#secrets","title":"Secrets","text":"Path Type Default Description <code>SECRETS.backend</code> <code>str</code> <code>\"env\"</code> Module path to <code>SecretsBackend</code>. <code>SECRETS.prefix</code> <code>str</code> <code>\"AUTOMATE_\"</code> Env var prefix for discovery."},{"location":"reference/settings/#observability","title":"Observability","text":"Path Type Default Description <code>OBSERVABILITY.log_schema</code> <code>str</code> <code>\"ecs\"</code> <code>\"ecs\"</code> (Elastic) or <code>\"simple\"</code>. <code>OBSERVABILITY.metrics_export</code> <code>bool</code> <code>False</code> Expose <code>/metrics</code> endpoint (Prometheus)."},{"location":"reference/templates/","title":"Templates Reference","text":"<p>Complete reference for Django Automate templates.</p>"},{"location":"reference/templates/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Template Structure</li> <li>Base Templates</li> <li>Admin Templates</li> <li>Studio Templates</li> <li>Override Guide</li> </ol>"},{"location":"reference/templates/#template-structure","title":"Template Structure","text":"<pre><code>src/\n\u251c\u2500\u2500 automate/templates/admin/\n\u2502   \u251c\u2500\u2500 automate/automation/change_list.html\n\u2502   \u251c\u2500\u2500 automate/prompt_eval.html\n\u2502   \u2514\u2500\u2500 index.html\n\u251c\u2500\u2500 automate_datachat/templates/admin/\n\u2502   \u2514\u2500\u2500 base_site.html\n\u251c\u2500\u2500 automate_modal/templates/admin/\n\u2502   \u2514\u2500\u2500 automate_modal/endpoint/test_console.html\n\u251c\u2500\u2500 automate_studio/templates/\n\u2502   \u251c\u2500\u2500 admin/automate/studio/{explorer,tester,wizard}.html\n\u2502   \u251c\u2500\u2500 admin/index.html\n\u2502   \u2514\u2500\u2500 studio/{base,dashboard,correlation,provider_test}.html\n\u2514\u2500\u2500 rag/templates/admin/\n    \u2514\u2500\u2500 rag/ragendpoint/test_query.html\n</code></pre>"},{"location":"reference/templates/#base-templates","title":"Base Templates","text":""},{"location":"reference/templates/#base_sitehtml","title":"base_site.html","text":"<p>Location: <code>automate_datachat/templates/admin/base_site.html</code></p> <p>Site-wide admin customization.</p> <p>Blocks:</p> Block Purpose <code>{% block title %}</code> Page title <code>{% block branding %}</code> Logo/site name <code>{% block nav-global %}</code> Navigation menu <code>{% block userlinks %}</code> User menu <code>{% block extrastyle %}</code> Additional CSS <p>Override:</p> <pre><code>&lt;!-- your_app/templates/admin/base_site.html --&gt;\n{% extends \"admin/base_site.html\" %}\n\n{% block branding %}\n&lt;h1 id=\"site-name\"&gt;My Custom Admin&lt;/h1&gt;\n{% endblock %}\n\n{% block extrastyle %}\n{{ block.super }}\n&lt;style&gt;\n    #header { background: #2c3e50; }\n&lt;/style&gt;\n{% endblock %}\n</code></pre>"},{"location":"reference/templates/#studiobasehtml","title":"studio/base.html","text":"<p>Location: <code>automate_studio/templates/studio/base.html</code></p> <p>Base layout for Studio views.</p> <p>Blocks:</p> Block Purpose <code>{% block title %}</code> Page title <code>{% block extra_head %}</code> Additional head content <code>{% block content %}</code> Main content <code>{% block sidebar %}</code> Sidebar content <code>{% block footer %}</code> Footer content <code>{% block extra_js %}</code> Additional JavaScript <code>{% block extra_css %}</code> Additional CSS <p>Override:</p> <pre><code>{% extends \"studio/base.html\" %}\n\n{% block extra_css %}\n{{ block.super }}\n&lt;link rel=\"stylesheet\" href=\"{% static 'css/custom.css' %}\"&gt;\n{% endblock %}\n\n{% block content %}\n&lt;div class=\"my-custom-layout\"&gt;\n    {{ block.super }}\n&lt;/div&gt;\n{% endblock %}\n</code></pre>"},{"location":"reference/templates/#admin-templates","title":"Admin Templates","text":""},{"location":"reference/templates/#automationchange_listhtml","title":"automation/change_list.html","text":"<p>Location: <code>automate/templates/admin/automate/automation/change_list.html</code></p> <p>Custom automation list view.</p> <p>Blocks:</p> Block Purpose <code>{% block result_list %}</code> The table of records <code>{% block search %}</code> Search form <code>{% block pagination %}</code> Pagination controls"},{"location":"reference/templates/#prompt_evalhtml","title":"prompt_eval.html","text":"<p>Location: <code>automate/templates/admin/automate/prompt_eval.html</code></p> <p>Prompt evaluation interface.</p> <p>Blocks:</p> Block Purpose <code>{% block content %}</code> Main evaluation form <code>{% block scripts %}</code> JavaScript for evaluation"},{"location":"reference/templates/#endpointtest_consolehtml","title":"endpoint/test_console.html","text":"<p>Location: <code>automate_modal/templates/admin/automate_modal/endpoint/test_console.html</code></p> <p>Modal endpoint test console.</p> <p>Blocks:</p> Block Purpose <code>{% block content %}</code> Console interface <code>{% block scripts %}</code> Console JavaScript"},{"location":"reference/templates/#ragendpointtest_queryhtml","title":"ragendpoint/test_query.html","text":"<p>Location: <code>rag/templates/admin/rag/ragendpoint/test_query.html</code></p> <p>RAG endpoint query tester.</p> <p>Blocks:</p> Block Purpose <code>{% block content %}</code> Query form <code>{% block results %}</code> Results display"},{"location":"reference/templates/#studio-templates","title":"Studio Templates","text":""},{"location":"reference/templates/#dashboardhtml","title":"dashboard.html","text":"<p>Location: <code>automate_studio/templates/studio/dashboard.html</code></p> <p>Main studio dashboard.</p> <p>Variables:</p> Variable Type Description <code>automations</code> QuerySet Active automations <code>executions_today</code> int Execution count <code>error_rate</code> float Error percentage <code>charts</code> dict Chart configurations"},{"location":"reference/templates/#correlationhtml","title":"correlation.html","text":"<p>Location: <code>automate_studio/templates/studio/correlation.html</code></p> <p>Event correlation explorer.</p> <p>Variables:</p> Variable Type Description <code>correlations</code> list Correlation data <code>time_range</code> tuple (start, end) dates"},{"location":"reference/templates/#explorerhtml","title":"explorer.html","text":"<p>Location: <code>automate_studio/templates/admin/automate/studio/explorer.html</code></p> <p>Execution explorer interface.</p>"},{"location":"reference/templates/#testerhtml","title":"tester.html","text":"<p>Location: <code>automate_studio/templates/admin/automate/studio/tester.html</code></p> <p>Rule tester interface.</p>"},{"location":"reference/templates/#wizardhtml","title":"wizard.html","text":"<p>Location: <code>automate_studio/templates/admin/automate/studio/wizard.html</code></p> <p>Automation creation wizard.</p>"},{"location":"reference/templates/#override-guide","title":"Override Guide","text":""},{"location":"reference/templates/#method-1-copy-to-project-templates","title":"Method 1: Copy to Project Templates","text":"<ol> <li>Create <code>templates/admin/</code> in your project</li> <li>Copy the template you want to override</li> <li>Modify as needed</li> </ol> <pre><code># settings.py\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [BASE_DIR / 'templates'],  # Your project templates first\n        ...\n    }\n]\n</code></pre> <pre><code>your_project/\n\u251c\u2500\u2500 templates/\n\u2502   \u2514\u2500\u2500 admin/\n\u2502       \u2514\u2500\u2500 base_site.html  # Your override\n\u2514\u2500\u2500 settings.py\n</code></pre>"},{"location":"reference/templates/#method-2-template-setting-on-admin","title":"Method 2: Template Setting on Admin","text":"<pre><code>@admin.register(MyModel)\nclass MyModelAdmin(BaseModelAdmin):\n    change_form_template = 'admin/myapp/mymodel/change_form.html'\n    change_list_template = 'admin/myapp/mymodel/change_list.html'\n</code></pre>"},{"location":"reference/templates/#method-3-template-setting-on-view","title":"Method 3: Template Setting on View","text":"<pre><code>class MyDashboardView(TemplateView):\n    template_name = 'myapp/dashboard.html'\n</code></pre> <pre><code># urls.py\nfrom automate_studio.views import DashboardView\n\nclass CustomDashboardView(DashboardView):\n    template_name = 'custom/dashboard.html'\n\nurlpatterns = [\n    path('dashboard/', CustomDashboardView.as_view()),\n]\n</code></pre>"},{"location":"reference/templates/#custom-admin-index","title":"Custom Admin Index","text":"<pre><code>&lt;!-- templates/admin/index.html --&gt;\n{% extends \"admin/index.html\" %}\n\n{% block content %}\n&lt;div class=\"custom-welcome\"&gt;\n    &lt;h2&gt;Welcome to {{ site_header }}&lt;/h2&gt;\n&lt;/div&gt;\n{{ block.super }}\n{% endblock %}\n\n{% block sidebar %}\n{{ block.super }}\n&lt;div class=\"custom-sidebar\"&gt;\n    &lt;h3&gt;Quick Links&lt;/h3&gt;\n    &lt;ul&gt;\n        &lt;li&gt;&lt;a href=\"/admin/automate/automation/\"&gt;Automations&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"/studio/dashboard/\"&gt;Studio Dashboard&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n{% endblock %}\n</code></pre>"},{"location":"reference/templates/#custom-change-form","title":"Custom Change Form","text":"<pre><code>&lt;!-- templates/admin/automate/automation/change_form.html --&gt;\n{% extends \"admin/change_form.html\" %}\n\n{% block after_field_sets %}\n&lt;div class=\"module\"&gt;\n    &lt;h2&gt;Workflow Preview&lt;/h2&gt;\n    &lt;div id=\"workflow-canvas\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n{% endblock %}\n\n{% block admin_change_form_document_ready %}\n{{ block.super }}\n&lt;script&gt;\n    // Initialize workflow preview\n    initWorkflowPreview('{{ original.id }}');\n&lt;/script&gt;\n{% endblock %}\n</code></pre>"},{"location":"reference/templates/#template-tags","title":"Template Tags","text":"<pre><code># templatetags/automate_tags.py\nfrom django import template\n\nregister = template.Library()\n\n@register.simple_tag\ndef automation_count():\n    from automate_core.workflows.models import Automation\n    return Automation.objects.filter(enabled=True).count()\n\n@register.inclusion_tag('components/status_badge.html')\ndef status_badge(status):\n    return {'status': status}\n</code></pre> <pre><code>{% load automate_tags %}\n\n&lt;p&gt;Active automations: {% automation_count %}&lt;/p&gt;\n{% status_badge execution.status %}\n</code></pre>"},{"location":"reference/templates/#component-templates","title":"Component Templates","text":""},{"location":"reference/templates/#includesheaderhtml","title":"includes/header.html","text":"<p>Reusable header component.</p> <pre><code>{% include \"studio/includes/header.html\" with title=\"My Page\" %}\n</code></pre>"},{"location":"reference/templates/#componentstest_resulthtml","title":"components/test_result.html","text":"<p>Test result display component.</p> <pre><code>{% include \"studio/components/test_result.html\" with result=test_result %}\n</code></pre>"},{"location":"reference/templates/#settings","title":"Settings","text":"<pre><code># settings.py\n\n# Template directories (project templates override package templates)\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [\n            BASE_DIR / 'templates',  # Project templates\n        ],\n        'APP_DIRS': True,  # Allows app templates\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n                # Custom context processor\n                'automate.context_processors.automate_context',\n            ],\n        },\n    },\n]\n</code></pre>"},{"location":"reference/views/","title":"Views Reference","text":"<p>Complete reference for all Django Automate views and ViewSets.</p>"},{"location":"reference/views/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Base Classes</li> <li>Mixins</li> <li>ViewSets by Module</li> <li>Customization Guide</li> </ol>"},{"location":"reference/views/#base-classes","title":"Base Classes","text":"<p>Import: <code>from automate_api.v1.base import BaseAPIView, BaseViewSet, BaseModelViewSet</code></p>"},{"location":"reference/views/#baseapiview","title":"BaseAPIView","text":"<p>Base API view with common middleware.</p> <pre><code>from automate_api.v1.base import BaseAPIView\nfrom rest_framework.response import Response\n\nclass MyAPIView(BaseAPIView):\n    def get(self, request):\n        return Response({'status': 'ok'})\n</code></pre> <p>Features: - Authentication integration - Permission checking - Rate limiting - CORS support</p>"},{"location":"reference/views/#baseviewset","title":"BaseViewSet","text":"<p>Base ViewSet with configuration support.</p> <pre><code>from automate_api.v1.base import BaseViewSet\n\nclass MyViewSet(BaseViewSet):\n    def list(self, request):\n        return Response({'items': []})\n</code></pre> <p>Mixins included: ConfigurableMixin, CORSMixin</p>"},{"location":"reference/views/#basemodelviewset","title":"BaseModelViewSet","text":"<p>Full CRUD ViewSet for models.</p> <pre><code>from automate_api.v1.base import BaseModelViewSet\n\nclass MyModelViewSet(BaseModelViewSet):\n    queryset = MyModel.objects.all()\n    serializer_class = MyModelSerializer\n</code></pre>"},{"location":"reference/views/#basereadonlyviewset","title":"BaseReadOnlyViewSet","text":"<p>Read-only ViewSet (list + retrieve).</p> <pre><code>from automate_api.v1.base import BaseReadOnlyViewSet\n\nclass MyReadOnlyViewSet(BaseReadOnlyViewSet):\n    queryset = MyModel.objects.all()\n    serializer_class = MyModelSerializer\n</code></pre>"},{"location":"reference/views/#mixins","title":"Mixins","text":""},{"location":"reference/views/#configurablemixin","title":"ConfigurableMixin","text":"<p>Access Django settings dynamically.</p> <pre><code>class MyViewSet(ConfigurableMixin, viewsets.ViewSet):\n    def list(self, request):\n        page_size = self.get_setting('PAGE_SIZE', 25)\n        # Uses AUTOMATE_API_PAGE_SIZE from settings\n</code></pre>"},{"location":"reference/views/#corsmixin","title":"CORSMixin","text":"<p>Add CORS headers to responses.</p> <pre><code>class MyViewSet(CORSMixin, viewsets.ViewSet):\n    cors_origins = ['https://example.com']\n    cors_methods = ['GET', 'POST']\n</code></pre>"},{"location":"reference/views/#tenantfiltermixin","title":"TenantFilterMixin","text":"<p>Auto-filter by tenant.</p> <pre><code>class MyViewSet(TenantFilterMixin, viewsets.ModelViewSet):\n    tenant_field = 'organization_id'\n\n    # Queryset automatically filtered by tenant\n</code></pre>"},{"location":"reference/views/#ratelimitmixin","title":"RateLimitMixin","text":"<p>Per-endpoint rate limiting.</p> <pre><code>class MyViewSet(RateLimitMixin, viewsets.ViewSet):\n    rate_limit = '100/hour'\n    rate_limit_key = 'user'  # or 'ip'\n</code></pre>"},{"location":"reference/views/#staffonlymixin","title":"StaffOnlyMixin","text":"<p>Restrict to staff users.</p> <pre><code>class MyViewSet(StaffOnlyMixin, viewsets.ViewSet):\n    # Only staff can access\n</code></pre>"},{"location":"reference/views/#publicapimixin","title":"PublicAPIMixin","text":"<p>Public endpoints with enhanced rate limiting.</p> <pre><code>class PublicViewSet(PublicAPIMixin, viewsets.ViewSet):\n    public_rate_limit = '10/minute'\n</code></pre>"},{"location":"reference/views/#viewsets-by-module","title":"ViewSets by Module","text":""},{"location":"reference/views/#automate_datachat-2-viewsets","title":"automate_datachat (2 ViewSets)","text":""},{"location":"reference/views/#chatviewset","title":"ChatViewSet","text":"<p>Staff chat interface for data queries.</p> Endpoint Method Description <code>/chat/</code> POST Send chat message <code>/history/</code> GET Get chat history Override Point Default Description <code>orchestrator_class</code> ChatOrchestrator Chat logic handler <code>history_page_size</code> 15 Messages per page <pre><code>from automate_datachat.viewsets import ChatViewSet\n\nclass CustomChatViewSet(ChatViewSet):\n    orchestrator_class = MyCustomOrchestrator\n    history_page_size = 25\n</code></pre>"},{"location":"reference/views/#embedviewset","title":"EmbedViewSet","text":"<p>Embeddable widget API.</p> Endpoint Method Description <code>/widget.js</code> GET Widget JavaScript <code>/chat/</code> POST Embed chat message <code>/config/</code> GET Widget configuration Override Point Default Description <code>embed_model</code> ChatEmbed Embed config model <code>_get_widget_js()</code> - Widget JS generator"},{"location":"reference/views/#automateapiviewsets-4-viewsets","title":"automate/api/viewsets/ (4 ViewSets)","text":""},{"location":"reference/views/#workflowviewset","title":"WorkflowViewSet","text":"<p>Workflow CRUD operations.</p> Endpoint Method Description <code>/workflows/</code> POST Create workflow <code>/workflows/{id}/</code> GET Get workflow <code>/workflows/{id}/</code> PUT Update workflow Override Point Default Description <code>service_class</code> WorkflowService Business logic"},{"location":"reference/views/#zapierviewset","title":"ZapierViewSet","text":"<p>Zapier integration webhooks.</p> Endpoint Method Description <code>/triggers/</code> GET List triggers <code>/subscribe/</code> POST Subscribe webhook <code>/unsubscribe/</code> POST Unsubscribe webhook Override Point Default Description <code>available_triggers</code> list Trigger list <code>validate_callback_url()</code> - SSRF protection"},{"location":"reference/views/#schemaviewset","title":"SchemaViewSet","text":"<p>Database schema introspection.</p> Endpoint Method Description <code>/apps/</code> GET List apps and models Override Point Default Description <code>excluded_apps</code> list Apps to hide"},{"location":"reference/views/#promptevalviewset","title":"PromptEvalViewSet","text":"<p>Prompt testing and metrics.</p> Endpoint Method Description <code>/{slug}/test/</code> POST Test prompt <code>/{slug}/metrics/</code> GET Get metrics Override Point Default Description <code>metrics_days</code> 30 Days of metrics <code>render_template()</code> - Template rendering"},{"location":"reference/views/#automate_apiv1views-6-viewsets","title":"automate_api/v1/views/ (6 ViewSets)","text":""},{"location":"reference/views/#eventingestview","title":"EventIngestView","text":"<p>Event ingestion endpoint.</p> Endpoint Method Description <code>/events/</code> POST Ingest event"},{"location":"reference/views/#jobviewset","title":"JobViewSet","text":"<p>Job management.</p> Endpoint Method Description <code>/jobs/</code> GET List jobs <code>/jobs/{id}/</code> GET Get job <code>/jobs/{id}/cancel/</code> POST Cancel job"},{"location":"reference/views/#artifactviewset","title":"ArtifactViewSet","text":"<p>Artifact retrieval.</p> Endpoint Method Description <code>/artifacts/</code> GET List artifacts <code>/artifacts/{id}/</code> GET Get artifact"},{"location":"reference/views/#providerviewset","title":"ProviderViewSet","text":"<p>LLM provider management.</p> Endpoint Method Description <code>/providers/</code> GET/POST List/Create <code>/providers/{id}/</code> GET/PUT/DELETE CRUD"},{"location":"reference/views/#endpointviewset","title":"EndpointViewSet","text":"<p>Endpoint management.</p> Endpoint Method Description <code>/endpoints/</code> GET List endpoints <code>/endpoints/{id}/run/</code> POST Run endpoint"},{"location":"reference/views/#executionviewset","title":"ExecutionViewSet","text":"<p>Execution history.</p> Endpoint Method Description <code>/executions/</code> GET List executions <code>/executions/{id}/</code> GET Get execution"},{"location":"reference/views/#ragapi-1-viewset","title":"rag/api/ (1 ViewSet)","text":""},{"location":"reference/views/#ragqueryviewset","title":"RAGQueryViewSet","text":"<p>RAG query and health.</p> Endpoint Method Description <code>/{slug}/query/</code> POST Execute query <code>/{slug}/health/</code> GET Health check Override Point Default Description <code>get_retrieval_provider()</code> - Retrieval config <code>build_query_context()</code> - Query context <code>log_query()</code> - Query logging"},{"location":"reference/views/#automate_modalapi-6-views","title":"automate_modal/api/ (6 Views)","text":"View Endpoint Description <code>EndpointRunView</code> <code>POST /endpoints/{id}/run/</code> Sync execution <code>EndpointStreamView</code> <code>POST /endpoints/{id}/stream/</code> SSE stream <code>EndpointJobView</code> <code>POST /endpoints/{id}/job/</code> Async job <code>JobStatusView</code> <code>GET /jobs/{id}/status/</code> Job status <code>JobEventsView</code> <code>GET /jobs/{id}/events/</code> Job events <code>ArtifactDownloadView</code> <code>GET /artifacts/{id}/download/</code> Download"},{"location":"reference/views/#automate_studio-7-views","title":"automate_studio/ (7 Views)","text":"View URL Description <code>DashboardView</code> <code>/studio/dashboard/</code> Main dashboard <code>CorrelationExplorerView</code> <code>/studio/correlation/</code> Event correlation <code>ExecutionExplorerView</code> <code>/admin/.../explorer/</code> Execution browser <code>WizardView</code> <code>/admin/.../wizard/</code> Creation wizard <code>RuleTesterView</code> <code>/admin/.../tester/</code> Rule testing <code>TestProviderView</code> <code>/studio/provider-test/</code> Provider testing <code>AutomationWizardView</code> <code>/admin/.../wizard/</code> Automation setup"},{"location":"reference/views/#customization-guide","title":"Customization Guide","text":""},{"location":"reference/views/#override-existing-viewset","title":"Override Existing ViewSet","text":"<pre><code>from automate_datachat.viewsets import ChatViewSet\n\nclass CustomChatViewSet(ChatViewSet):\n    orchestrator_class = MyOrchestrator\n    history_page_size = 50\n\n    def create(self, request):\n        # Pre-processing\n        log_chat_request(request)\n\n        response = super().create(request)\n\n        # Post-processing\n        track_usage(request.user)\n\n        return response\n</code></pre>"},{"location":"reference/views/#custom-permissions","title":"Custom Permissions","text":"<pre><code>from rest_framework.permissions import BasePermission\n\nclass IsProjectMember(BasePermission):\n    def has_permission(self, request, view):\n        project_id = view.kwargs.get('project_id')\n        return request.user.projects.filter(id=project_id).exists()\n\nclass MyViewSet(BaseModelViewSet):\n    permission_classes = [IsProjectMember]\n</code></pre>"},{"location":"reference/views/#custom-actions","title":"Custom Actions","text":"<pre><code>from rest_framework.decorators import action\nfrom rest_framework.response import Response\n\nclass MyViewSet(BaseModelViewSet):\n    @action(detail=True, methods=['post'])\n    def activate(self, request, pk=None):\n        obj = self.get_object()\n        obj.status = 'active'\n        obj.save()\n        return Response({'status': 'activated'})\n\n    @action(detail=False, methods=['get'])\n    def stats(self, request):\n        return Response({\n            'total': self.get_queryset().count(),\n            'active': self.get_queryset().filter(status='active').count()\n        })\n</code></pre>"},{"location":"reference/views/#custom-routing","title":"Custom Routing","text":"<pre><code>from rest_framework.routers import DefaultRouter\nfrom automate.api.viewsets import WorkflowViewSet\n\nclass CustomWorkflowViewSet(WorkflowViewSet):\n    # Custom implementation\n    pass\n\nrouter = DefaultRouter()\nrouter.register('workflows', CustomWorkflowViewSet, basename='workflow')\n\nurlpatterns = [\n    path('api/v1/', include(router.urls)),\n]\n</code></pre>"},{"location":"reference/views/#extend-baseviewset","title":"Extend BaseViewSet","text":"<pre><code>from automate_api.v1.base import BaseViewSet, StaffOnlyMixin\n\nclass MyAppBaseViewSet(StaffOnlyMixin, BaseViewSet):\n    \"\"\"Custom base for my app's views.\"\"\"\n\n    def get_queryset(self):\n        qs = super().get_queryset()\n        # App-specific filtering\n        return qs.filter(app='myapp')\n</code></pre>"},{"location":"reference/data-models/","title":"Data Models Reference","text":""},{"location":"reference/data-models/#event-automate_coreevent","title":"Event (<code>automate_core.Event</code>)","text":"<ul> <li>id: UUID (PK)</li> <li>type: String (Indexed) - The event designator e.g. <code>stripe.charge</code></li> <li>payload: JSONB - The raw input data.</li> <li>received_at: DateTime</li> </ul>"},{"location":"reference/data-models/#workflow-automate_coreworkflow","title":"Workflow (<code>automate_core.Workflow</code>)","text":"<ul> <li>name: String</li> <li>is_active: Boolean</li> <li>versions: One-to-Many to <code>WorkflowVersion</code></li> </ul>"},{"location":"reference/data-models/#executionrun-automate_coreexecutionrun","title":"ExecutionRun (<code>automate_core.ExecutionRun</code>)","text":"<ul> <li>trace_id: UUID (Indexed)</li> <li>status: Enum (PENDING, RUNNING, COMPLETED, FAILED)</li> <li>workflow_version: FK</li> <li>event: FK</li> </ul>"},{"location":"reference/data-models/#auditlogentry-automate_observabilityauditlogentry","title":"AuditLogEntry (<code>automate_observability.AuditLogEntry</code>)","text":"<ul> <li>actor: String</li> <li>action: String</li> <li>resource: String</li> <li>details: JSONB (Redacted)</li> </ul>"},{"location":"reference/python-api/","title":"Python API Reference","text":"<p>Stable public API surface for <code>django-automate</code>.</p>"},{"location":"reference/python-api/#runtime","title":"Runtime","text":""},{"location":"reference/python-api/#emit_event","title":"<code>emit_event</code>","text":"<pre><code>def emit_event(type: str, payload: dict, dedupe_key: str = None) -&gt; str:\n</code></pre> <p>Ingests an event into the Outbox. Returns the Event UUID.</p>"},{"location":"reference/python-api/#run_workflow","title":"<code>run_workflow</code>","text":"<pre><code>def run_workflow(workflow_slug: str, payload: dict) -&gt; str:\n</code></pre> <p>Directly bypasses the rule engine and executes a named workflow.</p>"},{"location":"reference/python-api/#rules","title":"Rules","text":""},{"location":"reference/python-api/#evaluate","title":"<code>evaluate</code>","text":"<pre><code>def evaluate(rule_spec: dict, context: dict) -&gt; bool:\n</code></pre> <p>Evaluates a JSONLogic rule against a context.</p>"},{"location":"reference/python-api/#secrets","title":"Secrets","text":""},{"location":"reference/python-api/#resolve","title":"<code>resolve</code>","text":"<pre><code>def resolve(ref: str) -&gt; str:\n</code></pre> <p>Resolves a <code>$secret:</code> reference string. This calls the configured backend.</p>"},{"location":"reference/python-api/llm/","title":"LLM API","text":"<p>Located in <code>django_automate.llm</code>.</p>"},{"location":"reference/python-api/llm/#llm_callprompt-inputs-profile","title":"<code>llm_call(prompt, inputs, profile)</code>","text":"<p>The main entry point for AI generations. *   Args:     *   <code>prompt</code>: String key or Prompt object.     *   <code>inputs</code>: Dict of variables for the prompt template.     *   <code>profile</code>: String name of ConnectionProfile. *   Returns: <code>LLMRun</code> object containing <code>.output.text</code> and usage stats. *   Side Effects: Creates <code>LLMRun</code> record, deducts budget buckets.</p>"},{"location":"reference/python-api/llm/#run_evaldataset-prompt_version","title":"<code>run_eval(dataset, prompt_version)</code>","text":"<p>Runs an evaluation suite. *   Args:     *   <code>dataset</code>: List of test cases (input/expected_output).     *   <code>prompt_version</code>: The specific prompt to test. *   Returns: <code>EvalRun</code> with aggregate scores (e.g., Accuracy: 85%).</p>"},{"location":"reference/python-api/rules/","title":"Rules API","text":"<p>Located in <code>django_automate.rules</code>.</p>"},{"location":"reference/python-api/rules/#evaluaterule-data","title":"<code>evaluate(rule, data)</code>","text":"<p>Evaluates a single rule against a data dictionary. *   Args:     *   <code>rule</code> (dict): JsonLogic structure.     *   <code>data</code> (dict): The event payload / context. *   Returns: <code>bool</code> (Match or No Match).</p>"},{"location":"reference/python-api/rules/#explainrule-data","title":"<code>explain(rule, data)</code>","text":"<p>Debugs a rule execution. Returns a tree where every node is annotated with its result. *   Returns: <code>ExplainNode</code> (dict).     <code>json     {         \"operator\": \"and\",         \"result\": false,         \"children\": [             { \"operator\": \"==\", \"result\": true },             { \"operator\": \"&gt;\", \"result\": false, \"reason\": \"50 &lt; 100\" }         ]     }</code></p>"},{"location":"reference/rest-api/","title":"REST API Reference","text":"<p>The API is documented via OpenAPI/Swagger at <code>/api/schema/swagger-ui/</code>.</p>"},{"location":"reference/rest-api/#authentication","title":"Authentication","text":"<p>All API requests require: <code>Authorization: Bearer &lt;TOKEN&gt;</code> or Session Cookie (if using Admin).</p>"},{"location":"reference/rest-api/#endpoints","title":"Endpoints","text":""},{"location":"reference/rest-api/#workflows","title":"Workflows","text":"<ul> <li><code>GET /api/automate/workflows/</code></li> <li><code>POST /api/automate/workflows/</code></li> <li><code>GET /api/automate/workflows/{id}/</code></li> </ul>"},{"location":"reference/rest-api/#executions","title":"Executions","text":"<ul> <li><code>GET /api/automate/executions/</code></li> <li><code>POST /api/automate/executions/{id}/replay/</code></li> </ul>"},{"location":"reference/rest-api/#events","title":"Events","text":"<ul> <li><code>POST /api/automate/webhooks/{source}/</code></li> </ul>"},{"location":"security/ssrf/","title":"SSRF Protection","text":"<p>Django Automate includes an SSRF-safe HTTP client for RAG and external integrations.</p>"},{"location":"security/ssrf/#quick-start","title":"Quick Start","text":"<pre><code>from rag.security.ssrf_client import ssrf_safe_request\n\n# Safe request with automatic protections\nresponse = ssrf_safe_request(\n    \"GET\",\n    \"https://api.example.com/data\",\n    timeout=30,\n    max_size=10 * 1024 * 1024,  # 10MB\n)\n</code></pre>"},{"location":"security/ssrf/#protections","title":"Protections","text":"Protection Status Description IPv4 Private Ranges \u2705 Blocks 10.x, 172.16.x, 192.168.x, 127.x, etc. IPv6 Private Ranges \u2705 Blocks ::1, fc00::/7, fe80::/10, etc. Redirect Attacks \u2705 Redirects blocked (<code>allow_redirects=False</code>) Response Size \u2705 Max size enforced via streaming Memory DoS \u2705 Uses <code>bytearray()</code> (O(n) not O(n\u00b2)) Proxy Abuse \u2705 <code>trust_env=False</code> ignores HTTP_PROXY Domain Allowlist \u2705 Optional allowlist for production"},{"location":"security/ssrf/#domain-allowlist-recommended-for-production","title":"Domain Allowlist (Recommended for Production)","text":"<p>For production environments, configure an allowlist:</p> <pre><code>from rag.security.ssrf_client import configure_allowlist\n\n# Only allow these domains\nconfigure_allowlist([\n    \"api.example.com\",\n    \"storage.googleapis.com\",\n    \"s3.amazonaws.com\",\n])\n</code></pre> <p>Or via Django settings:</p> <pre><code># settings.py\nRAG_ALLOWED_HOSTS = [\n    \"api.example.com\",\n    \"storage.googleapis.com\",\n]\n\n# In your app config\nfrom django.conf import settings\nfrom rag.security.ssrf_client import configure_allowlist\n\nif hasattr(settings, 'RAG_ALLOWED_HOSTS'):\n    configure_allowlist(settings.RAG_ALLOWED_HOSTS)\n</code></pre>"},{"location":"security/ssrf/#known-limitations","title":"Known Limitations","text":"<p>[!WARNING] DNS Rebinding: We resolve and check before request, but the HTTP library may re-resolve. For high-security environments, use the domain allowlist exclusively.</p> <p>[!IMPORTANT] Best Practice: Combine this client with network-level controls (firewall, egress rules) for defense-in-depth.</p>"},{"location":"security/ssrf/#blocked-ip-ranges","title":"Blocked IP Ranges","text":""},{"location":"security/ssrf/#ipv4","title":"IPv4","text":"<ul> <li><code>127.0.0.0/8</code> - Loopback</li> <li><code>10.0.0.0/8</code> - Private Class A</li> <li><code>172.16.0.0/12</code> - Private Class B</li> <li><code>192.168.0.0/16</code> - Private Class C</li> <li><code>169.254.0.0/16</code> - Link-local</li> <li><code>0.0.0.0/8</code> - Current network</li> <li><code>100.64.0.0/10</code> - Carrier-grade NAT</li> <li><code>224.0.0.0/4</code> - Multicast</li> <li><code>240.0.0.0/4</code> - Reserved</li> </ul>"},{"location":"security/ssrf/#ipv6","title":"IPv6","text":"<ul> <li><code>::1/128</code> - Loopback</li> <li><code>::/128</code> - Unspecified</li> <li><code>::ffff:0:0/96</code> - IPv4-mapped</li> <li><code>fc00::/7</code> - Unique local (private)</li> <li><code>fe80::/10</code> - Link-local</li> <li><code>ff00::/8</code> - Multicast</li> </ul>"},{"location":"security/ssrf/#error-handling","title":"Error Handling","text":"<pre><code>from rag.security.ssrf_client import ssrf_safe_request, SSRFError\n\ntry:\n    response = ssrf_safe_request(\"GET\", url)\nexcept SSRFError as e:\n    # Blocked by SSRF protection\n    print(f\"Blocked: {e}\")\nexcept requests.RequestException as e:\n    # Other HTTP errors\n    print(f\"Request failed: {e}\")\n</code></pre>"},{"location":"security/threat-model/","title":"Security Threat Model","text":""},{"location":"security/threat-model/#server-side-request-forgery-ssrf","title":"Server-Side Request Forgery (SSRF)","text":"<p>Risk: Users configuring an HTTP Connector to access internal metadata services (e.g. AWS <code>169.254.169.254</code>). Mitigation: *   <code>POLICY.allow_ssrf</code> setting defaults to <code>False</code>. *   The connector performs DNS resolution and checks against private IP ranges (<code>10.0.0.0/8</code>, <code>127.0.0.0/8</code>, etc.) before establishing a connection.</p>"},{"location":"security/threat-model/#secret-leakage","title":"Secret Leakage","text":"<p>Risk: Users accidentally logging secrets or viewing them in the UI. Mitigation: *   SecretRef: Secrets are not stored in the Workflow definition. *   Redaction: The <code>SecretResolver</code> registers all active secrets. The logging formatter and UI serializers aggressively scrub these strings from output.</p>"},{"location":"security/threat-model/#code-injection","title":"Code Injection","text":"<p>Risk: Using <code>eval()</code> in Python. Mitigation: *   We use JSONLogic for rules, which is a safe, data-only constrained language. *   We use Jinja2 SandboxedEnvironment for templates, preventing access to <code>os</code>, <code>sys</code>, or <code>__subclasses__</code>.</p>"},{"location":"security/webhook-signatures/","title":"Webhook Signature Verification","text":"<p>Securing inbound webhooks is critical to prevent attackers from spoofing events.</p>"},{"location":"security/webhook-signatures/#the-mechanic","title":"The Mechanic","text":"<p>We use HMAC-SHA256. The sender (e.g. Stripe) includes a header <code>Stripe-Signature</code> containing a timestamp and a signature. We calculate the expected signature using a shared secret and compare.</p>"},{"location":"security/webhook-signatures/#configuration","title":"Configuration","text":"<p>In <code>settings.py</code>:</p> <pre><code>DJANGO_AUTOMATE = {\n    # ...\n    \"WEBHOOKS\": {\n        \"stripe\": {\n            \"secret\": \"whsec_...\",\n            \"header\": \"Stripe-Signature\",\n            \"algorithm\": \"hmac-sha256\",\n        }\n    }\n}\n</code></pre>"},{"location":"security/webhook-signatures/#how-it-works-internally","title":"How it works internally","text":"<p>The <code>WebhookIngestor</code> view: 1.  Looks up the secret for the source. 2.  Computes <code>hmac.new(secret, payload, sha256)</code>. 3.  Compares with the header. 4.  Rejects with <code>401 Unauthorized</code> if mismatch.</p>"},{"location":"security/webhook-signatures/#best-practices","title":"Best Practices","text":"<ul> <li>Rotation: Support multiple secrets (list) during rotation.</li> <li>Timestamp: Verify the timestamp is within tolerance (e.g. 5 mins) to prevent replay attacks.</li> </ul>"},{"location":"studio/execution-explorer/","title":"Execution Explorer","text":"<p>The debugger for your automations.</p>"},{"location":"studio/execution-explorer/#features","title":"Features","text":""},{"location":"studio/execution-explorer/#visual-timeline","title":"Visual Timeline","text":"<p>A Gantt-chart style view of step execution. *   Bar Length: Duration of the step. *   Color: Green (Success), Red (Fail), Gray (Skipped).</p>"},{"location":"studio/execution-explorer/#payload-inspection","title":"Payload Inspection","text":"<p>Click any step to see: *   Input: The JSON data passed to the step. *   Output: The JSON data returned. *   State: Variable context at that point in time.</p> <p>[!WARNING] Redaction: By default, sensitive keys are masked. You need the <code>can_view_raw_payloads</code> permission to see unmasked data.</p>"},{"location":"studio/execution-explorer/#reprocessing","title":"Reprocessing","text":"<p>failed runs can be replayed. *   Replay from Step: Re-run just the failed step and subsequent steps. *   Full Replay: Start fresh with the original event.</p>"},{"location":"studio/overview/","title":"Admin Studio Overview","text":"<p>The Admin Studio (<code>/studio/</code>) is the visual control plane.</p>"},{"location":"studio/overview/#components","title":"Components","text":""},{"location":"studio/overview/#automation-wizard","title":"Automation Wizard","text":"<p>The primary authoring tool. *   Drag &amp; Drop: Visually arrange steps. *   AI Copilot: Generate workflows from text descriptions. *   Import: Paste n8n-compatible JSON.</p>"},{"location":"studio/overview/#rule-tester","title":"Rule Tester","text":"<p>A \"Unit Test\" workbench for your logic. *   Input: Paste a JSON event. *   Logic: Paste a JSON rule. *   Result: Visual tree showing pass/fail of every condition.</p>"},{"location":"studio/overview/#execution-explorer","title":"Execution Explorer","text":"<p>The operational dashboard. *   Visual Timeline: See timing of every step. *   Payload Inspection: Click steps to see data (Redacted by default). *   Status Indicators: Quickly find failed runs.</p>"},{"location":"tutorials/integrations/llm-step/","title":"Tutorial: LLM Chaining","text":"<p>Goal: Build a workflow that summarizes a support ticket and drafts a response.</p>"},{"location":"tutorials/integrations/llm-step/#1-prerequisites","title":"1. Prerequisites","text":"<ul> <li>OpenAI API Key (or Anthropic/Gemini).</li> <li>Configured Provider Profile.</li> </ul>"},{"location":"tutorials/integrations/llm-step/#2-steps","title":"2. Steps","text":""},{"location":"tutorials/integrations/llm-step/#step-1-define-the-prompt-template","title":"Step 1: Define the Prompt Template","text":"<p>In Admin &gt; LLM &gt; Prompts, create a new prompt <code>ticket_summarizer</code>:</p> <pre><code>Summarize this customer issue in 3 bullet points:\n{{ description }}\n</code></pre>"},{"location":"tutorials/integrations/llm-step/#step-2-build-the-workflow","title":"Step 2: Build the Workflow","text":"<pre><code>{\n    \"steps\": [\n        {\n            \"id\": \"summarize\",\n            \"action\": \"llm.chat\",\n            \"config\": {\n                \"prompt\": \"ticket_summarizer\",\n                \"inputs\": {\n                    \"description\": \"{{ event.payload.body }}\"\n                }\n            }\n        },\n        {\n            \"id\": \"draft_reply\",\n            \"action\": \"llm.chat\",\n            \"config\": {\n                \"messages\": [\n                    {\"role\": \"system\", \"content\": \"You are a helpful support agent.\"},\n                    {\"role\": \"user\", \"content\": \"Draft a reply based on this summary: {{ steps.summarize.output.text }}\"}\n                ]\n            }\n        }\n    ]\n}\n</code></pre>"},{"location":"tutorials/integrations/llm-step/#3-expected-output","title":"3. Expected Output","text":"<p>The <code>draft_reply</code> step output will contain the generated text.</p>"},{"location":"tutorials/triggers/inbound-webhooks/","title":"Inbound Webhooks Tutorial","text":""},{"location":"tutorials/triggers/inbound-webhooks/#1-what-youll-build","title":"1. What you'll build","text":"<p>A workflow that triggers when an external webhook (e.g., Stripe) hits your endpoint.</p>"},{"location":"tutorials/triggers/inbound-webhooks/#2-prerequisites","title":"2. Prerequisites","text":"<ul> <li>A running Django Automate instance.</li> <li>A tool like Postman or <code>curl</code> to simulate webhooks.</li> </ul>"},{"location":"tutorials/triggers/inbound-webhooks/#3-steps","title":"3. Steps","text":""},{"location":"tutorials/triggers/inbound-webhooks/#configure-ingestion","title":"Configure Ingestion","text":"<p>Ensure your <code>urls.py</code> includes the API routes. The generic webhook ingestion endpoint is <code>POST /api/automate/webhooks/{source}/</code>.</p>"},{"location":"tutorials/triggers/inbound-webhooks/#define-the-rule","title":"Define the Rule","text":"<p>We only want to trigger when the event type is <code>checkout.session.completed</code>.</p> <pre><code>{\n  \"and\": [\n    { \"==\": [{ \"var\": \"type\" }, \"checkout.session.completed\"] },\n    { \"==\": [{ \"var\": \"data.object.payment_status\" }, \"paid\"] }\n  ]\n}\n</code></pre>"},{"location":"tutorials/triggers/inbound-webhooks/#add-the-action","title":"Add the Action","text":"<p>Call your internal API to provision access using the <code>http.post</code> connector.</p> <pre><code>{\n  \"action\": \"http.post\",\n  \"config\": {\n    \"url\": \"http://internal-api/provision\",\n    \"json\": {\n        \"user_email\": \"{{ event.data.object.customer_email }}\",\n        \"plan\": \"premium\"\n    }\n  }\n}\n</code></pre>"},{"location":"tutorials/triggers/inbound-webhooks/#4-testing","title":"4. Testing","text":"<p>Send a POST request to <code>http://localhost:8000/api/automate/webhooks/stripe/</code>:</p> <pre><code>{\n    \"type\": \"checkout.session.completed\",\n    \"data\": { \"object\": { \"payment_status\": \"paid\", \"customer_email\": \"test@example.com\" } }\n}\n</code></pre>"},{"location":"tutorials/triggers/inbound-webhooks/#5-next-steps","title":"5. Next Steps","text":"<ul> <li>Secure your webhook with signatures</li> </ul>"},{"location":"tutorials/workflows/multi-step/","title":"Multi-Step Workflows","text":""},{"location":"tutorials/workflows/multi-step/#1-what-youll-build","title":"1. What you'll build","text":"<p>A workflow that Chains multiple actions: Webhook -&gt; Transform -&gt; Slack -&gt; Email.</p>"},{"location":"tutorials/workflows/multi-step/#2-prequisites","title":"2. Prequisites","text":"<ul> <li>Completed First Automation.</li> </ul>"},{"location":"tutorials/workflows/multi-step/#3-steps","title":"3. Steps","text":""},{"location":"tutorials/workflows/multi-step/#define-the-workflow","title":"Define the Workflow","text":"<pre><code>{\n    \"name\": \"Order Process\",\n    \"trigger\": { \"type\": \"webhook\", \"config\": { \"path\": \"order\" } },\n    \"steps\": [\n        {\n            \"id\": \"notify_slack\",\n            \"action\": \"slack.post_message\",\n            \"config\": {\n                \"channel\": \"#orders\",\n                \"text\": \"New Order: {{event.payload.id}}\"\n            }\n        },\n        {\n            \"id\": \"send_email\",\n            \"action\": \"email.send\",\n            \"config\": {\n                \"to\": \"{{event.payload.customer_email}}\",\n                \"subject\": \"Order Received\",\n                \"body\": \"Thanks for your order!\"\n            }\n        }\n    ]\n}\n</code></pre>"},{"location":"tutorials/workflows/multi-step/#accessing-previous-outputs","title":"Accessing Previous Outputs","text":"<p>You can verify the output of step 1 in step 2 (if it had an output). <code>{{ steps.notify_slack.output.ts }}</code> (Slack Timestamp).</p>"},{"location":"tutorials/workflows/multi-step/#4-expected-output","title":"4. Expected Output","text":"<ol> <li>Post to Slack.</li> <li>Send Email.</li> <li>Audit log shows 2 distinct step executions.</li> </ol>"}]}